(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d928eca2"],{"22a7":function(e,t,o){e.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)",theme:"#4d9bd5"}},"25cb":function(e,t,o){"use strict";o("22a7")},"36d5":function(e){e.exports={}},"39d6":function(e,t,o){"use strict";o("b210")},"4d6f":function(e,t,o){},"5eeb":function(e,t,o){},6481:function(e,t,o){"use strict";o("fca4")},"64b5":function(e,t,o){"use strict";o("e30e")},8239:function(e){e.exports={sheet_name:"计划申请单",rows:5,sheet_template:[{code:"line1",component_type_name:"",component_type_code:"row",row:0,span:24,value:"",value_template:"",is_required:!1,is_show:!0,parent:"",children:[{code:"DIYTAGVgJPK9YF1zywUIhO1650253611",component_type_name:"姓名",component_type_code:"input",row:0,span:16,value:"",value_template:"",is_required:!1,is_show:!0,parent:"line1"}]},{code:"line2",component_type_name:"容器",component_type_code:"container",row:0,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"",children:[{code:"jiksoldfhgu8903427598",component_type_name:"性别",component_type_code:"select",row:1,span:24,value:"",value_template:"",is_required:!1,is_show:!0,parent:"line2"}]},{code:"line3",component_type_name:"",component_type_code:"row",row:2,span:24,value:"",value_template:"",is_required:!1,is_show:!0,children:[{code:"sdfg",component_type_name:"第三方",component_type_code:"input",row:2,span:12,value:"",value_template:"",is_required:!1,is_show:!0,parent:"line3"},{code:"jikso903427598",component_type_name:"徐",component_type_code:"datePicker",row:2,span:12,value:"",value_template:"",is_required:!1,is_show:!0,parent:"line3"}]},{code:"line5",component_type_name:"",component_type_code:"row",row:3,value:"",value_template:"",is_required:!1,is_show:!0,children:[{code:"dfgd345345",component_type_name:"选择",component_type_code:"select",row:3,span:12,value:"",value_template:"",is_required:!1,is_show:!0,parent:"line5"}]},{code:"xvnbv",component_type_name:"列表",component_type_code:"List",row:4,span:24,value:"",value_template:"",is_required:!1,is_show:!0,parent:"",label:"",children:[{code:"dfsg345",component_type_name:"列表",component_type_code:"list",row:4,span:24,value:"",value_template:"",is_required:!1,is_show:!0,parent:"xvnbv",label:"",children:[{code:"546fgjh",component_type_name:"选择",component_type_code:"row",row:4,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"dfsg345",children:[{code:"bnvmmghj4e5",component_type_name:"泥头车",component_type_code:"select",row:4,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"546fgjh"}]},{code:"cdxfvbnc567y45",component_type_name:"二行",component_type_code:"row",value:"",value_template:"",is_required:!1,is_show:!0,parent:"dfsg345",children:[{code:"cvbbncv",component_type_name:"自行车",component_type_code:"select",row:4,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"cdxfvbnc567y45"},{code:"cxvb12",component_type_name:"摩托车",component_type_code:"input",row:4,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"cdxfvbnc567y45"}]}]}]},{code:"吃vbn56",component_type_name:"表格",component_type_code:"form",row:5,span:24,value:"",value_template:[{code:"1111",name:"1111"}],is_required:!1,is_show:!0,parent:"vcbn56",label:"",children:{}},{code:"lineskdlfjgl",component_type_name:"容器标题",component_type_code:"container",row:5,span:24,value:"",value_template:"",is_required:!1,is_show:!0,parent:"vcbn56",label:"",children:[{code:"546fgfgdbfgjh",component_type_name:"选择",component_type_code:"datePicker",row:4,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"lineskdlfjgl"},{code:"cghvhj6547",component_type_name:"三口来得及",component_type_code:"select",row:4,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"lineskdlfjgl"},{code:"klsdf9080",component_type_name:"文本",component_type_code:"text",col:3,span:8,value:"",value_template:"",is_required:!1,is_show:!0,parent:"lineskdlfjgl"}]}]}},8882:function(e,t,o){"use strict";o("4d6f")},"9e91":function(e,t,o){"use strict";o("ea0d")},a61c:function(e,t,o){e.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)",theme:"#4d9bd5"}},aa85:function(e,t,o){"use strict";o("5eeb")},b210:function(e,t,o){},bb11:function(e,t,o){"use strict";o("a61c")},bf3f:function(e,t,o){"use strict";o("c8c7")},c4f1:function(e,t,o){"use strict";o("fdee")},c5d0:function(e,t,o){"use strict";var i=o("23e7"),n=o("857a"),a=o("af03");i({target:"String",proto:!0,forced:a("italics")},{italics:function(){return n(this,"i","","")}})},c8c7:function(e,t,o){e.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)"}},e30e:function(e,t,o){},ea0d:function(e,t,o){e.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)"}},f1d8:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-design"},[o("div",{staticClass:"form-menu"},[o("div",{staticClass:"form-menu-title"},[o("el-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("return"),expression:"$l('return')"}],staticClass:"icon",on:{click:e.goBack}},[o("el-icon",{staticClass:"el-icon-arrow-left"})],1),e._v(" "),o("strong",[e._v(e._s(e.$route.query.name))])],1),e._v(" "),o("div",{staticClass:"form-menu-btn"},[o("el-button",{staticClass:"clearBtn",attrs:{type:"subprimary"},on:{click:e.printView}},[e._v("打印预览")]),e._v(" "),o("el-button",{staticClass:"clearBtn",attrs:{type:"subprimary"},on:{click:e.resetFrom}},[e._v("清空")]),e._v(" "),o("el-button",{staticClass:"saveBtn",attrs:{disabled:e.disabledSave},on:{click:function(t){return e.saveForm(!1)}}},[e._v(e._s(e.$l("save")))])],1)]),e._v(" "),o("div",{staticClass:"form-area"},[o("div",{staticClass:"form-left"},[o("el-tabs",{on:{"tab-click":e.clickLibrary},model:{value:e.activeLibrary,callback:function(t){e.activeLibrary=t},expression:"activeLibrary"}},[o("el-tab-pane",{attrs:{label:"控件库",name:"comLibryay"}},e._l(e.componentsList,(function(t,i){return o("div",{key:i},[o("div",{staticClass:"form-left-title"},[e._v(e._s(t.component_type))]),e._v(" "),o("draggable",{staticClass:"draggable-source",attrs:{group:{name:"componentsGroup",pull:"clone",put:!1},draggable:".el-button.block-body-button.draggable-item.form-left-btn.el-button--dashed",filter:".disabled",sort:!1,move:e.onAddMove},on:{start:e.onAddStart,end:e.onAddEnd},model:{value:t.children,callback:function(o){e.$set(t,"children",o)},expression:"components.children"}},e._l(t.children,(function(t){return o("el-button",{key:t.component_type_code,staticClass:"block-body-button draggable-item form-left-btn",class:t.is_used||e.isAssessForm&&"PRESET"===t.component_type_source?"disabled":"",attrs:{type:"dashed",disabled:t.is_used||e.isAssessForm&&"PRESET"===t.component_type_source},on:{click:function(o){return e.addComponent(t)}}},[e._v("\n                "+e._s(t.component_type_name)+"\n              ")])})),1)],1)})),0),e._v(" "),o("el-tab-pane",{attrs:{label:"关联表单",name:"linkLibryay"}},[o("div",{staticClass:"form-left-inner"},[o("div",{staticClass:"form-left-connect"},[o("el-input",{staticClass:"form-left-input",attrs:{placeholder:"表单名称","suffix-icon":"el-icon-search"},model:{value:e.formLinkKeyword,callback:function(t){e.formLinkKeyword=t},expression:"formLinkKeyword"}})],1),e._v(" "),e._l(e.connectList,(function(t){return o("div",{key:t.code,staticClass:"form-left-connect"},[o("el-button",{staticClass:"form-left-connectBtn",on:{click:function(o){return e.selectConnectForm(t)}}},[e._v(e._s(t.name))])],1)}))],2)])],1)],1),e._v(" "),o("div",{staticClass:"form-main"},[o("el-form",[o("draggable",{staticClass:"draggable-base",attrs:{tag:"div",list:e.formList,animation:340,group:{name:"componentsGroup",pull:!0,put:!0},dragClass:"dragName",ghostClass:"ghostName",handle:".handler",move:e.onBaseMove},on:{start:e.onFormStart,end:e.onEnd}},e._l(e.formList,(function(t,i){return o("div",{key:i,staticClass:"form-row",class:t.is_container?"container":""},[o("div",{class:e.activeCom.code===t.code?"activeRow":"disActive",on:{click:function(o){return e.selectThisRow(t)}}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.is_container,expression:"row.is_container"}],staticClass:"handler"},[o("div",{on:{click:function(o){return e.selectItem(t)}}},[o("div",{staticClass:"module-title is-handler-title",class:{"is-no-name":!t.name}},[e._v(e._s(t.name))]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.selectRow==t.code,expression:"selectRow == row.code"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticStyle:{display:"inline-block"}},[o("el-icon",{staticClass:"el-icon-rank itemHandle"})],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.selectRow==t.code&&!t.is_must,expression:"selectRow == row.code && !row.is_must"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],on:{click:function(o){return e.deleteRow(t)}}},[o("el-icon",{staticClass:"el-icon-close"})],1)]),e._v(" "),o("div",{class:t.is_container?"container":"hideContainer"},[t.children&&0==t.children.length?o("draggable",{staticClass:"draggable-empty-base",attrs:{tag:"div",list:t.children,animation:340,group:{name:"componentsGroup",pull:!1,put:!0},dragClass:"dragName",ghostClass:"ghostName"}},[o("div",{staticClass:"empty"})]):e._e(),e._v(" "),o("draggable",{staticClass:"draggable-row",class:{"contain-scan-diagram":t.is_container&&e.isContainScanDiagram(t.children)},attrs:{tag:"el-row",list:t.children,animation:340,group:{name:"componentsGroup",pull:!0,put:!0},handle:".itemHandle",dragClass:"dragName",ghostClass:"ghostName",move:e.onMove},on:{start:e.onFormStart,end:e.onEnd}},e._l(t.children,(function(n){return o("el-col",{key:n.code,staticClass:"form-row-col",class:{"is-scan-diagram":e.isScanDiagram(n)},attrs:{span:n.span}},["list"==n.component_type_code||"clinical_list"===n.component_type_code||"radiotherapy_record"===n.component_type_code||"art_execute"===n.component_type_code?o("div",{staticClass:"list",class:e.activeCom.code==n.code?"activeList":"disActive"},["list"==n.component_type_code?o("div",{staticClass:"list-header",on:{click:function(t){return e.selectItem(n)}}},[o("title-with-line",{staticClass:"list-header-title",style:{marginRight:n.name?"8px":0},attrs:{name:n.name}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.activeCom.code==n.code,expression:"activeCom.code == col.code"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticStyle:{display:"inline-block"},attrs:{slot:"left"},slot:"left"},[o("el-icon",{staticClass:"el-icon-rank itemHandle"})],1),e._v(" "),o("div",{staticClass:"btnArea",attrs:{slot:"right"},slot:"right"},[o("el-button",{staticClass:"textbtn",attrs:{type:"text",disabled:""}},[e._v(e._s(n.custom.delBtn||e.$l("delete")))]),e._v(" "),o("el-button",{staticClass:"textbtn",attrs:{type:"text",disabled:""}},[e._v(e._s(n.custom.addBtn||"增加"))])],1)])],1):"clinical_list"===n.component_type_code||"radiotherapy_record"===n.component_type_code||"art_execute"===n.component_type_code?o("div",{staticClass:"clinical-header",on:{click:function(t){return e.selectItem(n)}}},[o("div",[o("span",{staticClass:"module-title is-handler-title",class:{"is-no-name":!n.name}},[e._v(e._s(n.name))]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.activeCom.code==n.code,expression:"activeCom.code == col.code"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticStyle:{display:"inline-block"}},[o("el-icon",{staticClass:"el-icon-rank itemHandle"})],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.activeCom.code==n.code,expression:"activeCom.code == col.code"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],on:{click:function(t){return e.deleteCom(n)}}},[o("el-icon",{staticClass:"el-icon-close"})],1)]):e._e(),e._v(" "),"clinical_list"==n.component_type_code?o("title-with-line",{staticClass:"clinical-content_btnArea"},[o("div",{staticStyle:{"padding-left":"8px"},attrs:{slot:"right"},slot:"right"},[o("el-button",{staticClass:"textbtn",attrs:{type:"text",disabled:""}},[e._v(e._s(n.custom.tumor_diagnosis||"增加肿瘤诊断"))]),e._v(" "),o("el-button",{staticClass:"textbtn",attrs:{type:"text",disabled:""}},[e._v(e._s(n.custom.non_tumor_diagnosis||"增加非肿瘤诊断"))])],1)]):e._e(),e._v(" "),o("draggable",{staticClass:"draggable-list",class:["clinical_list"===n.component_type_code||"radiotherapy_record"===n.component_type_code||"art_execute"===n.component_type_code?"container":"",{"contain-scan-diagram":e.isContainScanDiagram(n.children)},{"is-no-indent":e.isNoIndent(n)}],attrs:{tag:"el-row",list:n.children,animation:340,group:{name:"componentsGroup",pull:e.isComponentsGroupPull(n),put:"clinical_list"!==n.component_type_code},handle:".itemHandle",dragClass:"dragName",ghostClass:"ghostName",move:e.onMove},on:{start:e.onFormStart,end:e.onEnd}},e._l(n.children,(function(i,a){return o("el-col",{key:i.code,staticClass:"form-row-col",class:[{"is-scan-diagram":e.isScanDiagram(i)}],attrs:{span:i.span},on:{click:function(t){return e.selectThisRow(i)}}},["form"==i.component_type_code?o("form-table",{ref:"formItemTableRef",refInFor:!0,attrs:{form:e.formList,draggable:"",item:i,active:e.activeCom},on:{click:function(t){return e.clickTable(i)},selectItem:e.selectItem,deleteItem:e.deleteCom}}):"column_table"==i.component_type_code||"clinical_goal"==i.component_type_code?o("column-form-table",{ref:"formItemTableRef",refInFor:!0,attrs:{form:e.formList,draggable:"",item:i,active:e.activeCom},on:{click:function(t){return e.clickTable(i)},selectItem:e.selectItem,deleteItem:e.deleteCom}}):o("form-item",{directives:[{name:"show",rawName:"v-show",value:!i.is_freeze,expression:"!listItem.is_freeze"}],ref:"fortItemRef",refInFor:!0,attrs:{form:e.formList,item:i,layout:e.getLayoutValue(n,t),draggable:"",disabled:"",active:e.activeCom},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}})],1)})),1),e._v(" "),o("draggable",{directives:[{name:"show",rawName:"v-show",value:0==n.children.length,expression:"col.children.length == 0"}],class:"draggable-empty-list "+i,attrs:{tag:"div",list:n.children,animation:340,group:{name:"componentsGroup",pull:!1,put:!0},dragClass:"dragName",ghostClass:"ghostName"}},[o("div",{staticClass:"empty"})])],1):"plan_connect"==n.component_type_code?o("div",{staticClass:"list plan_connect",class:e.activeCom.code==n.code?"activeList":"disActive",attrs:{active:e.activeCom},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}},[o("div",{staticClass:"list-header",on:{click:function(t){return e.selectItem(n)}}},[o("div",{staticClass:"handler-title"},[o("div",{directives:[{name:"show",rawName:"v-show",value:n.name,expression:"col.name"}],staticClass:"handler-title-icon"}),e._v(" "),o("span",[e._v(e._s(n.name))]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.activeCom.code==n.code,expression:"activeCom.code == col.code"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticStyle:{display:"inline-block"}},[o("el-icon",{staticClass:"el-icon-rank itemHandle"})],1)]),e._v(" "),o("div",{staticClass:"btnArea"},[o("mt-button",{staticClass:"plan-connect-btn",attrs:{type:"table",disabled:""}},[e._v(e._s(e.$l("manual_addition")))]),e._v(" "),o("mt-button",{staticClass:"plan-connect-btn",attrs:{type:"table",disabled:""}},[e._v(e._s(e.$l("relation")))])],1)]),e._v(" "),o("mt-plan-connect",{attrs:{disabled:"",detail:n}})],1):"form"==n.component_type_code||e.isAfterLoadingClinicalGoals(n.component_type_code)?o("form-table",{ref:"formItemTableRef",refInFor:!0,attrs:{form:e.formList,draggable:"",item:n,active:e.activeCom},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}}):"verify_results"===n.component_type_code?o("mt-verify-results",{attrs:{active:e.activeCom,draggable:"",detail:n,sourceType:"design"},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}}):e.isMoldManagement(n.component_type_code)?o("mold-management",{class:e.activeCom.code===n.code?"activeList":"disActive",attrs:{"is-active":e.activeCom.code===n.code,detail:n,draggable:"",sourceType:"design"},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}}):"order_opening"===n.component_type_code?o("order-opening",{class:e.activeCom.code===n.code?"activeList":"disActive",attrs:{"is-active":e.activeCom.code===n.code,detail:n,draggable:"",sourceType:"design"},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}}):"column_table"==n.component_type_code||"clinical_goal"==n.component_type_code?o("column-form-table",{ref:"formItemTableRef",refInFor:!0,attrs:{form:e.formList,draggable:"",item:n,active:e.activeCom},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}}):"treatForm"===n.component_type_code?o("mt-treat-table",{attrs:{sourceType:"design",draggerable:"",active:e.activeCom,detail:n,showLabel:!1},on:{deleteItem:e.deleteCom,selectItem:e.selectItem}}):"posed_photos"===n.component_type_code?o("posed-photos",{ref:"posed",refInFor:!0,attrs:{draggerable:"",sourceType:"design",active:e.activeCom,detail:n,showLabel:!1},on:{deleteItem:e.deleteCom,selectItem:e.selectItem}}):"after_loading_execute"===n.component_type_code?o("mt-after-loading-execute",{attrs:{sourceType:"design",draggerable:"",active:e.activeCom,detail:n,showLabel:!1},on:{deleteItem:e.deleteCom,selectItem:e.selectItem}}):"art_execute_info"===n.component_type_code?o("mt-art-check-execute",{attrs:{sourceType:"design",draggerable:"",active:e.activeCom,detail:n,showLabel:!1},on:{deleteItem:e.deleteCom,selectItem:e.selectItem}}):o("form-item",{ref:"fortItemRef",refInFor:!0,attrs:{form:e.formList,item:n,disabled:"",draggable:"",active:e.activeCom,layout:e.getLayoutValue(t)},on:{selectItem:e.selectItem,deleteItem:e.deleteCom}})],1)})),1)],1)])])})),0)],1)],1),e._v(" "),o("div",{staticClass:"form-right"},[o("right-panel",{ref:"rightPanel",staticClass:"area",attrs:{activeCom:e.activeCom,totalSpan:e.totalSpan,parentRef:e.$refs,isClinicalGoalFixedColumn:e.isClinicalGoalFixedColumn,"form-list":e.formList},on:{change:e.editComponent,setTemplate:e.setTemplate,copy:e.copyCom,delete:e.deleteCom}})],1)]),e._v(" "),o("el-dialog",{attrs:{title:e.connectDialogTitle,visible:e.connectDialog,"close-on-click-modal":!1,width:"35%"},on:{"update:visible":function(t){e.connectDialog=t}}},[o("el-row",{staticClass:"connect"},[o("el-col",{staticClass:"connect-left",attrs:{span:13}},[o("div",{staticClass:"connect-left-title"},[o("div",{staticClass:"label",on:{click:e.handleCheckAllChangeBtn}},[e._v("全选")]),e._v(" "),o("el-checkbox",{staticClass:"box",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAllComs,callback:function(t){e.checkAllComs=t},expression:"checkAllComs"}},[o("span")])],1),e._v(" "),o("el-checkbox-group",{staticClass:"comGroup",on:{change:e.handleCheckConnectComs},model:{value:e.checkedComs,callback:function(t){e.checkedComs=t},expression:"checkedComs"}},e._l(e.connectComsList,(function(t,i){return o("div",{key:i,staticClass:"comGroup-item"},[o("div",{staticClass:"label",on:{click:function(o){return e.clickComLabel(t)}}},[e._v("\n              "+e._s(e.removeHtmlTags(t.name)||t.component_type_name)+"\n            ")]),e._v(" "),o("el-checkbox",{staticClass:"box",attrs:{label:t}},[o("span")])],1)})),0)],1),e._v(" "),o("el-col",{staticClass:"connect-right",attrs:{span:11}},[o("div",{staticClass:"connect-right-title"},[e._v("已选字段")]),e._v(" "),e._l(e.checkedComs,(function(t,i){return o("div",{key:i,staticClass:"connect-right-selected"},[e._v("\n          "+e._s(e.removeHtmlTags(t.name)||t.component_type_name)+"\n        ")])}))],2)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"btn",on:{click:function(t){e.connectDialog=!1}}},[e._v(e._s(e.$l("cancel")))]),e._v(" "),o("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.selectConnectComs}},[e._v(e._s(e.$l("confirm")))])],1)],1),e._v(" "),e.printViewType?o("div",{ref:"print"},[o("render-form",{ref:"render",attrs:{inEdit:!1,sourceType:"print"}})],1):e._e(),e._v(" "),o("el-dialog",{staticClass:"mt-dialog warning-dialog",attrs:{title:"提示",visible:e.dialogTemplateConfirmVisible,width:"30%","before-close":e.handleTemplateClose,"append-to-body":!0},on:{"update:visible":function(t){e.dialogTemplateConfirmVisible=t}}},[o("div",{staticClass:"content",staticStyle:{"text-align":"center","margin-top":"22px"}},[e._v("\n      该表单已配置了模板，保存后模板将会被同步更新，确定保存？\n    ")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("mt-button",{attrs:{type:"submain"},on:{click:function(t){return e.handleTemplateClose(!0)}}},[e._v("不保存")]),e._v(" "),o("mt-button",{attrs:{type:"submain"},on:{click:function(t){return e.handleTemplateClose(!1)}}},[e._v("取消")]),e._v(" "),o("mt-button",{on:{click:e.handleTemplateConfirm}},[e._v("保存")])],1)])],1)},n=[],a=(o("a4d3"),o("e01a"),o("b636"),o("d28b"),o("8172"),o("944a"),o("d9e2"),o("99af"),o("4de4"),o("7db0"),o("c740"),o("a630"),o("caad"),o("e260"),o("14d9"),o("fb6a"),o("a434"),o("efec"),o("b0c0"),o("e9f5"),o("910d"),o("f665"),o("7d54"),o("a732"),o("e9c4"),o("0c47"),o("23dc"),o("a9e3"),o("e439"),o("dbb4"),o("3410"),o("b64b"),o("1f68"),o("131a"),o("d3b7"),o("e6cf"),o("ac1f"),o("00b4"),o("25f0"),o("2532"),o("3ca3"),o("5319"),o("2ca0"),o("159b"),o("ddb0"),o("2f62")),s=o("b76a"),l=o.n(s),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item",class:e.inTable?"inTable":"",style:e.isCustomImage?{position:"relative"}:{}},[e.isCustomImage?i("div",{style:{paddingTop:100*(e.item.custom.column||8)/e.item.span+"%"}}):e._e(),e._v(" "),i("div",{staticClass:"comp",style:e.customImageStyle,on:{click:function(t){return t.stopPropagation(),e.selectItem(e.item)}}},["text"!==e.item.component_type_code&&"remoteCounter"!==e.item.component_type_code?i("el-form-item",{staticClass:"comp-item",class:{active:e.isActive,"is-horizontal-layout":e.isHorizontalLayout,"textarea-gap":e.isTextareaTitleNeedGap},style:Object.assign({},e.customImageStyle,e.inTable||"image"===e.item.component_type_code||"QRCode"===e.item.component_type_code||"scan_diagram"===e.item.component_type_code?{}:e.item.style),attrs:{label:e.componentLabel,required:e.item.is_required}},[e._t("label",[!e.inTable&&e.draggable&&e.showCommonActiveActions?i("div",{staticClass:"compLabel",class:{hasNoLabel:e.hasNoLabel}},[e.isActive||"image"!==e.item.component_type_code||"QRCode"!==e.item.component_type_code||"scan_diagram"===e.item.component_type_code?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}]},[e.item.name?e._e():i("span",{class:e.item.is_required?"required":""}),e._v(" "),e.isHorizontalLayout?e._e():i("div",{staticClass:"keepHeight"},[e._v("1")]),e._v(" "),i("el-icon",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-icon-rank itemHandle"})],1):e._e(),e._v(" "),i("div",{staticClass:"compLabel-btnarea"},[e.isActive&&!e.item.is_must?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],on:{click:function(t){return e.deleteItem(e.item)}}},[i("el-icon",{staticClass:"el-icon-close"})],1):e._e()])]):e._e()]),e._v(" "),e.isQuoteStatusShowValueOnly?i("div",{staticClass:"block-body__detail main"},[e._v("\n        --\n      ")]):i("div",{staticClass:"block-body__detail main",style:"image"===e.item.component_type_code&&"custom_image"===e.item.custom.image_type?{height:"calc(100% - 30px)"}:""},["posed_photos"===e.item.component_type_code?i("posed-photos",{attrs:{showLabel:!1,sourceType:"design",disabled:e.disabled,width:e.inputWidth,maxlength:e.item.max_len,minlength:e.item.min_len,detail:e.item},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"visit_number"===e.item.code||"admission_number"===e.item.code||"his_input"===e.item.component_type_code||"patient_id"===e.item.code||"event_no"===e.item.code?i("el-input",{staticClass:"id-input",attrs:{showLabel:!1,sourceType:"design",disabled:e.disabled,width:e.inputWidth,maxlength:e.item.max_len,minlength:e.item.min_len},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},[i("mt-button",{directives:[{name:"show",rawName:"v-show",value:e.item.custom&&e.item.custom.HIS,expression:"item.custom && item.custom.HIS"}],staticClass:"id-input__btn",attrs:{slot:"suffix",disabled:e.disabled},slot:"suffix"},[e._v("HIS")])],1):"input"===e.item.component_type_code&&"name"!==e.item.code||"input_detail"===e.item.component_type_code?i("mt-input",{attrs:{sourceType:"design",disabled:e.draggable||e.disabled,width:e.inputWidth,maxlength:e.item.max_len,minlength:e.item.min_len},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"input"===e.item.component_type_code&&"name"===e.item.code?i("nameInput",{attrs:{sourceType:"design",showLabel:!1,disabled:e.draggable||e.disabled,inEdit:!0,allowEmpty:"",width:e.inputWidth,maxlength:e.item.max_len,minlength:e.item.min_len,detail:e.item,layout:e.layout}}):"inputNumber"===e.item.component_type_code?i("render-input-number",{attrs:{disabled:e.draggable||e.disabled,detail:e.item,showLabel:!1,inEdit:!0,sourceType:"design"}}):"select"===e.item.component_type_code?i("mt-select",{attrs:{value:"",showLabel:!1,sourceType:"design",allowCreate:"",autoSelect:!1,filterable:"",disabled:e.draggable||e.disabled,width:e.inputWidth,options:e.item.value_template}}):"selectMutiple"===e.item.component_type_code?i("mt-select",{attrs:{value:[],showLabel:!1,sourceType:"design",autoSelect:!1,multiple:"",allowCreate:"",filterable:"",disabled:e.draggable||e.disabled,width:e.inputWidth,options:e.item.value_template}}):"radio"!==e.item.component_type_code||e.item.custom.type?"radio"===e.item.component_type_code&&e.item.custom.type?i("el-checkbox-group",{staticClass:"radio radio-group-comp",attrs:{showLabel:!1,sourceType:"design",disabled:""},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.item.value_template,(function(t,o){return i("el-checkbox",{key:o,style:e.item.custom.direction?"display: block;":"",attrs:{label:t.value,"true-label":t.value,"false-label":""}},[e._v("\n            "+e._s(t.value)+"\n          ")])})),1):"datePicker"===e.item.component_type_code?i("mt-datepicker",{attrs:{showLabel:!1,sourceType:"design",disabled:e.draggable||e.disabled,"value-format":e.item.value_template||"yyyy-MM-dd",width:e.inputWidth},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"dateTimePicker"===e.item.component_type_code?i("renderDateTimePicker",{style:{width:"100%"},attrs:{showLabel:!1,disabled:e.draggable||e.disabled,detail:e.item,inEdit:!0,sourceType:"design"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"textarea"===e.item.component_type_code?i("text-area",{attrs:{detail:e.item,showLabel:!1,inEdit:!0,sourceType:"design",disabled:e.draggable||e.disabled},scopedSlots:e._u([e.inTable?null:{key:"btnPrefix",fn:function(){return[!e.isHorizontalLayout&&e.isActive?i("el-icon",{staticClass:"el-icon-rank itemHandle"}):e._e()]},proxy:!0},e.inTable?null:{key:"btnSuffix",fn:function(){return[e.isHorizontalLayout||!e.isActive||e.item.is_must?e._e():i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],staticStyle:{"padding-left":"8px"},on:{click:function(t){return e.deleteItem(e.item)}}},[i("el-icon",{staticClass:"el-icon-close"})],1)]},proxy:!0}],null,!0)}):"areaSelect"===e.item.component_type_code?i("mt-distpicker",{attrs:{showLabel:!1,sourceType:"design",disabled:e.draggable||e.disabled,width:e.inputWidth},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"image"===e.item.component_type_code&&e.item.value_template&&e.item.custom&&"custom_image"!==e.item.custom.image_type?i("img",{class:"left"==e.item.custom.position?"image-left":"right"==e.item.custom.position?"image-right":"image-center",style:e.item.style,attrs:{showLabel:!1,sourceType:"design",src:e.getImageSrc}}):"image"===e.item.component_type_code&&!e.item.value_template&&e.item.custom&&"built_in_image"===e.item.custom.image_type?i("div",{staticClass:"image-empty",attrs:{showLabel:!1,sourceType:"design"}},[i("img",{style:e.item.style,attrs:{src:o("919d6")}}),e._v(" "),i("span",[e._v("右侧编辑区上传图片")])]):e.isCustomImage?[i("div",{staticClass:"custom-image"},[i("div",{staticClass:"custom-image-empty"},[i("img",{attrs:{src:o("47fa"),alt:""}})]),e._v(" "),i("div",[i("div",{staticClass:"custom-image-upload",staticStyle:{"margin-bottom":"7px"}},[i("div",{staticClass:"label"},[e._v("本地上传")]),e._v(" "),i("el-upload",{staticClass:"upload",attrs:{action:"",disabled:""}},[i("mt-button",{staticClass:"addBtn",staticStyle:{height:"26px"},attrs:{type:"submain",disabled:""}},[e._v("导入")])],1)],1),e._v(" "),i("div",{staticClass:"custom-image-text"},[i("div",{staticClass:"label"},[e._v("截图上传")]),e._v(" "),i("div",{staticClass:"text"},[i("div",{staticClass:"text-1"},[e._v(" ① 快捷键Win+Shift+S截图 ")]),e._v(" "),i("div",{staticClass:"text-2"},[e._v(" ② 单击此控件区域，Ctrl+V粘贴图片 ")])])])])])]:"scan_diagram"===e.item.component_type_code?i("scan-diagram",{attrs:{showLabel:!1,detail:e.item,sourceType:"design",disabled:""}}):"QRCode"===e.item.component_type_code?i("mt-qrcode",{attrs:{showLabel:!1,sourceType:"design",detail:e.item}}):"attachment"===e.item.component_type_code?i("mt-upload",{attrs:{showLabel:!1,sourceType:"design",tips:!1,action:e.uploadUrl,disabled:"",multiple:"","file-list":e.fileList},on:{change:e.onFileChange}}):"dicomAttachment"===e.item.component_type_code?i("mt-upload",{attrs:{showLabel:!1,sourceType:"design",action:e.uploadUrl,multiple:"","file-list":e.fileList},on:{change:e.onFileChange}}):"calculate"===e.item.component_type_code?i("mt-contextual-computing",{ref:"calculate"+e.item.code,attrs:{showLabel:!1,sourceType:"design",disabled:"",data:e.contextualData,expression:e.item.value_template},on:{setExp:e.getCalculate},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"unit"===e.item.component_type_code?i("mt-input-with-unit",{attrs:{showLabel:!1,sourceType:"design",draggerable:"",inEdit:!0,disabled:"",detail:e.item},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"chiefDoctor"===e.item.component_type_code?i("el-select",{style:{width:"100%"},attrs:{value:"",disabled:""}}):"hospital_logo_name"===e.item.component_type_code?i("mt-hospital-logo-name"):"docGroup"===e.item.component_type_code?i("mt-doc-group",{attrs:{showLabel:!1,sourceType:"design",disabled:"",type:"doc"},on:{updateDocList:e.updateValue_template},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"phyGroup"===e.item.component_type_code?i("mt-doc-group",{attrs:{showLabel:!1,sourceType:"design",disabled:"",type:"phy"},on:{updateDocList:e.updateValue_template},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"verifyPhyGroup"===e.item.component_type_code?i("mt-doc-group",{attrs:{showLabel:!1,sourceType:"design",disabled:"",type:"ver"},on:{updateDocList:e.updateValue_template},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"positionMachine"===e.item.component_type_code?i("mt-machine-list",{attrs:{inEdit:!0,componentData:e.item,showLabel:!1,sourceType:"design",disabled:"",type:"定位"},on:{updateRoomList:e.updateValue_template},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"repositionMachine"===e.item.component_type_code?i("mt-machine-list",{attrs:{inEdit:!0,componentData:e.item,showLabel:!1,sourceType:"design",disabled:"",type:"复位"},on:{updateRoomList:e.updateValue_template},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"treatMachine"===e.item.component_type_code?i("mt-machine-list",{attrs:{inEdit:!0,componentData:e.item,showLabel:!1,sourceType:"design",disabled:"",type:"治疗"},on:{updateRoomList:e.updateValue_template},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"subFrequecy"===e.item.component_type_code?i("mt-input",{attrs:{showLabel:!1,sourceType:"design",disabled:"",width:e.inputWidth,type:"number"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"treatFrequency"===e.item.component_type_code?i("mt-treat-frequency",{attrs:{showLabel:!1,sourceType:"design",draggerable:"",inEdit:!0,detail:e.item,disabled:"",value:e.item.value}}):"treatForm"===e.item.component_type_code?i("mt-treat-table",{attrs:{showLabel:!1,sourceType:"design",form:e.item,disabled:""},on:{selectItem:e.selectItemfromTable}}):e.isMultiDiagnosis?i("div",{staticStyle:{display:"flex",gap:"20px"}},[i("div",{staticStyle:{flex:"1"}},[i("diagnosis-code-split",{attrs:{showLabel:!0,sourceType:"design",detail:e.item,disabled:"",layout:e.layout,valueType:"diagnose"}})],1),e._v(" "),i("div",{staticStyle:{flex:"1"}},[i("diagnosis-code-split",{attrs:{showLabel:!0,sourceType:"design",detail:e.item,disabled:"",layout:e.layout,valueType:"stage"}})],1)]):"diagnose"===e.item.component_type_code||"clinical_diagnosis"===e.item.component_type_code?i("diagnosis-code",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,disabled:"",draggable:"",type:"name"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"approvalRemark"===e.item.component_type_code?i("mt-input",{attrs:{showLabel:!1,sourceType:"design",disabled:e.draggable||e.disabled,maxlength:e.item.max_len,minlength:e.item.min_len,type:"textarea"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"planSys"===e.item.component_type_code?i("mt-dictionary",{attrs:{showLabel:!1,disabled:"",sourceType:"design",dict:"PLAN_SYSTEM"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"scan_area"===e.item.component_type_code?i("mt-dictionary",{attrs:{showLabel:!1,disabled:"",sourceType:"design",dict:"SCAN_AREA"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"scan_method"===e.item.component_type_code?i("mt-dictionary",{attrs:{showLabel:!1,disabled:"",sourceType:"design",dict:"SCAN_METHOD"},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"id_input"===e.item.component_type_code?i("el-input",{staticClass:"id-input",attrs:{showLabel:!1,sourceType:"design",disabled:e.disabled,width:e.inputWidth,maxlength:e.item.max_len,minlength:e.item.min_len},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},[i("mt-button",{directives:[{name:"show",rawName:"v-show",value:e.item.custom&&e.item.custom.HIS,expression:"item.custom && item.custom.HIS"}],staticClass:"id-input__btn",attrs:{slot:"suffix",disabled:e.disabled},slot:"suffix"},[i("i",[e._v("HIS")])]),e._v(" "),i("mt-button",{staticClass:"id-input__btn",attrs:{slot:"suffix",disabled:e.disabled},slot:"suffix"},[i("i",{staticClass:"el-icon-search"})])],1):"radiationCode"===e.item.component_type_code?i("el-input",{staticClass:"id-input",attrs:{showLabel:!1,sourceType:"design",disabled:e.disabled,width:e.inputWidth},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"sign"===e.item.component_type_code?i("mt-sign",{attrs:{showLabel:!1,sourceType:"design",draggerable:"",inEdit:!0,detail:e.item},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"birthdate"===e.item.component_type_code?i("mt-datepicker",{attrs:{showLabel:!1,sourceType:"design","value-format":"yyyy-MM-dd",width:e.inputWidth},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"age"===e.item.component_type_code?i("mt-input-number",{attrs:{showLabel:!1,sourceType:"design",allowEmpty:"",maxlength:999,minlength:0,type:"number",width:e.inputWidth},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"plan_template"===e.item.component_type_code?i("mt-preset-table",{attrs:{showLabel:!1,sourceType:"design",code:e.item.component_type_code},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}}):"TNMComponent"===e.item.component_type_code?i("mt-tnm",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,disabled:"",options:e.item.custom},model:{value:e.item.value,callback:function(t){e.$set(e.item,"value",t)},expression:"item.value"}}):"FIGOComponent"===e.item.component_type_code?i("mt-figo",{attrs:{showLabel:!1,sourceType:"design",disabled:"",options:e.item.custom},model:{value:e.item.value,callback:function(t){e.$set(e.item,"value",t)},expression:"item.value"}}):"sickness_division"===e.item.component_type_code||"breast_surgery_method"===e.item.component_type_code?i("mt-select",{attrs:{disabled:""}}):"skip_node"===e.item.component_type_code?i("mt-skip-node",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,disabled:""}}):"name_pinyin"===e.item.component_type_code||"surname_pinyin"===e.item.component_type_code?i("mt-input",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,disabled:""}}):"cascade_control"===e.item.component_type_code||"treatment_area"===e.item.component_type_code?i("mt-cascader",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,disabled:""}}):"deadline"===e.item.component_type_code?i("mt-datepicker",{attrs:{showLabel:!1,width:"100%","value-format":"yyyy-MM-dd",sourceType:"design",detail:e.item,disabled:""}}):"quote"===e.item.component_type_code?i("mt-quote",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,disabled:""}}):"treatTech"===e.item.component_type_code?i("mt-dictionary",{attrs:{showLabel:!1,sourceType:"design",dict:"TREATMENT_TECH",detail:e.item,disabled:""}}):"plan_check"==e.item.component_type_code?i("mt-plancheck",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,inEdit:!0,disabled:""}}):"execution_record"==e.item.component_type_code?i("mt-execution-record",{attrs:{showLabel:!1,sourceType:"design",detail:e.item,inEdit:!0,disabled:""}}):"verify_device"===e.item.component_type_code?i("mt-verify-device",{attrs:{sourceType:"design",showLabel:!1,inEdit:!0,disabled:"",detail:e.item}}):"sickness_division_reference"===e.item.component_type_code||"clinical_goal_input"===e.item.component_type_code?i("mt-input",{attrs:{sourceType:"design",disabled:"",detail:e.item}}):"clinical_goal_select"===e.item.component_type_code||e.isAfterLoadingClinicalGoalsChild(e.item.component_type_code)||"hospital_campus"===e.item.component_type_code?i("mt-select",{attrs:{sourceType:"design",disabled:"",detail:e.item}}):"position_group"===e.item.component_type_code?i("mt-select",{attrs:{disabled:""}}):"clinical_goal_actual"===e.item.component_type_code||"clinical_goal_achieve"===e.item.component_type_code?i("mt-input",{attrs:{sourceType:"design",disabled:"",detail:e.item}}):e.isPatientLabel(e.item.component_type_code)?i("mt-button",{staticStyle:{padding:"0"},attrs:{type:"table",disabled:""}},[i("i",{staticClass:"el-icon-plus"}),e._v(" "+e._s(e.$l("add_label"))+"\n        ")]):"blank"===e.item.component_type_code?i("div",{staticClass:"blank",style:{height:e.item.custom&&e.item.custom.height?e.item.custom.height+"px":"auto"},attrs:{showLabel:!1,sourceType:"design"}}):"position_appointment"===e.item.component_type_code?i("div",[i("mt-position-appointment",{attrs:{sourceType:"design",detail:e.item}})],1):"after_loading_appointment"===e.item.component_type_code||"art_execute_info"===e.item.component_type_code?i("div",[i("mt-after-loading-appointment",{attrs:{sourceType:"design",detail:e.item}})],1):"multiSign"===e.item.component_type_code?i("art-execute-sign",{attrs:{sourceType:"design",inEdit:!0,detail:e.item}}):"option_association"===e.item.component_type_code?i("option-association",{attrs:{sourceType:"design",inEdit:!0,detail:e.item}}):e._e():i("el-radio-group",{staticClass:"radio radio-group-comp",attrs:{showLabel:!1,sourceType:"design",disabled:""},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.item.value_template,(function(t,o){return i("el-radio",{key:o,style:e.item.custom.direction?"display: block;":"",attrs:{label:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1)],2)],2):"remoteCounter"===e.item.component_type_code?i("mt-remote-counter",{attrs:{showLabel:!1,sourceType:"design",disabled:"",draggable:"",detail:e.item}}):e._e(),e._v(" "),"text"===e.item.component_type_code?i("div",{class:{active:e.isActive}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.item.is_must,expression:"!item.is_must"}],on:{click:function(t){return e.deleteItem(e.item)}}},[i("el-icon",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],staticClass:"el-icon-close",staticStyle:{float:"right",padding:"4px 5px 0 5px"}})],1),e._v(" "),i("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.item.value||e.item.name||"请输入文本内容",expression:"item.value || item.name || '请输入文本内容'"}],staticClass:"text itemHandle",class:""==e.item.name?"emptyText":"",style:e.item.style})]):e._e()],1)])},c=[],m=o("365c"),d=o("dbca"),u=o("6013"),p=o("4ec1"),f=o("4cf0"),h=o("c388"),v=o("e885"),b=o("d966"),y=o("d771"),g=o("213e"),C=o("a79c"),x=o("651d"),w=o("2f6c"),k=o("6956"),L=o("4076"),T=o("591a"),$={name:"FormItem",props:{item:{type:Object,default:function(){return{}}},form:{type:Array,default:function(){return[]}},active:{type:Object,default:function(){return{}}},inTable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},value:{type:[String,Number,Array],default:""},layout:{type:String,default:""}},components:{TextArea:k["a"],ScanDiagram:y["a"],DiagnosisCode:d["a"],MtDictionary:f["a"],nameInput:b["a"],posedPhotos:g["a"],MtPositionAppointment:h["a"],MtAfterLoadingAppointment:v["a"],RenderInputNumber:x["a"],artExecuteSign:L["a"],optionAssociation:T["a"],renderDateTimePicker:w["a"],DiagnosisCodeSplit:u["a"]},data:function(){return{emptyText:"xx",fileList:[],uploadUrl:"",val:this.value,contextualData:{components:[],table:[]}}},computed:{isCustomImage:function(){return Object(C["q"])(this.item)},customImageStyle:function(){return this.isCustomImage?{position:"absolute",left:0,top:0,right:0,bottom:0}:{}},isHorizontalLayout:function(){return"horizontal"===this.layout&&Object(C["p"])(this.item.component_type_code)},isQuoteStatusShowValueOnly:function(){return Object(C["p"])(this.item.component_type_code)&&!!this.layout&&this.item.is_quote},isActive:function(){return this.item.code===this.active.code},inputWidth:function(){return"100%"},getImageSrc:function(){var e=m["a"].GET_UPLOAD_FILE+"?component_type_code="+this.item.component_type_code+"&file_id="+this.item.value_template;return e},hasNoLabel:function(){return"input"===this.item.component_type_code&&"name"===this.item.code&&"default"!==this.item.custom.type&&this.item.custom.type||this.isMultiDiagnosis},isMultiDiagnosis:function(){return Object(C["u"])(this.item)},componentLabel:function(){var e=["image","QRCode","blank","hospital_logo_name","scan_diagram"],t=e.includes(this.item.component_type_code)||this.hasNoLabel,o=this.isQuoteStatusShowValueOnly?":":"",i=t?"":this.item.name+o;return this.inTable?"":i.replace(/ /g," ")},showCommonActiveActions:function(){return"textarea"!==this.item.component_type_code||"textarea"===this.item.component_type_code&&this.isHorizontalLayout},isTextareaTitleNeedGap:function(){var e=this.item,t=e.component_type_code,o=e.is_enable,i=e.custom,n="textarea"===t&&(o||(null===i||void 0===i?void 0:i.check));return n&&this.isHorizontalLayout&&!this.isQuoteStatusShowValueOnly}},watch:{value:function(e){this.val=e,"inputNumber"===e.item.component_type_code&&(this.val=void 0)},val:function(e){this.item.value=e,this.$emit("change",e)},form:{deep:!0,handler:function(e){this.contextualData=Object(p["b"])(e)}}},created:function(){},mounted:function(){},methods:{isAfterLoadingClinicalGoalsChild:C["l"],isPatientLabel:C["v"],selectItem:function(e){this.draggable&&"treatForm"!==e.component_type_code&&this.$emit("selectItem",e)},deleteItem:function(e){console.log("item",e),this.draggable&&this.$emit("deleteItem",e)},getCalculate:function(e){console.log("getCalculate",e),this.item.value_template=e},selectItemfromTable:function(e){var t=this;this.item.children.forEach((function(o){o.code==e.code&&t.$emit("selectItem",o)}))},changeGroup:function(e){},updateValue_template:function(e){this.item.value_template=e.slice(0)},onFileChange:function(){}}},S=$,N=(o("6481"),o("9e91"),o("2877")),O=Object(N["a"])(S,r,c,!1,null,"0f5eb603",null),E=O.exports,I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-table noAfter",class:{active:e.isActive}},[o("div",{staticClass:"form-table-title",on:{click:function(t){return e.selectTable(e.item)}}},[o("div",[e.isAfterLoadingClinicalGoals?o("div",{staticClass:"module-title is-handler-title"},[e._v(e._s(e.item.name))]):o("span",[e._v(e._s(e.item.name))]),e._v(" "),e.isActive?o("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticStyle:{display:"inline-block"}},[o("el-icon",{staticClass:"el-icon-rank itemHandle"})],1):e._e()]),e._v(" "),o("div",{staticClass:"form-table-title-btnarea"},[e.item.is_enable?o("el-button",{staticClass:"btn",attrs:{type:"text",disabled:""}},[e._v("选择模板")]):e._e(),e._v(" "),e.item.is_enable?o("el-button",{staticClass:"btn",attrs:{type:"text",disabled:""}},[e._v("存为模板")]):e._e(),e._v(" "),e.isActive?o("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],on:{click:function(t){return e.deleteItem(e.item)}}},[o("el-icon",{staticClass:"el-icon-close"})],1):e._e()],1)]),e._v(" "),o("draggable",{class:"form-table-body "+e.rowList.length,attrs:{tag:"div",list:e.item.children,sort:!1,animation:340,group:{name:"componentsGroup",pull:e.disabledPullPut,put:e.disabledPullPut},disabled:e.disabled,dragClass:"dragName",ghostClass:"ghostName",handle:".handler"}},[e._l(e.rowList,(function(t,i){return o("div",{key:"subItem "+i,class:["form-table-item",{"is-adjust-height":e.isAfterLoadingClinicalGoals}],style:t.style},[e.item.children[i]?o("div",{ref:"header_"+i,refInFor:!0,staticClass:"header",on:{click:function(o){return e.selectItem(t)}}},[o("div",{staticClass:"header-name",class:e.item.children[i].is_required?"isrequired":""},[e._v("\n          "+e._s(e.item.children[i].name)+"\n        ")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isAfterLoadingClinicalGoals?!t.is_must:!e.disabled&&!e.item.is_must,expression:"\n            isAfterLoadingClinicalGoals\n              ? !inner.is_must\n              : !disabled && !item.is_must\n          "},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],staticClass:"iconBTn",on:{click:function(o){return e.deleteItem(t,i)}}},[o("el-icon",{staticClass:"el-icon-delete"})],1)]):o("div",{ref:"header_"+i,refInFor:!0,staticClass:"header",class:e.item.is_required?"isrequired":""},[e._v("\n        "+e._s("标题")+"\n      ")]),e._v(" "),o("div",{staticClass:"main-body"},[o("form-item",{attrs:{item:t,form:e.form,draggable:"",disabled:"",inTable:"",active:e.active},on:{selectItem:e.selectItem}})],1),e._v(" "),e.isAfterLoadingClinicalGoals?o("div",{staticClass:"main-body footer-fixed"},[e._v("-")]):e._e()])})),e._v(" "),e.isAfterLoadingClinicalGoals?e._l(e.afterLoadingClinicalGoalsFixed,(function(t,i){return o("div",{key:i,staticClass:"form-table-item fixed-field is-adjust-height"},[o("div",{staticClass:"header"},[o("div",{staticClass:"header-name"},[e._v("\n            "+e._s(t.name)+"\n          ")])]),e._v(" "),o("div",{staticClass:"main-body"}),e._v(" "),o("div",{staticClass:"main-body"},[0===i?o("el-button",{staticClass:"btn",attrs:{type:"text",disabled:""}},[e._v(e._s(e.$l("choose_a_plan")))]):o("span",[e._v("-")])],1)])})):e._e(),e._v(" "),0===e.item.children.length?o("div",{staticClass:"emptyArea"},[o("div",{staticClass:"empty"},[o("span",[e._v("将控件拖拽到此处")])])]):e._e()],2)],1)},D=[];o("d81d"),o("ab43"),o("36d5");function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function P(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function j(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?P(Object(o),!0).forEach((function(t){F(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):P(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function F(e,t,o){return(t=M(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function M(e){var t=V(e,"string");return"symbol"==A(t)?t:t+""}function V(e,t){if("object"!=A(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=A(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var q={name:"formTable",data:function(){return{disabled:!1,afterLoadingClinicalGoalsFixed:[{name:this.$l("frequency")},{name:this.$l("total2")}]}},components:{draggable:l.a,FormItem:E},props:{item:{type:Object,default:function(){return{}}},active:{type:Object,default:function(){return{}}},form:{type:Array,default:function(){return[]}}},watch:{template_dialog:function(e){0==e&&this.checkTableDisabled()},rowListStyle:{handler:function(e){var t=this;this.$nextTick((function(){t.adjustHeaderHeights()}))},deep:!0,immediate:!0}},mounted:function(){this.checkTableDisabled()},computed:j(j({isActive:function(){return this.item.code===this.active.code},rowList:function(){for(var e=[],t=0;t<this.item.children.length;t++)e.push(this.item.children[t]);return e},rowListStyle:function(){var e;return(null===(e=this.rowList)||void 0===e?void 0:e.map((function(e){return{style:e.style,name:e.name}})))||[]}},Object(a["b"])({template_dialog:"design/template_dialog"})),{},{isAfterLoadingClinicalGoals:function(){return Object(C["k"])(this.item.component_type_code)},disabledPullPut:function(){return!this.isAfterLoadingClinicalGoals}}),methods:{checkTableDisabled:function(){var e=this;this.item.code&&this.$request.post(m["a"].CHECK_SHEET_TEMPLATE_HAS_VALUE,{code:this.item.code}).then((function(t){1e4===t.code&&(e.disabled=t.data.has_value,e.item.is_freeze=t.data.has_value,e.item.children.forEach((function(e){e.is_freeze=t.data.has_value})))}))},selectItem:function(e){this.$emit("selectItem",e,"inTable")},selectTable:function(e){this.$emit("selectItem",e)},deleteItem:function(e,t){this.$emit("deleteItem",e)},getAllHeaderRefs:function(){for(var e=[],t=0;t<this.rowList.length;t++){var o=this.$refs["header_".concat(t)];o&&o.length>0&&e.push(o[0])}return e},adjustHeaderHeights:function(){var e=32,t=this.getAllHeaderRefs();t.forEach((function(t){var o=t.querySelector(".header-name").offsetHeight;o>e&&(e=o)})),e>0&&t.forEach((function(t){t.style.height="".concat(e,"px")}))}}},R=q,z=(o("8882"),Object(N["a"])(R,I,D,!1,null,"719d0a14",null)),B=z.exports,G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"form-table noAfter",class:{active:e.isActive}},[o("div",{staticClass:"form-table-title",on:{click:function(t){return e.selectTable(e.item)}}},[o("div",[o("span",[e._v(e._s(e.item.name))]),e._v(" "),o("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"},{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticStyle:{display:"inline-block"}},[o("el-icon",{staticClass:"el-icon-rank itemHandle"})],1)]),e._v(" "),o("div",{staticClass:"form-table-title-btnarea"},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.item.is_enable,expression:"item.is_enable"}],staticClass:"btn",attrs:{type:"text",disabled:""}},[e._v("选择模板")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.item.is_enable,expression:"item.is_enable"}],staticClass:"btn",attrs:{type:"text",disabled:""}},[e._v("存为模板")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.item.custom.select_plan,expression:"item.custom.select_plan"}],staticClass:"btn",attrs:{type:"text",disabled:""}},[e._v("选择计划")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],on:{click:function(t){return e.deleteItem(e.item)}}},[o("el-icon",{staticClass:"el-icon-close"})],1)],1)]),e._v(" "),o("div",{staticClass:"form-table-columnbody"},[o("draggable",{class:"form-table-body "+e.rowList.length,attrs:{tag:"div",list:e.item.children,sort:!1,animation:340,group:{name:"componentsGroup",pull:!0,put:!0},disabled:e.disabled,dragClass:"dragName",ghostClass:"ghostName",handle:".handler"}},[e._l(e.rowList,(function(t,i){return"clinical_goal"!==e.item.component_type_code||t.custom.is_show?o("div",{key:"subItem "+i,staticClass:"form-table-item",style:t.style},[e.item.children[i]?o("div",{ref:"header_"+i+"_left",refInFor:!0,staticClass:"header",on:{click:function(o){return e.selectItem(t)}}},[o("div",{staticClass:"header-name",class:e.item.children[i].is_required?"isrequired":""},[e._v("\n            "+e._s(e.item.children[i].name)+"\n          ")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&!e.item.is_must&&!e.item.children[i].is_must,expression:"\n              !disabled && !item.is_must && !item.children[index].is_must\n            "},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],staticClass:"iconBTn",on:{click:function(o){return e.deleteItem(t,i)}}},[o("el-icon",{staticClass:"el-icon-delete"})],1)]):o("div",{ref:"header_"+i+"_left",refInFor:!0,staticClass:"header",class:e.item.is_required?"required":""},[e._v("\n          "+e._s("标题")+"\n        ")]),e._v(" "),o("div",{staticClass:"main-body"},[o("form-item",{attrs:{item:t,form:e.form,draggable:"",disabled:"",inTable:"",active:e.active},on:{selectItem:e.selectItem}})],1)]):e._e()})),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:0===e.item.children.length,expression:"item.children.length === 0"}],staticClass:"emptyArea"},[o("div",{staticClass:"empty"},[o("span",[e._v("将控件拖拽到此处")])])])],2),e._v(" "),o("draggable",{class:"form-table-body "+e.rowList.length,attrs:{tag:"div",list:e.item.children,sort:!1,animation:340,group:{name:"componentsGroup",pull:!0,put:!0},disabled:e.disabled,dragClass:"dragName",ghostClass:"ghostName",handle:".handler"}},[e._l(e.rowList,(function(t,i){return"clinical_goal"!==e.item.component_type_code||t.custom.is_show?o("div",{key:"subItem "+i,staticClass:"form-table-item",style:t.style},[e.item.children[i]?o("div",{ref:"header_"+i+"_right",refInFor:!0,staticClass:"header",on:{click:function(o){return e.selectItem(t)}}},[o("div",{staticClass:"header-name",class:e.item.children[i].is_required?"isrequired":""},[e._v("\n            "+e._s(e.item.children[i].name)+"\n          ")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&!e.item.is_must&&!e.item.children[i].is_must,expression:"\n              !disabled && !item.is_must && !item.children[index].is_must\n            "},{name:"tooltip",rawName:"v-tooltip",value:e.$l("delete"),expression:"$l('delete')"}],staticClass:"iconBTn",on:{click:function(o){return e.deleteItem(t,i)}}},[o("el-icon",{staticClass:"el-icon-delete"})],1)]):o("div",{ref:"header_"+i+"_right",refInFor:!0,staticClass:"header",class:e.item.is_required?"isrequired":""},[e._v("\n          "+e._s("标题")+"\n        ")]),e._v(" "),o("div",{staticClass:"main-body"},[o("form-item",{attrs:{item:t,form:e.form,draggable:"",disabled:"",inTable:"",active:e.active},on:{selectItem:e.selectItem}})],1)]):e._e()})),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:0===e.item.children.length,expression:"item.children.length === 0"}],staticClass:"emptyArea"},[o("div",{staticClass:"empty"},[o("span",[e._v("将控件拖拽到此处")])])])],2)],1)])},H=[];function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function U(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function Q(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?U(Object(o),!0).forEach((function(t){J(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function J(e,t,o){return(t=Y(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Y(e){var t=K(e,"string");return"symbol"==W(t)?t:t+""}function K(e,t){if("object"!=W(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=W(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var X,Z={name:"formTable",data:function(){return{disabled:!1}},components:{draggable:l.a,FormItem:E},props:{item:{type:Object,default:function(){return{}}},active:{type:Object,default:function(){return{}}},form:{type:Array,default:function(){return[]}}},watch:{template_dialog:function(e){0==e&&(console.log("template_dialog change to refresh"),this.checkTableDisabled())},rowListStyle:{handler:function(){var e=this;this.$nextTick((function(){e.adjustHeaderHeights()}))},deep:!0,immediate:!0}},mounted:function(){this.checkTableDisabled()},computed:Q({isActive:function(){return this.item.code===this.active.code},rowList:function(){for(var e=[],t=0;t<this.item.children.length;t++)e.push(this.item.children[t]);return e},rowListStyle:function(){var e;return(null===(e=this.rowList)||void 0===e?void 0:e.map((function(e){return{style:e.style,name:e.name}})))||[]}},Object(a["b"])({template_dialog:"design/template_dialog"})),methods:{checkTableDisabled:function(){var e=this;this.item.code&&this.$request.post(m["a"].CHECK_SHEET_TEMPLATE_HAS_VALUE,{code:this.item.code}).then((function(t){1e4===t.code&&(e.disabled=t.data.has_value,e.item.is_freeze=t.data.has_value,e.item.children.forEach((function(e){e.is_freeze=t.data.has_value})))}))},getAllHeaderRefs:function(){for(var e=[],t=0;t<this.rowList.length;t++){var o=this.$refs["header_".concat(t,"_left")],i=this.$refs["header_".concat(t,"_right")];o&&o.length>0&&e.push(o[0]),i&&i.length>0&&e.push(i[0])}return e},adjustHeaderHeights:function(){var e=this;setTimeout((function(){var t=e.getAllHeaderRefs(),o=32;t.forEach((function(e){var t=e.querySelector(".header-name").offsetHeight;t>o&&(o=t)})),o>0&&t.forEach((function(e){e.style.height="".concat(o,"px")}))}),0)},selectItem:function(e){this.$emit("selectItem",e,"inTable")},selectTable:function(e){this.$emit("selectItem",e)},deleteItem:function(e,t){this.$emit("deleteItem",e)}}},ee=Z,te=(o("aa85"),Object(N["a"])(ee,G,H,!1,null,"73a3e4a1",null)),oe=te.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{key:e.form.code,staticClass:"right-panel"},[i("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.form.code,expression:"form.code"}],key:e.form.component_type_name,staticClass:"title",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:e.form.component_type_name,name:"first"}})],1),e._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.form.code&&"posed_photos"===e.form.component_type_code&&e.form.is_quote,expression:"\n      form.code &&\n      form.component_type_code === 'posed_photos' &&\n      form.is_quote\n    "}],staticClass:"form",attrs:{"label-position":"top","label-width":"90px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("el-form-item",{attrs:{label:""}},[e._t("label",[i("span",{staticClass:"label"},[e._v("标题")]),e._v(" "),i("span",{staticClass:"subLabel"},[e._v("(最多50字)")])]),e._v(" "),i("mt-input",{attrs:{maxlength:"50",placeholder:"请输入标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],2)],1),e._v(" "),e.form.code&&!e.form.is_quote?i("el-form",{staticClass:"form",attrs:{"label-position":"top","label-width":"90px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},["image"===e.form.component_type_code?i("el-form-item",{attrs:{label:"类型"}},[i("el-radio-group",{attrs:{value:e.form.custom.image_type},on:{input:e.changeImageType}},[i("el-radio",{attrs:{label:"built_in_image"}},[e._v("内置图片")]),e._v(" "),i("el-radio",{attrs:{label:"custom_image"}},[e._v("自定义上传")])],1)],1):e._e(),e._v(" "),"text"!==e.form.component_type_code&&"areaSelect"!==e.form.component_type_code&&"remoteCounter"!==e.form.component_type_code&&"blank"!==e.form.component_type_code&&"plan_check"!==e.form.component_type_code&&"QRCode"!==e.form.component_type_code&&"image"!==e.form.component_type_code&&"hospital_logo_name"!==e.form.component_type_code&&"scan_diagram"!==e.form.component_type_code&&"diagnose"!==e.form.component_type_code?i("el-form-item",{attrs:{label:""}},[e._t("label",[i("span",{staticClass:"label"},[e._v("标题")]),e._v(" "),i("span",{staticClass:"subLabel"},[e._v("(最多50字)")])]),e._v(" "),i("mt-input",{attrs:{maxlength:"50",placeholder:"请输入标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],2):e._e(),e._v(" "),"diagnose"===e.form.component_type_code?i("el-form-item",{attrs:{label:""}},[e._t("label",[i("span",{staticClass:"label"},[e._v("标题")]),e._v(" "),i("span",{staticClass:"subLabel"},[e._v("(最多50字)")])]),e._v(" "),"multi"===e.form.custom.displayType?i("div",{staticStyle:{display:"flex"}},[i("mt-input",{attrs:{maxlength:"25",placeholder:"请输入"},model:{value:e.form.custom.diagnosisTitle,callback:function(t){e.$set(e.form.custom,"diagnosisTitle",t)},expression:"form.custom.diagnosisTitle"}}),e._v(" "),i("mt-input",{staticStyle:{"margin-left":"8px"},attrs:{maxlength:"25",placeholder:"请输入"},model:{value:e.form.custom.stageTitle,callback:function(t){e.$set(e.form.custom,"stageTitle",t)},expression:"form.custom.stageTitle"}})],1):i("mt-input",{attrs:{maxlength:"50",placeholder:"请输入标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],2):e._e(),e._v(" "),"text"===e.form.component_type_code?i("el-form-item",{attrs:{label:""}},[e._t("label",[i("span",{staticClass:"label"},[e._v("文本内容")])]),e._v(" "),"text"===e.form.component_type_code?[i("div",{ref:"input",staticClass:"mt-input-formatter",attrs:{contenteditable:"",resizeable:"",placeholder:"请输入文本内容"},domProps:{innerHTML:e._s(e.sanitizedFormattedText)},on:{input:e.handleInput}})]:i("mt-input",{ref:"name",staticClass:"textarea",attrs:{value:e.formattedText,type:"textarea",autosize:{minRows:3,maxRows:18},maxlength:e.form.max_len,"show-word-limit":"",placeholder:"请输入文本内容"},on:{input:e.handleInput}})],2):e._e(),e._v(" "),e.canSetSubComponentLayout(e.form.component_type_code)?i("el-form-item",{attrs:{label:e.$l("container_layout")}},[i("el-checkbox",{model:{value:e.form.custom.enable_set_layout,callback:function(t){e.$set(e.form.custom,"enable_set_layout",t)},expression:"form.custom.enable_set_layout"}},[e._v(e._s(e.$l("enable_set_layout")))]),e._v(" "),i("el-radio-group",{attrs:{disabled:!e.form.custom.enable_set_layout},model:{value:e.form.custom.sub_component_layout,callback:function(t){e.$set(e.form.custom,"sub_component_layout",t)},expression:"form.custom.sub_component_layout"}},[i("el-radio",{attrs:{label:"vertical"}},[e._v(e._s(e.$l("vertical_layout")))]),e._v(" "),i("el-radio",{attrs:{label:"horizontal"}},[e._v(e._s(e.$l("horizontal_layout")))])],1)],1):e._e(),e._v(" "),"attachment"==e.form.component_type_code?i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"textInfo"},[i("div",[e._v("默认：")]),e._v(" "),i("div",[e._v("1、文件类型支持png、pdf、bmp、jpg")]),e._v(" "),i("div",[e._v("2、数量不限，总大小不超过50M")])])]):e._e(),e._v(" "),"areaSelect"==e.form.component_type_code?i("el-form-item",{attrs:{label:""}},[i("div",{staticClass:"textInfo"},[i("div",[e._v("暂不支持编辑该控件")])])]):e._e(),e._v(" "),"calculate"==e.form.component_type_code?i("el-form-item",{attrs:{label:"计算公式："}},[i("mt-button",{staticStyle:{padding:"0px",margin:"5px 0"},attrs:{type:"table"},on:{click:e.openCalculate}},[e._v("设置\n      ")])],1):e._e(),e._v(" "),e.showStyleItem?i("el-form-item",{attrs:{label:"样式："}},[i("mt-select",{attrs:{options:e.form.custom.range},on:{change:e.handleStyleItemChange},model:{value:e.showStyleItemValue,callback:function(t){e.showStyleItemValue=t},expression:"showStyleItemValue"}})],1):e._e(),e._v(" "),"text"===e.form.component_type_code||"container"===e.form.component_type_code||"form"===e.form.component_type_code||"column_table"===e.form.component_type_code||"clinical_goal"===e.form.component_type_code||"clinical_goal_actual"===e.form.component_type_code||"clinical_goal_achieve"===e.form.component_type_code||"list"===e.form.component_type_code||"clinical_list"===e.form.component_type_code||"areaSelect"===e.form.component_type_code||"blank"===e.form.component_type_code||"remoteCounter"===e.form.component_type_code||"treatForm"===e.form.component_type_code||"after_loading_execute"===e.form.component_type_code||"art_execute_info"===e.form.component_type_code||"plan_template"===e.form.component_type_code||"built_in_image"===e.form.component_type_code||"sickness_division_reference"===e.form.component_type_code||"QRCode"===e.form.component_type_code||"diagnose"===e.form.component_type_code||"quote"===e.form.component_type_code||"plan_connect"===e.form.component_type_code||"plan_check"===e.form.component_type_code||"execution_record"===e.form.component_type_code||"name_pinyin"===e.form.component_type_code||"surname_pinyin"===e.form.component_type_code||"radiotherapy_record"===e.form.component_type_code||"treat_table"===e.form.component_type_code||"hospital_logo_name"===e.form.component_type_code||"id_input"===e.form.component_type_code||"docGroup"===e.form.component_type_code||"phone"===e.form.code||"scan_diagram"===e.form.component_type_code||"patient_label"===e.form.component_type_code||"verify_results"===e.form.component_type_code||"order_opening"===e.form.component_type_code||e.isAfterLoadingClinicalGoals||e.isMoldManagement||"art_execute"===e.form.component_type_code||"plan_name"===e.form.code||"verify_results_file_name"===e.form.component_type_code?e._e():i("el-form-item",{attrs:{label:"校验"}},[i("el-checkbox",{model:{value:e.form.is_required,callback:function(t){e.$set(e.form,"is_required",t)},expression:"form.is_required"}},[e._v("设为必填")])],1),e._v(" "),"input"===e.form.component_type_code&&"name"===e.form.code?i("el-form-item",{attrs:{label:"样式"}},[i("mt-select",{attrs:{options:e.NameOptionsList},on:{change:e.handleNameChange},model:{value:e.form.custom.type,callback:function(t){e.$set(e.form.custom,"type",t)},expression:"form.custom.type"}})],1):e._e(),e._v(" "),"treatMachine"===e.form.component_type_code||"positionMachine"===e.form.component_type_code?i("el-form-item",{attrs:{label:"预约时间"}},[i("el-checkbox",{on:{change:e.handleApplyChange},model:{value:e.form.custom.is_open_apply_time,callback:function(t){e.$set(e.form.custom,"is_open_apply_time",t)},expression:"form.custom.is_open_apply_time"}},[e._v(e._s(e.$l("open")))])],1):e._e(),e._v(" "),"treatForm"==e.form.component_type_code?i("el-form-item",{attrs:{label:"校验"}},[i("el-checkbox",{model:{value:e.form.custom.doubleCheck,callback:function(t){e.$set(e.form.custom,"doubleCheck",t)},expression:"form.custom.doubleCheck"}},[e._v("二次校验")])],1):e._e(),e._v(" "),"textarea"===e.form.component_type_code||"his_input"===e.form.component_type_code||"id_input"===e.form.component_type_code||"input"===e.form.component_type_code&&"plan_name"!==e.form.code?i("el-form-item",{attrs:{label:"最小长度"}},[i("mt-input",{attrs:{type:"number",placeholder:"请输入最小长度"},on:{change:e.checkMaxLen},model:{value:e.form.min_len,callback:function(t){e.$set(e.form,"min_len",t)},expression:"form.min_len"}})],1):e._e(),e._v(" "),"his_input"===e.form.component_type_code||"id_input"===e.form.component_type_code||"surname_pinyin"===e.form.component_type_code||"name_pinyin"===e.form.component_type_code||"input"===e.form.component_type_code&&"plan_name"!==e.form.code?i("el-form-item",[e._t("label",[i("span",{staticClass:"label"},[e._v("最大长度")]),e._v(" "),i("span",{staticClass:"subLabel"},[e._v("(最多256)")])]),e._v(" "),i("mt-input-number",{attrs:{allowEmpty:"",max:256,placeholder:"请输入最大长度"},on:{change:e.checkMaxLen},model:{value:e.form.max_len,callback:function(t){e.$set(e.form,"max_len",t)},expression:"form.max_len"}})],2):e._e(),e._v(" "),"inputNumber"===e.form.component_type_code?i("el-form-item",{attrs:{label:"最小值"}},[i("mt-input",{attrs:{type:"number",placeholder:"请输入最小值"},on:{change:e.checkMaxLen},model:{value:e.form.min_len,callback:function(t){e.$set(e.form,"min_len",t)},expression:"form.min_len"}})],1):e._e(),e._v(" "),"inputNumber"===e.form.component_type_code?i("el-form-item",{attrs:{label:"最大值"}},[i("mt-input-number",{attrs:{allowEmpty:"",max:1e20,placeholder:"请输入最大值"},on:{change:e.checkMaxLen},model:{value:e.form.max_len,callback:function(t){e.$set(e.form,"max_len",t)},expression:"form.max_len"}})],1):e._e(),e._v(" "),"textarea"===e.form.component_type_code?i("el-form-item",[e._t("label",[i("span",{staticClass:"label"},[e._v("最大长度")]),e._v(" "),i("span",{staticClass:"subLabel"},[e._v("(最多9999)")])]),e._v(" "),i("mt-input-number",{attrs:{allowEmpty:"",max:9999,placeholder:"请输入最大长度"},on:{change:e.checkMaxLen},model:{value:e.form.max_len,callback:function(t){e.$set(e.form,"max_len",t)},expression:"form.max_len"}})],2):e._e(),e._v(" "),"inputNumber"===e.form.component_type_code||"calculate"===e.form.component_type_code?i("el-form-item",{attrs:{label:"精度限制"}},[i("mt-input-number",{attrs:{type:"number",allowEmpty:"","controls-position":"right",controls:"",min:0,placeholder:"请输入精度"},model:{value:e.form.custom.precision,callback:function(t){e.$set(e.form.custom,"precision",t)},expression:"form.custom.precision"}})],1):e._e(),e._v(" "),"inputNumber"===e.form.component_type_code?i("el-form-item",[i("div",{staticClass:"quick-select-header"},[i("span",{staticClass:"quick-select-header__title"},[e._v("快捷选项")]),i("mt-switch",{staticClass:"quick-select-header__switch",attrs:{value:e.form.custom.quick_select,activeText:" ",inactiveText:" "},on:{change:e.changeQuickSelect}})],1),e._v(" "),i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}},e._l(e.form.value_template,(function(t,n){return i("div",{key:"select"+n,staticClass:"selectList"},[i("mt-input",{staticClass:"quick-select-name",attrs:{maxLength:64},on:{change:function(o){return e.changeQuickSelectLabel(t.label,n)}},model:{value:t.label,callback:function(o){e.$set(t,"label",o)},expression:"item.label"}}),e._v(" "),i("mt-input-number",{staticClass:"quick-select-value",attrs:{precision:2,type:"number"},on:{change:function(o){return e.changeQuickSelectValue(t.value,n)}},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"item.value"}}),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"icon",attrs:{src:o("7598"),alt:"drag"}})]),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"el-icon-close icon",on:{click:function(t){return e.deleteOption(n,e.form)}}})],1)})),0),e._v(" "),i("el-button",{staticClass:"addBtn",attrs:{type:"text"},on:{click:e.addQuickSelectList}},[e._v("+ 添加")])],1):e._e(),e._v(" "),"text"==e.form.component_type_code?i("el-form-item",{attrs:{label:"长度限制"}},[i("mt-input-number",{on:{change:e.changeTextLength},model:{value:e.form.max_len,callback:function(t){e.$set(e.form,"max_len",t)},expression:"form.max_len"}})],1):e._e(),e._v(" "),"text"==e.form.component_type_code?i("el-form-item",{attrs:{label:"对齐方式"}},[i("mt-select",{attrs:{options:e.textAlignList},model:{value:e.form.style.textAlign,callback:function(t){e.$set(e.form.style,"textAlign",t)},expression:"form.style.textAlign"}})],1):e._e(),e._v(" "),"text"==e.form.component_type_code||e.isCustomizePrintFontSize?i("el-form-item",{attrs:{label:e.isCustomizePrintFontSize?e.$l("print_font_size"):"文本尺寸"}},[i("mt-select",{attrs:{options:e.fontSizeList,filterable:"",allowCreate:"",clearable:""},on:{change:e.changeFontSize},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}})],1):e._e(),e._v(" "),"text"==e.form.component_type_code?i("el-form-item",{attrs:{label:"文本格式"}},[i("div",{staticClass:"textEdit",on:{click:e.changeFontWeight}},[i("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("font_bold"),expression:"$l('font_bold')"}],staticClass:"textEdit-icon",class:e.fontBold?"textEdit-icon-active":"",attrs:{src:o("c919")}})]),e._v(" "),i("div",{staticClass:"textEdit",on:{click:e.changeFontitalic}},[i("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("font_italic"),expression:"$l('font_italic')"}],staticClass:"textEdit-icon",class:e.italic?"textEdit-icon-active":"",attrs:{src:o("8a4f")}})]),e._v(" "),i("div",{staticClass:"textEdit",on:{click:e.changeFontUnderline}},[i("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("font_underline"),expression:"$l('font_underline')"}],staticClass:"textEdit-icon",class:e.underline?"textEdit-icon-active":"",attrs:{src:o("9095")}})])]):e._e(),e._v(" "),"unit"==e.form.component_type_code?i("el-form-item",{attrs:{label:"排列方式"}},[i("mt-select",{attrs:{options:e.unitWidthOptions},model:{value:e.form.custom.width,callback:function(t){e.$set(e.form.custom,"width",t)},expression:"form.custom.width"}})],1):e._e(),e._v(" "),"radio"===e.form.component_type_code||"verify_device"===e.form.component_type_code?i("el-form-item",{attrs:{label:"多选"}},[i("el-checkbox",{on:{change:e.changeRadio},model:{value:e.form.custom.type,callback:function(t){e.$set(e.form.custom,"type",t)},expression:"form.custom.type"}},[e._v("是否多选")])],1):e._e(),e._v(" "),"radio"===e.form.component_type_code||"verify_device"===e.form.component_type_code?i("el-form-item",{attrs:{label:"选项排列方向"}},[i("el-checkbox",{model:{value:e.form.custom.direction,callback:function(t){e.$set(e.form.custom,"direction",t)},expression:"form.custom.direction"}},[e._v("竖向排列")])],1):e._e(),e._v(" "),"id_input"===e.form.component_type_code?i("el-form-item",{attrs:{label:"类型"}},[i("mt-button",{attrs:{type:"text"},on:{click:e.addIdList}},[e._v("新增")]),e._v(" "),i("div",{staticClass:"selectList"},[i("mt-input",{attrs:{value:"身份证",disabled:""}}),e._v(" "),i("div",{staticClass:"el-icon-close icon disableIcon"})],1),e._v(" "),e._l(e.form.custom.list,(function(t,o){return i("div",{key:"select"+o,staticClass:"selectList"},[i("mt-input",{model:{value:e.form.custom.list[o],callback:function(t){e.$set(e.form.custom.list,o,t)},expression:"form.custom.list[index]"}}),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"el-icon-close icon",on:{click:function(t){return e.form.custom.list.splice(o,1)}}})],1)}))],2):e._e(),e._v(" "),"visit_number"===e.form.code||"admission_number"===e.form.code||"id_number"===e.form.code||"patient_id"===e.form.code||"event_no"===e.form.code?i("el-form-item",{attrs:{label:"HIS功能"}},[i("div",{staticClass:"subLabel-treatForm"},[i("mt-switch",{model:{value:e.form.custom.HIS,callback:function(t){e.$set(e.form.custom,"HIS",t)},expression:"form.custom.HIS"}})],1)]):e._e(),e._v(" "),"diagnose"===e.form.component_type_code?i("el-form-item",{attrs:{label:"显示"}},[i("el-radio-group",{model:{value:e.form.custom.displayType,callback:function(t){e.$set(e.form.custom,"displayType",t)},expression:"form.custom.displayType"}},[i("el-radio",{attrs:{label:"default"}},[e._v(e._s(e.$l("single_line_display")))]),e._v(" "),i("el-radio",{attrs:{label:"multi"}},[e._v(e._s(e.$l("multi_line_display")))])],1)],1):e._e(),e._v(" "),"clinical_diagnosis"===e.form.component_type_code?i("el-form-item",{attrs:{label:"样式"}},[i("mt-select",{attrs:{disabled:"cascade_control"==e.form.custom.type&&e.form.value_template.length>0&&e.form.value_template[0].children.length>=0,options:e.diagnoseType},on:{change:e.changeDiagnoseType},model:{value:e.form.custom.type,callback:function(t){e.$set(e.form.custom,"type",t)},expression:"form.custom.type"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"cascade_control"==e.form.custom.type&&e.form.value_template.length>0&&e.form.value_template[0].children,expression:"\n          form.custom.type == 'cascade_control' &&\n          form.value_template.length > 0 &&\n          form.value_template[0].children\n        "}]},[i("span",[e._v("级联框已存在选项值，暂不支持切换")]),e._v(" "),i("br"),e._v(" "),i("span",{staticClass:"redInfo"},[e._v("删除级联选项将会影响患者已有诊断数据的显示")])])],1):e._e(),e._v(" "),"TNMComponent"===e.form.component_type_code?i("el-form-item",{attrs:{label:"选项"}},[i("el-tabs",{staticClass:"activeTNMCard",on:{"tab-click":e.changeTNMCard},model:{value:e.activeTNMCard,callback:function(t){e.activeTNMCard=t},expression:"activeTNMCard"}},[i("el-tab-pane",{attrs:{label:"T",name:"T"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"N",name:"N"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"M",name:"M"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"ABC",name:"ABC"}}),e._v(" "),i("el-tab-pane",{attrs:{label:"CNLC",name:"CNLC"}})],1),e._v(" "),i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},model:{value:e.form.custom[e.activeTNMCard],callback:function(t){e.$set(e.form.custom,e.activeTNMCard,t)},expression:"form.custom[activeTNMCard]"}},e._l(e.form.custom[e.activeTNMCard],(function(t,n){return i("div",{key:"select"+n,staticClass:"selectList"},[i("mt-input",{model:{value:e.form.custom[e.activeTNMCard][n].value,callback:function(t){e.$set(e.form.custom[e.activeTNMCard][n],"value",t)},expression:"form.custom[activeTNMCard][index].value"}}),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"icon",attrs:{src:o("7598"),alt:"drag"}})]),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"el-icon-close icon",on:{click:function(t){return e.form.custom[e.activeTNMCard].splice(n,1)}}})],1)})),0),e._v(" "),i("mt-button",{staticClass:"addBtn",attrs:{type:"text"},on:{click:function(t){return e.form.custom[e.activeTNMCard].push({value:"",label:""})}}},[e._v("+ 添加")])],1):e._e(),e._v(" "),"select"===e.form.component_type_code||"selectMutiple"===e.form.component_type_code||"radio"===e.form.component_type_code||"sickness_division"===e.form.component_type_code||"breast_surgery_method"===e.form.component_type_code||"clinical_goal_select"===e.form.component_type_code||"clinical_diagnosis"===e.form.component_type_code&&"select"==e.form.custom.type||"unit"===e.form.component_type_code||e.isAfterLoadingClinicalGoalsChild||e.isMoldManagement||"verify_results_compare_standard"===e.form.component_type_code?i("el-form-item",{attrs:{label:e.isMoldManagement?e.$l("mold_type_option"):e.$l("option")}},[i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}},e._l(e.form.value_template,(function(t,n){return i("div",{key:"select"+n,staticClass:"selectList"},[i("mt-input",{attrs:{disabled:e.disabledSetOptions},on:{focus:function(o){return e.focusOptionValue(t.value,n)},blur:function(o){return e.blurOptionValue(t.value,n)},change:function(o){return e.changeOptionValue(t.value,n)}},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"item.value"}}),e._v(" "),e.disabledSetOptions?e._e():[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"icon",attrs:{src:o("7598"),alt:"drag"}})]),e._v(" "),"breast_surgery_method"!==e.form.component_type_code||"breast_surgery_method"===e.form.component_type_code&&n>1?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"el-icon-close icon",on:{click:function(t){return e.deleteOption(n,e.form)}}}):e._e()]],2)})),0),e._v(" "),e.disabledSetOptions?e._e():i("el-button",{staticClass:"addBtn",attrs:{type:"text"},on:{click:e.addSelectList}},[e._v("+ 添加")]),e._v(" "),e.allowSetRelatedVisible?i("related-visible-settings",{staticStyle:{"margin-left":"16px"},attrs:{current:e.form,formList:e.formList}}):e._e()],1):e._e(),e._v(" "),"option_association"===e.form.component_type_code?i("el-form-item",{attrs:{label:"选项"}},[i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}},e._l(e.form.value_template,(function(t,n){return i("div",{key:"select"+n,staticClass:"selectList"},[i("div",{staticClass:"selectList_left"},[i("mt-input",{staticStyle:{height:"auto"},attrs:{placeholder:"请输入"},model:{value:t.option,callback:function(o){e.$set(t,"option",o)},expression:"item.option"}}),e._v(" "),i("div",{staticClass:"selectList_left--footer"},[i("div",{staticClass:"mt-select-box"},[i("el-select",{staticClass:"frequency-select",attrs:{placeholder:"请选择",clearable:""},on:{change:function(o){return e.handleOptionChange(o,t,n)}},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"item.value"}},[e._l(e.optionAssociaitonList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("el-option",{key:"1",attrs:{value:"1",label:e.$l("skip_n_nodes",{n:t.inputNumber})}},[i("i18n",{attrs:{path:"skip_n_nodes"},scopedSlots:e._u([{key:"n",fn:function(){return[i("div",{staticClass:"frequency-input",on:{click:function(e){e.stopPropagation()}}},[i("mt-input-number",{staticStyle:{display:"inline-block"},attrs:{type:"int",precision:0,max:20},on:{change:e.handleNodeNumberChange,click:function(e){e.preventDefault(),e.stopPropagation()}},model:{value:t.inputNumber,callback:function(o){e.$set(t,"inputNumber",o)},expression:"item.inputNumber"}})],1)]},proxy:!0}],null,!0)})],1)],2)],1)])],1),e._v(" "),i("div",{staticClass:"selectList_right"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"icon",attrs:{src:o("7598"),alt:"drag"}})]),e._v(" "),"breast_surgery_method"!==e.form.component_type_code||"breast_surgery_method"===e.form.component_type_code&&n>1?i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"el-icon-close icon",on:{click:function(t){return e.deleteAssociaitonOption(n,e.form)}}}):e._e()])])})),0),e._v(" "),i("el-button",{staticClass:"addBtn",attrs:{type:"text"},on:{click:e.addOptionSelectList}},[e._v("+ 添加")])],1):e._e(),e._v(" "),"cascade_control"===e.form.component_type_code||"clinical_diagnosis"===e.form.component_type_code&&"cascade_control"==e.form.custom.type||"treatment_area"===e.form.component_type_code?i("el-form-item",{attrs:{label:"选项："}},[i("el-button",{staticClass:"cascader-edit-btn",attrs:{type:"text"},on:{click:e.editCascaderList}},[e._v("编辑")])],1):e._e(),e._v(" "),"cascade_control"===e.form.component_type_code?i("el-form-item",{attrs:{label:"多选："}},[i("el-checkbox",{model:{value:e.form.custom.is_multiple,callback:function(t){e.$set(e.form.custom,"is_multiple",t)},expression:"form.custom.is_multiple"}},[e._v("支持多选")])],1):e._e(),e._v(" "),"treatFrequency"===e.form.component_type_code?i("el-form-item",[e._t("label",[i("span",{staticClass:"label"},[e._v("单位选项")]),e._v(" "),i("span",{staticClass:"subLabel"},[e._v("(请输入正整数)")])]),e._v(" "),i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}},e._l(e.form.value_template,(function(t,n){return i("div",{key:"select"+n,staticClass:"selectList"},[i("span",{staticClass:"selectList-text"},[e._v("每")]),e._v(" "),i("div",{staticClass:"selectList-input",class:{error:!t.value}},[i("mt-input",{attrs:{precision:0,min:1,placeholder:"请输入",max:50,type:"number",onkeyup:"this.value=this.value.toString().replace(/[^\\d]{0,2}/g, '');if(this.value>50)this.value=50;if(this.value<1)this.value=null"},on:{input:function(o){return e.inputVaildateValue(o,t)},change:function(o){return e.changeOptionValue(t,n)}},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"item.value"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.value,expression:"!item.value"}],staticClass:"error"},[e._v("请输入正整数")])],1),e._v(" "),i("span",{staticClass:"selectList-text"},[e._v("天")]),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"icon",attrs:{src:o("7598"),alt:"drag"}})]),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"deleteBtn icon",on:{click:function(t){return e.deleteOption(n,e.form)}}},[i("el-icon",{staticClass:"el-icon-close"})],1)])})),0),e._v(" "),i("el-button",{staticClass:"addBtn",attrs:{type:"text"},on:{click:e.addFrequencySelectList}},[e._v("+ 添加")])],2):e._e(),e._v(" "),"treatForm"===e.form.component_type_code?i("el-form-item",{attrs:{label:"列项"}},[i("mt-select",{staticStyle:{"margin-bottom":"10px"},attrs:{isSelectAll:!1,multiple:"",valueKey:"code",options:e.treatFormList},on:{change:e.changeTreatFormList},model:{value:e.form.custom.label,callback:function(t){e.$set(e.form.custom,"label",t)},expression:"form.custom.label"}}),e._v(" "),i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},on:{end:e.changeTreatFormColumnOrder},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}},e._l(e.form.value_template,(function(t,o){return i("div",{key:"select"+o,class:["treatFromList","extra_remarks"===t.code?"is-small-height":""]},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("el-icon",{staticClass:"el-icon-more"}),e._v(" "),i("el-icon",{staticClass:"el-icon-more"})],1),e._v(" "),i("div",{staticClass:"treatFromList-top"},[i("mt-input",{model:{value:t.label,callback:function(o){e.$set(t,"label",o)},expression:"item.label"}})],1),e._v(" "),i("div",{staticClass:"treatFromList-middle"},[i("mt-input-number",{staticClass:"input",staticStyle:{width:"80px"},model:{value:t.width,callback:function(o){e.$set(t,"width",o)},expression:"item.width"}}),e._v(" "),i("div",{staticClass:"sub"},[e._v("px")])],1),e._v(" "),"extra_remarks"!==t.code?i("div",{staticClass:"treatFromList-bottom"},[i("el-checkbox",{attrs:{disabled:"apply_at"==t.code||"total_dose"==t.code||"position_label"==t.code||"plan_name"==t.code},model:{value:t.edit,callback:function(o){e.$set(t,"edit",o)},expression:"item.edit"}},[e._v("允许编辑")]),e._v(" "),i("el-checkbox",{key:t.code+o,model:{value:t.must,callback:function(o){e.$set(t,"must",o)},expression:"item.must"}},[e._v("必填")])],1):e._e(),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"deleteBtn icon",on:{click:function(t){return e.deleteOption(o,e.form)}}},[i("el-icon",{staticClass:"el-icon-error"})],1)])})),0)],1):e._e(),e._v(" "),e.showDefaultValue?["plan_name"!==e.form.code?i("el-form-item",{key:e.form.component_type_code+e.form.code,attrs:{label:e.$l("default_value")}},["input"===e.form.component_type_code||"textarea"===e.form.component_type_code||"approvalRemark"===e.form.component_type_code?i("mt-input",{attrs:{clearable:""},on:{change:e.changeDefaultValue},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}):"selectMutiple"===e.form.component_type_code||"radio"===e.form.component_type_code&&e.form.custom.type?i("mt-select",{attrs:{multiple:"",autoSelect:!1,clearable:"",options:e.form.value_template},on:{change:e.changeDefaultValue},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}):"inputNumber"===e.form.component_type_code?i("mt-input-number",{attrs:{min:0,allowEmpty:"",clearable:""},on:{change:e.changeDefaultValue},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}):"treatFrequency"===e.form.component_type_code?i("mt-input-number",{attrs:{min:1,max:2,allowEmpty:"",clearable:""},on:{change:e.changeDefaultValue},model:{value:e.form.value.value,callback:function(t){e.$set(e.form.value,"value",t)},expression:"form.value.value"}}):"unit"===e.form.component_type_code?i("mt-input",{attrs:{clearable:""},on:{change:e.changeDefaultValue},model:{value:e.form.value.value,callback:function(t){e.$set(e.form.value,"value",t)},expression:"form.value.value"}}):i("mt-select",{attrs:{clearable:"",options:e.singleSelectOptions},on:{change:e.changeDefaultValue},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1):e._e(),e._v(" "),"treatFrequency"===e.form.component_type_code?i("el-form-item",{attrs:{label:e.$l("month_default_value")}},[i("mt-select",{attrs:{multiple:"",autoSelect:!1,clearable:"",options:e.monthValueSelectOptions},model:{value:e.form.custom.monthValue,callback:function(t){e.$set(e.form.custom,"monthValue",t)},expression:"form.custom.monthValue"}})],1):e._e(),e._v(" "),"plan_name"!==e.form.code&&"time"!==e.form.code?i("el-form-item",{attrs:{label:e.$l("value_info_style")}},[i("el-radio-group",{on:{input:e.handleValueStyleChange},model:{value:e.form.custom.valueStyle,callback:function(t){e.$set(e.form.custom,"valueStyle",t)},expression:"form.custom.valueStyle"}},[i("el-radio",{attrs:{label:"default"}},[e._v(e._s(e.$l("default")))]),e._v(" "),i("br"),e._v(" "),i("el-radio",{attrs:{label:"highlightValueAlways"}},[e._v(e._s(e.$l("highlight_value_always")))]),e._v(" "),i("br"),e._v(" "),i("el-radio",{attrs:{label:"highlightOnNonDefault"}},[e._v(e._s(e.$l("highlight_value_on_non_efault")))])],1)],1):e._e()]:e._e(),e._v(" "),["select","selectMutiple"].includes(e.form.component_type_code)?i("el-form-item",{attrs:{label:"是否多选"}},[i("el-switch",{attrs:{value:"selectMutiple"===e.form.component_type_code},on:{change:e.onChangeSelectMultiple}})],1):e._e(),e._v(" "),"treatForm"===e.form.component_type_code?i("el-form-item",{attrs:{label:"打印"}},[i("el-checkbox",{model:{value:e.form.custom.is_print,callback:function(t){e.$set(e.form.custom,"is_print",t)},expression:"form.custom.is_print"}},[e._v("参与打印")]),e._v(" "),i("el-checkbox",{attrs:{disabled:!e.form.custom.is_print},model:{value:e.form.custom.is_page_break,callback:function(t){e.$set(e.form.custom,"is_page_break",t)},expression:"form.custom.is_page_break"}},[e._v("跨页打印")])],1):e._e(),e._v(" "),"treatForm"===e.form.component_type_code?i("el-form-item",{attrs:{label:"导出"}},[i("el-checkbox",{model:{value:e.form.custom.is_excel,callback:function(t){e.$set(e.form.custom,"is_excel",t)},expression:"form.custom.is_excel"}},[e._v("导出Excel")])],1):e._e(),e._v(" "),"form"===e.form.component_type_code||"column_table"===e.form.component_type_code||"clinical_goal"===e.form.component_type_code?i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.is_enable&&!e.form.is_freeze,expression:"!form.is_enable && !form.is_freeze"}],attrs:{label:"clinical_goal"===e.form.component_type_code?"列项":"列项顺序"}},[i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable",move:e.moveFormTitle},model:{value:e.form.children,callback:function(t){e.$set(e.form,"children",t)},expression:"form.children"}},["clinical_goal"===e.form.component_type_code?e._l(e.form.children,(function(t,n){return i("div",{key:"form"+n,staticClass:"selectList clinicalGoalSelectList"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"drag-icon",attrs:{src:o("2ad3")}})]),e._v(" "),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.form.is_quote,expression:"!form.is_quote"}],attrs:{disabled:!e.isClinicalGoalFixedColumn(t.component_type_code)},model:{value:t.custom.is_show,callback:function(o){e.$set(t.custom,"is_show",o)},expression:"item.custom.is_show"}},[i("span",{staticClass:"select-item"},[e._v(e._s(t.name))])])],1)})):e._l(e.form.children,(function(t,n){return i("div",{key:"form"+n,staticClass:"selectList"},[i("mt-input",{attrs:{disabled:""},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}}),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("img",{staticClass:"icon",attrs:{src:o("7598"),alt:"drag"}})])],1)}))],2)],1):e._e(),e._v(" "),"clinical_goal"===e.form.component_type_code?i("el-form-item",{staticClass:"item",attrs:{label:"选择计划"}},[i("mt-switch",{staticClass:"select_plan_switch",attrs:{activeText:"开",inactiveText:"关"},model:{value:e.form.custom.select_plan,callback:function(t){e.$set(e.form.custom,"select_plan",t)},expression:"form.custom.select_plan"}})],1):e._e(),e._v(" "),"datePicker"===e.form.component_type_code?i("el-form-item",{attrs:{label:"类型"}},[i("mt-select",{attrs:{options:e.dateTypeList},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}})],1):e._e(),e._v(" "),"list"===e.form.component_type_code?i("el-form-item",{attrs:{label:"增加按钮名称"}},[i("mt-input",{model:{value:e.form.custom.addBtn,callback:function(t){e.$set(e.form.custom,"addBtn",t)},expression:"form.custom.addBtn"}})],1):e._e(),e._v(" "),"list"===e.form.component_type_code?i("el-form-item",{attrs:{label:"删除按钮名称"}},[i("mt-input",{model:{value:e.form.custom.delBtn,callback:function(t){e.$set(e.form.custom,"delBtn",t)},expression:"form.custom.delBtn"}})],1):e._e(),e._v(" "),!e.isDataTemplateTypeTable&&"textarea"!==e.form.component_type_code||e.form.association_code?e._e():i("el-form-item",{attrs:{label:"数据模板"}},[i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.form.is_quote,expression:"!form.is_quote"}],model:{value:e.form.is_enable,callback:function(t){e.$set(e.form,"is_enable",t)},expression:"form.is_enable"}},[e._v("启用")]),e._v(" "),i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.form.is_enable,expression:"form.is_enable"}],attrs:{type:"text"},on:{click:e.setTemplate}},[e._v("设置模板")])],1)],1),e._v(" "),"textarea"===e.form.component_type_code?i("el-form-item",{attrs:{label:"引用检查检验"}},[i("el-checkbox",{model:{value:e.form.custom.check,callback:function(t){e.$set(e.form.custom,"check",t)},expression:"form.custom.check"}},[e._v("启用")])],1):e._e(),e._v(" "),"remoteCounter"==e.form.component_type_code?i("el-form-item",{attrs:{label:"远程系统"}},[i("el-checkbox-group",{staticClass:"remoteList",on:{change:e.changeRemote},model:{value:e.remoteComs,callback:function(t){e.remoteComs=t},expression:"remoteComs"}},e._l(e.remoteList,(function(t,o){return i("div",{key:o},[i("el-checkbox",{staticClass:"remoteList-item",attrs:{label:t.device_id}},[e._v("\n            "+e._s(t.name)+"\n          ")])],1)})),0)],1):e._e(),e._v(" "),"image"==e.form.component_type_code&&"built_in_image"===e.form.custom.image_type?i("el-form-item",[i("el-upload",{staticClass:"upload-demo",attrs:{action:"","show-file-list":!1,accept:".jpg,.jpeg,.png,.bmp","auto-upload":!1,"on-change":e.changeFile,"before-upload":e.uploadImage,"file-list":e.imageList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传图片")])],1),e._v(" "),i("div",{staticClass:"subLabel"},[e._v("\n        1、文件类型支持png、bmp、jpg、jpeg\n        "),i("br"),e._v("\n        2、数量仅支持上传一张，图片总大小不超过50M\n      ")])],1):e._e(),e._v(" "),"QRCode"==e.form.component_type_code&&e.deptInfoList.length>0?i("el-form-item",{attrs:{label:"码数据"}},e._l(e.deptInfoList,(function(t,o){return i("div",{key:o,staticClass:"deptInfo"},[e._v("\n        "+e._s(t.dept_name+" - "+e.$l(t.qrcode))+"\n      ")])})),0):e._e(),e._v(" "),"image"==e.form.component_type_code&&"built_in_image"===e.form.custom.image_type||"QRCode"==e.form.component_type_code||"scan_diagram"===e.form.component_type_code?i("el-form-item",{attrs:{label:"对齐方式"}},[i("mt-select",{attrs:{options:e.imagePosition},model:{value:e.form.custom.position,callback:function(t){e.$set(e.form.custom,"position",t)},expression:"form.custom.position"}})],1):e._e(),e._v(" "),"image"==e.form.component_type_code&&"built_in_image"===e.form.custom.image_type||"QRCode"==e.form.component_type_code||"scan_diagram"===e.form.component_type_code?i("el-form-item",{attrs:{label:"图片比例"}},[i("div",{staticClass:"slider"},[i("el-slider",{staticClass:"slider-left",attrs:{min:1,max:100},on:{change:e.changeImageWidth},model:{value:e.imageWidth,callback:function(t){e.imageWidth=t},expression:"imageWidth"}}),e._v(" "),i("div",{staticClass:"slider-right"},[i("mt-input-number",{staticStyle:{width:"70%"},attrs:{min:1,max:100,precision:0},on:{change:e.changeImageWidth},model:{value:e.imageWidth,callback:function(t){e.imageWidth=t},expression:"imageWidth"}}),e._v(" "),i("span",[e._v("%")])],1)],1)]):e._e(),e._v(" "),"scan_diagram"===e.form.component_type_code?i("el-form-item",{attrs:{label:e.$l("marker_line")}},[i("draggable",{staticClass:"select-dargger",attrs:{group:{name:"selectDrag",pull:!1,put:!1},dragClass:"dragName",ghostClass:"ghostName",handle:".draggable"},model:{value:e.form.value_template,callback:function(t){e.$set(e.form,"value_template",t)},expression:"form.value_template"}},e._l(e.form.value_template,(function(t,o){return i("div",{key:t.id,staticClass:"treatFromList is-small-height"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("drag_sort"),expression:"$l('drag_sort')"}],staticClass:"draggable"},[i("el-icon",{staticClass:"el-icon-more"}),e._v(" "),i("el-icon",{staticClass:"el-icon-more"})],1),e._v(" "),i("div",{staticClass:"treatFromList-top"},[i("mt-input",{staticClass:"input-adjust",attrs:{maxlength:15,"show-word-limit":""},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1),e._v(" "),i("div",{staticClass:"treatFromList-middle line-position"},[i("mt-input-number",{staticStyle:{width:"120px"},attrs:{type:"number",allowEmpty:"","controls-position":"right",controls:"",min:0,max:460},model:{value:t.position,callback:function(o){e.$set(t,"position",o)},expression:"item.position"}}),e._v(" "),i("div",{staticClass:"sub"},[e._v("px")])],1),e._v(" "),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$l("remove"),expression:"$l('remove')"}],staticClass:"deleteBtn icon",on:{click:function(t){return e.handleDelMarkLine(o)}}},[i("el-icon",{staticClass:"el-icon-error"})],1)])})),0),e._v(" "),i("el-button",{staticClass:"addBtn",attrs:{type:"text"},on:{click:e.handleAddMarkLine}},[e._v("+ 添加")])],1):e._e(),e._v(" "),"container"===e.form.component_type_code||"form"===e.form.component_type_code||"column_table"===e.form.component_type_code||"clinical_goal"===e.form.component_type_code||"list"===e.form.component_type_code||"clinical_list"===e.form.component_type_code||"inTable"===e.form.status||"attachment"===e.form.component_type_code||"treat_table"===e.form.component_type_code||"remoteCounter"===e.form.component_type_code||"plan_template"===e.form.component_type_code||"quote"===e.form.component_type_code||"plan_connect"===e.form.component_type_code||"treatForm"===e.form.component_type_code||"plan_check"===e.form.component_type_code||"radiotherapy_record"===e.form.component_type_code||"execution_record"===e.form.component_type_code||!e.form.custom||"after_loading_execute"===e.form.component_type_code||"art_execute_info"===e.form.component_type_code||"posed_photos"===e.form.component_type_code||"verify_results"===e.form.component_type_code||"order_opening"===e.form.component_type_code||e.isAfterLoadingClinicalGoals||e.isMoldManagement||"art_execute"===e.form.component_type_code||e.form.component_type_code.includes("verify_results_")?e._e():i("el-form-item",{attrs:{label:"宽度"}},[i("div",{staticClass:"width"},[i("el-slider",{attrs:{step:1,min:1,max:24,marks:e.marks},model:{value:e.form.span,callback:function(t){e.$set(e.form,"span",t)},expression:"form.span"}}),e._v(" "),i("mt-input-number",{staticStyle:{width:"35%",float:"right"},model:{value:e.form.span,callback:function(t){e.$set(e.form,"span",t)},expression:"form.span"}})],1)]),e._v(" "),"image"===e.form.component_type_code&&"custom_image"===e.form.custom.image_type?i("el-form-item",{attrs:{label:"高度"}},[i("div",{staticClass:"width"},[i("el-slider",{attrs:{step:1,min:1,max:24,marks:e.heightMarks},model:{value:e.form.custom.column,callback:function(t){e.$set(e.form.custom,"column",t)},expression:"form.custom.column"}}),e._v(" "),i("mt-input-number",{staticStyle:{width:"35%",float:"right"},model:{value:e.form.custom.column,callback:function(t){e.$set(e.form.custom,"column",t)},expression:"form.custom.column"}})],1)]):e._e(),e._v(" "),"inTable"!==e.form.status&&"treat_table"!=e.form.component_type_code||"clinical_goal_achieve"===e.form.component_type_code?e._e():i("el-form-item",{attrs:{label:"宽度"}},[i("el-input",{attrs:{type:"number"},on:{blur:e.changeWidthPx},model:{value:e.widthPx,callback:function(t){e.widthPx=t},expression:"widthPx"}},[i("template",{slot:"append"},[e._v("px")])],2)],1),e._v(" "),"blank"===e.form.component_type_code?i("el-form-item",{attrs:{label:"高度"}},[i("div",{staticClass:"number-with-unit"},[i("mt-input",{attrs:{type:"number",min:0},model:{value:e.form.custom.height,callback:function(t){e.$set(e.form.custom,"height",t)},expression:"form.custom.height"}}),e._v(" "),i("div",{staticClass:"sub"},[e._v("px")])],1)]):e._e(),e._v(" "),e.canSetHiddenContent(e.form.component_type_code)&&!e.form.association_code?i("el-form-item",{attrs:{label:"隐藏内容"}},[e.isPlanConnect(e.form.component_type_code)?i("div",[e._l(e.planConnectFields,(function(t){return[i("div",{key:t.code,staticClass:"plan-info"},[i("div",{staticClass:"plan-info__name"},[e._v(e._s(t.name))]),e._v(" "),i("el-checkbox-group",{staticClass:"hiddenLabel",model:{value:e.form.custom[t.code],callback:function(o){e.$set(e.form.custom,t.code,o)},expression:"form.custom[list.code]"}},[e._l(t.columns,(function(o){return[o.followHidden?e._e():i("el-checkbox",{key:o.code,attrs:{label:o.code},on:{change:function(i){return e.handlePlanConnectFieldHiddenChange(i,o,t)}}},[e._v("\n                  "+e._s(o.name)+"\n                ")])]}))],2)],1)]}))],2):"verify_results"===e.form.component_type_code?i("div",[i("el-checkbox-group",{staticClass:"hiddenLabel",model:{value:e.form.custom.hidden,callback:function(t){e.$set(e.form.custom,"hidden",t)},expression:"form.custom.hidden"}},e._l(e.verifyResultColumns,(function(t){return i("el-checkbox",{key:t.code,attrs:{label:t.code}},[e._v("\n            "+e._s(e.$l(t.name))+"\n          ")])})),1)],1):e._l(e.form.children,(function(t,o){return i("div",{key:o,staticClass:"hiddenLabel"},[e.isChildItemShow(t)?i("el-checkbox",{on:{change:function(o){return e.changeFreeze(t)}},model:{value:t.is_freeze,callback:function(o){e.$set(t,"is_freeze",o)},expression:"child.is_freeze"}},[i("div",{staticClass:"hiddenLabel-name"},[e._v("\n              "+e._s(t.name)+"\n            ")])]):e._e()],1)}))],2):e._e(),e._v(" "),"input"==e.form.component_type_code&&"plan_name"!==e.form.code||"his_input"==e.form.component_type_code?i("el-form-item",{attrs:{label:"备注"}},[i("div",[i("mt-input",{staticClass:"textarea",attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},maxlength:256,"show-word-limit":"",placeholder:"请输入备注信息"},model:{value:e.form.custom.remarks,callback:function(t){e.$set(e.form.custom,"remarks",t)},expression:"form.custom.remarks"}})],1)]):e._e(),e._v(" "),e.isAllowHidden?i("el-form-item",{attrs:{label:e.$l("is_visible")}},[i("el-checkbox",{model:{value:e.form.custom.visible,callback:function(t){e.$set(e.form.custom,"visible",t)},expression:"form.custom.visible"}},[e._v(e._s(e.$l("show")))])],1):e._e(),e._v(" "),"sign"==e.form.component_type_code?i("el-form-item",{attrs:{label:"校验"}},[i("el-radio",{attrs:{label:!0},on:{change:function(t){return e.changeImport("login")}},model:{value:e.form.custom.is_logged_user,callback:function(t){e.$set(e.form.custom,"is_logged_user",t)},expression:"form.custom.is_logged_user"}},[e._v("登录用户")]),e._v(" "),i("br"),e._v(" "),i("el-radio",{attrs:{label:!1},on:{change:function(t){return e.changeImport("switch")}},model:{value:e.form.custom.is_logged_user,callback:function(t){e.$set(e.form.custom,"is_logged_user",t)},expression:"form.custom.is_logged_user"}},[e._v("切换用户")]),e._v(" "),i("br"),e._v(" "),i("el-radio",{attrs:{label:!0},on:{change:function(t){return e.changeImport("import")}},model:{value:e.form.custom.is_doctor_user,callback:function(t){e.$set(e.form.custom,"is_doctor_user",t)},expression:"form.custom.is_doctor_user"}},[e._v("导入主管医生签名 + 签名时间")]),e._v(" "),i("el-radio",{attrs:{label:!0},on:{change:function(t){return e.changeImport("import_doctor_user_without_time")}},model:{value:e.form.custom.is_doctor_user_without_time,callback:function(t){e.$set(e.form.custom,"is_doctor_user_without_time",t)},expression:"form.custom.is_doctor_user_without_time"}},[e._v("导入主管医生签名")]),e._v(" "),i("el-radio",{attrs:{label:!0},on:{change:function(t){return e.changeImport("import_physicist_user_without_time")}},model:{value:e.form.custom.is_physicist_user_without_time,callback:function(t){e.$set(e.form.custom,"is_physicist_user_without_time",t)},expression:"form.custom.is_physicist_user_without_time"}},[e._v("导入计划物理师签名")]),e._v(" "),i("el-radio",{attrs:{label:!0},on:{change:function(t){return e.changeImport("import_positiontech_user_without_time")}},model:{value:e.form.custom.is_positiontech_user_without_time,callback:function(t){e.$set(e.form.custom,"is_positiontech_user_without_time",t)},expression:"form.custom.is_positiontech_user_without_time"}},[e._v("导入定位技师签名")])],1):e._e(),e._v(" "),"calculate"===e.form.component_type_code||"treatForm"===e.form.component_type_code||"after_loading_execute"===e.form.component_type_code||"art_execute_info"===e.form.component_type_code||"treat_info"===e.form.component_type_code||"quote"===e.form.component_type_code||"sign"===e.form.component_type_code||"treat_table"===e.form.component_type_code||"execution_record"===e.form.component_type_code||"plan_check"===e.form.component_type_code||"blank"===e.form.component_type_code||"patient_label"===e.form.component_type_code||"order_opening"===e.form.component_type_code||"art_execute"===e.form.component_type_code||"dateTimePicker"===e.form.component_type_code||e.isAfterLoadingClinicalGoals||e.isAfterLoadingClinicalGoalsChild||e.form.association_code||"plan_name"===e.form.code||e.form.component_type_code.includes("verify_results_")?e._e():i("el-form-item",{staticClass:"item",attrs:{label:"关联信息"}},[i("mt-button",{attrs:{type:"table"},on:{click:e.checkQuote}},[e._v("查看")])],1)],2):e._e(),e._v(" "),e.form.code&&e.form.association_code?i("el-form",{staticClass:"form",attrs:{"label-position":"top","label-width":"90px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[e.isCustomizePrintFontSize&&e.form.is_quote?i("el-form-item",{attrs:{label:e.$l("print_font_size")}},[i("mt-select",{attrs:{options:e.fontSizeList,filterable:"",allowCreate:"",clearable:""},on:{change:e.changeFontSize},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}})],1):e._e(),e._v(" "),e.form.is_quote&&e.allowSetRelatedVisible?i("el-form-item",{attrs:{label:e.$l("option")}},[i("related-visible-settings",{attrs:{current:e.form,formList:e.formList}})],1):e._e(),e._v(" "),"container"===e.form.component_type_code||"text"===e.form.component_type_code||"form"===e.form.component_type_code||"column_table"===e.form.component_type_code||"clinical_goal"===e.form.component_type_code||"list"===e.form.component_type_code||"inTable"===e.form.status||"attachment"===e.form.component_type_code||"treat_table"===e.form.component_type_code||"remoteCounter"===e.form.component_type_code||"plan_connect"===e.form.component_type_code||"plan_template"===e.form.component_type_code||"radiotherapy_record"===e.form.component_type_code||"treatForm"===e.form.component_type_code||"posed_photos"===e.form.component_type_code||"verify_results"===e.form.component_type_code||"art_execute"===e.form.component_type_code||"art_execute_info"===e.form.component_type_code||e.isAfterLoadingClinicalGoals||e.isMoldManagement||!e.form.is_quote?e._e():i("el-form-item",{attrs:{label:"宽度"}},[i("div",{staticClass:"width"},[i("el-slider",{attrs:{step:1,min:1,max:24,marks:e.marks},model:{value:e.form.span,callback:function(t){e.$set(e.form,"span",t)},expression:"form.span"}}),e._v(" "),i("mt-input-number",{staticStyle:{width:"35%",float:"right"},model:{value:e.form.span,callback:function(t){e.$set(e.form,"span",t)},expression:"form.span"}})],1)]),e._v(" "),"image"===e.form.component_type_code&&"custom_image"===e.form.custom.image_type&&e.form.is_quote?i("el-form-item",{attrs:{label:"高度"}},[i("div",{staticClass:"width"},[i("el-slider",{attrs:{step:1,min:1,max:24,marks:e.heightMarks},model:{value:e.form.custom.column,callback:function(t){e.$set(e.form.custom,"column",t)},expression:"form.custom.column"}}),e._v(" "),i("mt-input-number",{staticStyle:{width:"35%",float:"right"},model:{value:e.form.custom.column,callback:function(t){e.$set(e.form.custom,"column",t)},expression:"form.custom.column"}})],1)]):e._e(),e._v(" "),e.canSetDataTemplateWhenAssociate?i("el-form-item",{attrs:{label:"数据模板"}},[i("el-button",{attrs:{type:"text"},on:{click:e.setTemplate}},[e._v("设置模板")])],1):e._e(),e._v(" "),"calculate"!==e.form.component_type_code&&"art_execute"!==e.form.component_type_code&&"art_execute_info"!==e.form.component_type_code?i("el-form-item",{attrs:{label:"关联模式"}},["quote"!==e.form.component_type_code&&"option_association"!==e.form.component_type_code?i("div",[i("el-radio",{attrs:{label:!0},on:{change:e.getOldComInfo},model:{value:e.form.is_quote,callback:function(t){e.$set(e.form,"is_quote",t)},expression:"form.is_quote"}},[e._v("引用模式")]),e._v(" "),i("div",{staticClass:"subLabel"},[e._v("源数据更新时，引用过来的数据会同步刷新")])],1):e._e(),e._v(" "),"posed_photos"!==e.form.component_type_code&&"skip_node"!==e.form.component_type_code&&"after_loading_appointment"!==e.form.component_type_code&&"position_appointment"!==e.form.component_type_code?i("div",[i("el-radio",{attrs:{label:!1,disabled:e.isMoldManagement},on:{change:e.resetIsFreeze},model:{value:e.form.is_quote,callback:function(t){e.$set(e.form,"is_quote",t)},expression:"form.is_quote"}},[e._v("拷贝模式")]),e._v(" "),i("div",{staticClass:"subLabel"},[e._v("\n          拷贝过来的数据只是快速填充，与源数据再无关联\n        ")])],1):e._e()]):e._e(),e._v(" "),"form"!==e.form.component_type_code&&"column_table"!==e.form.component_type_code||!1!==e.form.is_quote?e._e():i("el-form-item",{attrs:{label:"表格属性"}},[i("el-checkbox",{model:{value:e.form.custom.is_allow_add_remove_rows,callback:function(t){e.$set(e.form.custom,"is_allow_add_remove_rows",t)},expression:"form.custom.is_allow_add_remove_rows"}},[e._v("允许增删行")])],1),e._v(" "),"calculate"!==e.form.component_type_code?i("el-form-item",{attrs:{label:"关联表单"}},[i("div",{staticClass:"connectForm"},[e._v("\n        "+e._s(e.form.custom&&e.form.custom.association_info&&e.form.custom.association_info.form_name)+"\n      ")])]):e._e(),e._v(" "),"calculate"!==e.form.component_type_code&&"treatForm"!==e.form.component_type_code&&"sign"!==e.form.component_type_code&&"blank"!==e.form.component_type_code&&"treat_table"!==e.form.component_type_code?i("el-form-item",{staticClass:"item",attrs:{label:"关联信息"}},[i("mt-button",{attrs:{type:"table"},on:{click:e.checkQuote}},[e._v("查看")])],1):e._e()],1):e._e(),e._v(" "),"input"===e.form.component_type_code||"radio"===e.form.component_type_code||"selectMutiple"===e.form.component_type_code||"inputNumber"===e.form.component_type_code||"textarea"===e.form.component_type_code||"select"===e.form.component_type_code||"datePicker"===e.form.component_type_code||"calculate"===e.form.component_type_code||"id_input"===e.form.component_type_code||"radiationCode"===e.form.component_type_code?i("el-form",{attrs:{"label-width":"100px"}},[e.form.custom&&e.form.name&&"plan_name"!==e.form.code&&"time"!==e.form.code?i("el-form-item",{attrs:{label:"设定关联字段"}},[i("mt-select",{attrs:{options:e.wordList,clearable:""},model:{value:e.form.custom.setkey,callback:function(t){e.$set(e.form.custom,"setkey",t)},expression:"form.custom.setkey"}})],1):e._e()],1):e._e(),e._v(" "),i("div",{staticStyle:{width:"100%","text-align":"center"}},[!(e.form.code&&!e.form.is_must&&"inTable"!==e.form.status||"inTable"===e.form.status&&!e.form.is_freeze)||"clinical_goal_input"===e.form.component_type_code||"clinical_goal_select"===e.form.component_type_code||"clinical_goal_actual"===e.form.component_type_code||"clinical_goal_achieve"===e.form.component_type_code||e.isAfterLoadingClinicalGoalsChild||e.form.component_type_code.includes("verify_results_")?e._e():i("mt-button",{staticClass:"deleteComBtn",on:{click:e.deleteItem}},[e._v("\n      删除组件\n    ")])],1),e._v(" "),i("mt-table-template",{ref:"activeTemplate",attrs:{form:e.activeCom,formCode:e.code}}),e._v(" "),i("mt-connect-info",{ref:"connectInfo",attrs:{form:e.activeCom,formCode:e.code}}),e._v(" "),i("el-dialog",{staticClass:"deleteDialog",attrs:{title:e.$l("tips"),visible:e.deleteVisible,width:"30%"},on:{"update:visible":function(t){e.deleteVisible=t}}},[i("div",{staticClass:"deleteDialog-div"},[i("div",{staticClass:"main"},[i("span",[e._v(" 该控件可能被其他表单关联，确定要删除吗？ ")]),e._v(" "),i("span",{staticClass:"sub"},[e._v("\n          删除后请重新配置对应表单，否则该表单无法使用\n        ")])])]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{type:"subprimary"},on:{click:function(t){e.deleteVisible=!1}}},[e._v(e._s(e.$l("cancel")))]),e._v(" "),i("mt-button",{staticClass:"delete",on:{click:e.deleteCom}},[e._v("直接删除")]),e._v(" "),i("mt-button",{staticClass:"check",on:{click:e.checkCom}},[e._v("查看关联信息")])],1)]),e._v(" "),i("el-dialog",{staticClass:"treeDialog",attrs:{title:"编辑",visible:e.cascadeVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.cascadeVisible=t}}},[i("div",{staticClass:"treeDialog-main"},[i("div",{staticClass:"treeDialog-main-operation"},[e._v("\n        选项\n        "),i("span",{staticClass:"btnArea"},[i("el-button",{staticClass:"addBtn",attrs:{type:"text",size:"mini"},on:{click:function(){return e.addTreeNode()}}},[e._v("\n            "+e._s(e.$l("add_a_new_category"))+"\n          ")]),e._v(" "),i("el-button",{staticClass:"hide",attrs:{type:"text",size:"mini"}},[e._v(" 编辑 ")]),e._v(" "),i("el-button",{staticClass:"hide",attrs:{type:"text",size:"mini"}},[e._v("\n            "+e._s(e.$l("delete"))+"\n          ")])],1)]),e._v(" "),i("el-collapse",{staticClass:"tree",model:{value:e.cascaderDialogList,callback:function(t){e.cascaderDialogList=t},expression:"cascaderDialogList"}},e._l(e.treeData,(function(t,o){return i("el-collapse-item",{key:o,attrs:{name:o,accordion:""}},[i("template",{slot:"title"},[i("div",{staticClass:"title"},[i("div",[i("span",{staticClass:"label"},[e._v("\n                  "+e._s(t.label)+"\n                ")])]),e._v(" "),i("span",{staticClass:"btnArea"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.appendNode(t,o)}}},[e._v("\n                  新增下级\n                ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.editNode(t,o)}}},[e._v("\n                  编辑\n                ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.removeNode(t,o)}}},[e._v("\n                  "+e._s(e.$l("delete"))+"\n                ")])],1)])]),e._v(" "),i("div",{staticClass:"sublist"},e._l(t.children,(function(t,n){return i("div",{key:n,staticClass:"subitem"},[i("div",{staticClass:"subitem-content"},[i("div",{staticClass:"subtitle"},[e._v("\n                  "+e._s(t.label)+"\n                ")]),e._v(" "),i("div",{staticClass:"btnArea"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.editSubNode(t,n,o)}}},[e._v("\n                    编辑\n                  ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.removeSubNode(t,n,o)}}},[e._v("\n                    "+e._s(e.$l("delete"))+"\n                  ")])],1)])])})),0)],2)})),1),e._v(" "),0===e.treeData.length?i("no-data-tip",{staticClass:"empty"}):e._e()],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{type:"subprimary"},on:{click:e.closeCascaderDialog}},[e._v(e._s(e.$l("cancel")))]),e._v(" "),i("mt-button",{staticClass:"check",on:{click:e.saveCascader}},[e._v(e._s(e.$l("confirm")))])],1)]),e._v(" "),i("el-dialog",{staticClass:"treeDialog treeDialog--three",attrs:{title:"编辑",visible:e.cascadeVisibleThree,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(t){e.cascadeVisibleThree=t}}},[i("div",{staticClass:"treeDialog-main"},[i("div",{staticClass:"treeDialog-main-operation"},[e._v("\n        选项\n        "),i("span",{staticClass:"btnArea"},[i("el-button",{staticClass:"addBtn",attrs:{type:"text",size:"mini"},on:{click:function(){return e.addTreeNode()}}},[e._v("\n            "+e._s(e.$l("add_a_new_category"))+"\n          ")]),e._v(" "),i("el-button",{staticClass:"hide",attrs:{type:"text",size:"mini"}},[e._v(" 编辑 ")]),e._v(" "),i("el-button",{staticClass:"hide",attrs:{type:"text",size:"mini"}},[e._v("\n            "+e._s(e.$l("delete"))+"\n          ")])],1)]),e._v(" "),i("el-collapse",{staticClass:"tree",model:{value:e.cascaderDialogList,callback:function(t){e.cascaderDialogList=t},expression:"cascaderDialogList"}},e._l(e.treeData,(function(t,o){return i("el-collapse-item",{key:o,attrs:{name:o,accordion:""}},[i("template",{slot:"title"},[i("div",{staticClass:"title"},[i("div",[i("span",{staticClass:"label"},[e._v("\n                  "+e._s(t.label)+"\n                ")])]),e._v(" "),i("span",{staticClass:"btnArea"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.appendNode(t,o)}}},[e._v("\n                  新增下级\n                ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.editNode(t,o)}}},[e._v("\n                  编辑\n                ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.removeNode(t,o)}}},[e._v("\n                  "+e._s(e.$l("delete"))+"\n                ")])],1)])]),e._v(" "),i("el-collapse",{staticClass:"sublist sublist--three"},e._l(t.children,(function(t,n){return i("el-collapse-item",{key:n,staticClass:"subitem",attrs:{name:n,accordion:""}},[i("template",{slot:"title"},[i("div",{staticClass:"subitem-content subitem-content--three"},[i("div",{staticClass:"subtitle"},[e._v("\n                    "+e._s(t.label)+"\n                  ")]),e._v(" "),i("div",{staticClass:"btnArea"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.appendSubNode(t,n,o)}}},[e._v("\n                      新增下级\n                    ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.editSubNode(t,n,o)}}},[e._v("\n                      编辑\n                    ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.removeSubNode(t,n,o)}}},[e._v("\n                      "+e._s(e.$l("delete"))+"\n                    ")])],1)])]),e._v(" "),i("div",{staticClass:"sub3list"},e._l(t.children,(function(t,a){return i("div",{key:a,staticClass:"subitem"},[i("div",{staticClass:"subitem-content"},[i("div",{staticClass:"subtitle"},[e._v("\n                      "+e._s(t.label)+"\n                    ")]),e._v(" "),i("div",{staticClass:"btnArea"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.editSub3Node(t,a,n,o)}}},[e._v("\n                        编辑\n                      ")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.removeSub3Node(t,a,n,o)}}},[e._v("\n                        "+e._s(e.$l("delete"))+"\n                      ")])],1)])])})),0)],2)})),1)],2)})),1),e._v(" "),0===e.treeData.length?i("no-data-tip",{staticClass:"empty"}):e._e()],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{type:"subprimary"},on:{click:e.closeCascaderDialog}},[e._v(e._s(e.$l("cancel")))]),e._v(" "),i("mt-button",{staticClass:"check",on:{click:e.saveCascader}},[e._v(e._s(e.$l("confirm")))])],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.cascaderTitle,visible:e.treeEditVisible,"close-on-click-modal":!1,width:"20%"},on:{"update:visible":function(t){e.treeEditVisible=t}}},[i("el-form",{staticClass:"editDialogFrom"},[i("el-form-item",{staticClass:"is-required editDialogFrom-label",staticStyle:{"margin-top":"16px"},attrs:{prop:"label",label:"名称：","label-width":"70px"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:"256"},model:{value:e.editLabel,callback:function(t){e.editLabel=t},expression:"editLabel"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{type:"subprimary"},on:{click:function(t){e.treeEditVisible=!1}}},[e._v(e._s(e.$l("cancel")))]),e._v(" "),i("mt-button",{staticClass:"check",attrs:{disabled:!e.editLabel},on:{click:e.saveTreeEdit}},[e._v(e._s(e.$l("confirm")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"关联字段列表",visible:e.showWordlistDialog,width:"20%"},on:{"update:visible":function(t){e.showWordlistDialog=t}}},[i("div",{staticClass:"wordlist"},e._l(e.wordList,(function(t){return i("div",{key:t.value,staticClass:"wordlist-item"},[i("div",{staticClass:"wordlist-item-label"},[e._v("\n          "+e._s(t.label)+"\n        ")]),e._v(" "),i("div",{staticClass:"wordlist-item-value"},[e._v("\n          "+e._s(t.value)+"\n        ")])])})),0)])],1)},ne=[],ae=(o("c5d0"),o("c0c4")),se=o.n(ae),le=o("5f87"),re=o("11c1"),ce=o("91a1"),me=o("b410"),de=o("6a93"),ue=o("a0d6"),pe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"related-visible"},[o("mt-button",{staticStyle:{padding:"0"},attrs:{type:"table",disabled:0===e.current.value_template.length},on:{click:e.showDialog}},[e._v("\n    "+e._s(e.$l("related_visible"))+"\n  ")]),e._v(" "),e.dialogVisible?o("el-dialog",{attrs:{width:"560px",title:e.$l("related_visible"),visible:e.dialogVisible,"before-close":e.handleCancel,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"tips"},[e._v("\n      "+e._s(e.$l("display_other_controls_according_to_option_value"))+"\n    ")]),e._v(" "),o("div",{staticClass:"table-wrapper"},[o("table",{staticClass:"simple-table"},[o("thead",[o("tr",[o("th",{staticStyle:{width:"30%"}},[e._v(e._s(e.$l("option_value")))]),e._v(" "),o("th",{staticStyle:{width:"70%"}},[e._v(e._s(e.$l("controls_displayed")))])])]),e._v(" "),o("tbody",e._l(e.list,(function(t,i){return o("tr",{key:i},[o("td",[e._v(e._s(t.value))]),e._v(" "),o("td",[o("mt-select-multiple",{attrs:{options:e.availableComponents,multiple:"","label-key":"name","value-key":"code",clearable:""},model:{value:t.relatedCodes,callback:function(o){e.$set(t,"relatedCodes",o)},expression:"item.relatedCodes"}})],1)])})),0)]),e._v(" "),0===e.list.length?o("no-data-tip",{attrs:{text:e.$l("please_add_options_first")}}):e._e()],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("mt-button",{attrs:{type:"submain"},on:{click:e.handleCancel}},[e._v(e._s(e.$l("cancel")))]),e._v(" "),o("mt-button",{attrs:{type:"primary",disabled:0===e.list.length},on:{click:e.handleConfirm}},[e._v(e._s(e.$l("confirm")))])],1)]):e._e()],1)},_e=[],fe={name:"RelatedVisibleSettings",components:{NoDataTip:ue["a"]},props:{current:{type:Object,default:function(){}},formList:{type:Array,default:function(){return[]}}},computed:{},data:function(){return{dialogVisible:!1,availableComponents:[],list:[]}},methods:{showDialog:function(){this.getAvailableComponents(),this.setList(),this.dialogVisible=!0},setList:function(){var e=this.current,t=e.value_template,o=e.custom,i=this.availableComponents.filter((function(e){return!e.disabled})).map((function(e){return e.code}));this.list=(t||[]).map((function(e){var t,n=(null===o||void 0===o?void 0:o.relatedVisible)||[],a=(null===(t=n.find((function(t){return t.value===e.value})))||void 0===t?void 0:t.relatedCodes)||[];return{value:e.value,relatedCodes:a.filter((function(e){return i.includes(e)}))}}))},getAvailableComponents:function(){this.availableComponents=Object(de["b"])(this.formList,this.current)},handleCancel:function(){this.dialogVisible=!1},handleConfirm:function(){var e=this.list.filter((function(e){return e.relatedCodes.length>0}));this.dialogVisible=!1,this.$set(this.current.custom,"relatedVisible",e)}}},he=fe,ve=(o("64b5"),Object(N["a"])(he,pe,_e,!1,null,"47665501",null)),be=ve.exports;function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ge(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ge=function(){return t};var e,t={},o=Object.prototype,i=o.hasOwnProperty,n=Object.defineProperty||function(e,t,o){e[t]=o.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function c(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,o){return e[t]=o}}function m(e,t,o,i){var a=t&&t.prototype instanceof v?t:v,s=Object.create(a.prototype),l=new O(i||[]);return n(s,"_invoke",{value:T(e,o,l)}),s}function d(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var u="suspendedStart",p="suspendedYield",_="executing",f="completed",h={};function v(){}function b(){}function y(){}var g={};c(g,s,(function(){return this}));var C=Object.getPrototypeOf,x=C&&C(C(E([])));x&&x!==o&&i.call(x,s)&&(g=x);var w=y.prototype=v.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function o(n,a,s,l){var r=d(e[n],e,a);if("throw"!==r.type){var c=r.arg,m=c.value;return m&&"object"==ye(m)&&i.call(m,"__await")?t.resolve(m.__await).then((function(e){o("next",e,s,l)}),(function(e){o("throw",e,s,l)})):t.resolve(m).then((function(e){c.value=e,s(c)}),(function(e){return o("throw",e,s,l)}))}l(r.arg)}var a;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){o(e,i,t,n)}))}return a=a?a.then(n,n):n()}})}function T(t,o,i){var n=u;return function(a,s){if(n===_)throw Error("Generator is already running");if(n===f){if("throw"===a)throw s;return{value:e,done:!0}}for(i.method=a,i.arg=s;;){var l=i.delegate;if(l){var r=$(l,i);if(r){if(r===h)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=_;var c=d(t,o,i);if("normal"===c.type){if(n=i.done?f:p,c.arg===h)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=f,i.method="throw",i.arg=c.arg)}}}function $(t,o){var i=o.method,n=t.iterator[i];if(n===e)return o.delegate=null,"throw"===i&&t.iterator.return&&(o.method="return",o.arg=e,$(t,o),"throw"===o.method)||"return"!==i&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var a=d(n,t.iterator,o.arg);if("throw"===a.type)return o.method="throw",o.arg=a.arg,o.delegate=null,h;var s=a.arg;return s?s.done?(o[t.resultName]=s.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,h):s:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(t){if(t||""===t){var o=t[s];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function o(){for(;++n<t.length;)if(i.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=e,o.done=!0,o};return a.next=a}}throw new TypeError(ye(t)+" is not iterable")}return b.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,r,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,r,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(L.prototype),c(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,o,i,n,a){void 0===a&&(a=Promise);var s=new L(m(e,o,i,n),a);return t.isGeneratorFunction(o)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(w),c(w,r,"Generator"),c(w,s,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),o=[];for(var i in t)o.push(i);return o.reverse(),function e(){for(;o.length;){var i=o.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=E,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var o in this)"t"===o.charAt(0)&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function n(i,n){return l.type="throw",l.arg=t,o.next=i,n&&(o.method="next",o.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],l=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var r=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(r&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(r){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),N(o),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var i=o.completion;if("throw"===i.type){var n=i.arg;N(o)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,o,i){return this.delegate={iterator:E(t),resultName:o,nextLoc:i},"next"===this.method&&(this.arg=e),h}},t}function Ce(e,t,o,i,n,a,s){try{var l=e[a](s),r=l.value}catch(e){return void o(e)}l.done?t(r):Promise.resolve(r).then(i,n)}function xe(e){return function(){var t=this,o=arguments;return new Promise((function(i,n){var a=e.apply(t,o);function s(e){Ce(a,i,n,s,l,"next",e)}function l(e){Ce(a,i,n,s,l,"throw",e)}s(void 0)}))}}function we(e){return $e(e)||Te(e)||Le(e)||ke()}function ke(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Le(e,t){if(e){if("string"==typeof e)return Se(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Se(e,t):void 0}}function Te(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $e(e){if(Array.isArray(e))return Se(e)}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=Array(t);o<t;o++)i[o]=e[o];return i}function Ne(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function Oe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(o),!0).forEach((function(t){Ee(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ne(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Ee(e,t,o){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ie(e){var t=De(e,"string");return"symbol"==ye(t)?t:t+""}function De(e,t){if("object"!=ye(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=ye(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Ae={name:"RightPanel",components:{RelatedVisibleSettings:be,NoDataTip:ue["a"],draggable:l.a},mixins:[ce["a"],me["d"]],props:{activeCom:{type:Object,default:function(){return{}}},totalSpan:{type:Number,default:0},isClinicalGoalFixedColumn:{type:Function,default:function(){}},formList:{type:Array,default:function(){return[]}}},data:function(){return{form:{},formName:this.$route.query.name||"",code:this.$route.query.code||"",activeName:"first",selectFrom:"form",selectFromOptions:[],selectCustomOptions:[],optionValue:[],marks:{8:"",16:"",24:""},heightMarks:{6:"",12:"",18:"",24:""},inputWidth:"calc(100% - 2rem)",fontSizeList:[{label:"12",value:"12"},{label:"14",value:"14"},{label:"16",value:"16"},{label:"18",value:"18"},{label:"21",value:"21"},{label:"24",value:"24"},{label:"36",value:"36"},{label:"48",value:"48"},{label:"60",value:"60"},{label:"72",value:"72"}],textAlignList:[{label:"左对齐",value:"left"},{label:"居中对齐",value:"center"},{label:"右对齐",value:"right"}],dateTypeList:[{label:"年-月-日",value:"yyyy-MM-dd"},{label:"年-月-日 时:分",value:"yyyy-MM-dd hh:mm:ss"}],unitWidthOptions:[{label:"居左",value:"1"},{label:"居中",value:"2"},{label:"居右",value:"3"}],fontBold:!1,underline:!1,italic:!1,fontSize:"",templateDialog:!1,activeTemplate:!1,deleteVisible:!1,widthPx:"200",remoteComs:[],imageWidth:100,imagePosition:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],imageList:[],fileId:"",treatFormList:[{code:"name",label:"患者姓名",edit:!1,width:"120px",must:!1},{code:"admission_number",label:this.$l("admission_number"),edit:!1,width:"140px",must:!1},{code:"outpatient_number",label:this.$l("outpatient_number"),edit:!1,width:"140px",must:!1},{code:"event_no",label:"住院号/门诊号",edit:!1,width:"140px",must:!1},{code:"patient_type",label:"患者来源",edit:!1,width:"80px",must:!1},{code:"apply_at",label:"预约时间",edit:!1,width:"160px",must:!1},{code:"treat_at",label:"治疗时间",edit:!1,width:"160px",must:!1},{code:"treat_start_at",label:this.$l("treat_start_at"),edit:!1,width:"160px",must:!1},{code:"shoot_field_name",label:"射野名称",edit:!0,width:"100px",must:!1},{code:"beam_count",label:"野/弧数",edit:!0,width:"120px",must:!1},{code:"treat_project",label:"治疗技术",edit:!1,width:"170px",must:!1},{code:"room_code",label:"执行房间",edit:!1,width:"150px",must:!1},{code:"position_label",label:"位置验证",edit:!0,width:"100px",must:!1},{code:"coordinate_x",label:"X [cm]",edit:!0,width:"60px",must:!1},{code:"coordinate_y",label:"Y [cm]",edit:!0,width:"60px",must:!1},{code:"coordinate_z",label:"Z [cm]",edit:!0,width:"60px",must:!1},{code:"rtn",label:"Rtn [°]",edit:!0,width:"60px",must:!1},{code:"pitch",label:"Pitch [°]",edit:!0,width:"60px",must:!1},{code:"roll",label:"Roll [°]",edit:!0,width:"60px",must:!1},{code:"checkers",label:"核准人员",edit:!0,width:"250px",must:!1},{code:"adaptive_mode",label:"自适应模式",edit:!1,width:"125px",must:!1},{code:"reference_plan",label:"参考计划",edit:!1,width:"125px",must:!1},{code:"plan_name",label:this.$l("plan_name"),edit:!1,width:"170px",must:!1},{code:"dose",label:"单次剂量[cGy]",edit:!0,width:"160px",must:!1},{code:"total_dose",label:"累计剂量[cGy]",edit:!1,width:"160px",must:!1},{code:"target_area",label:"靶区",edit:!0,width:"250px",must:!1},{code:"user_codes",label:"操作技师",edit:!0,width:"250px",must:!1},{code:"extra_remarks",label:"备注",edit:!0,width:"100px",must:!1}],optionIdx:-1,activeTNMCard:"T",planSysList:[],diagnoseType:[{label:"默认样式",value:"default"},{label:"级联框",value:"cascade_control"},{label:"下拉框",value:"select"}],cascadeVisible:!1,cascadeVisibleThree:!1,treeData:[],treeEditVisible:!1,editLabel:"",currentTreeNode:[],cascaderDialogList:[],editNodeType:"addNode",cascaderTitle:"新增",currentID:"",currentSubId:"",deptInfoList:[],showStyleItemValue:"",showWordlistDialog:!1,wordList:[],setkeyList:[],NameOptionsList:[{value:"default",label:"姓名合并"},{value:"split",label:"姓名拆分"}],nameType:"default",selectedText:"",text:"",value:"",formattedText:"",hospitalCampusList:[],treatMachineList:[],existCampusList:!1,monthValueSelectOptions:[{value:"Monday",label:"周一",id:"1"},{value:"Tuesday",label:"周二",id:"2"},{value:"Wednesday",label:"周三",id:"3"},{value:"Thursday",label:"周四",id:"4"},{value:"Friday",label:"周五",id:"5"},{value:"Saturday",label:"周六",id:"6"},{value:"Sunday",label:"周日",id:"7"}],optionAssociaitonList:[{label:"不跳转，按顺序执行",value:"0",option:"",key:"0",number:0,inputNumber:1,id:0}]}},computed:Oe(Oe({planConnectFields:function(){return[{name:this.$l("plan_information"),columns:this.planInfo,code:this.groupCode.plan},{name:this.$l("field_information"),columns:this.beamInfo,code:this.groupCode.beam},{name:this.$l("dose_information"),columns:this.doseInfo,code:this.groupCode.dose},{name:this.$l("tomo_information"),columns:this.tomoInfo,code:this.groupCode.tomo},{name:this.$l("heavy_ion_information"),columns:this.heavyIonInfo,code:this.groupCode.heavy_ion}]},sanitizedFormattedText:function(){return se.a.sanitize(this.formattedText)},isAllowHidden:function(){return Object(C["m"])(this.form)},isCustomizePrintFontSize:function(){return Object(C["e"])(this.form.component_type_code)},showStyleItem:function(){var e=["docGroup","phyGroup","verifyPhyGroup"];return e.includes(this.form.component_type_code)}},Object(a["b"])({remoteList:"design/remoteList"})),{},{isHospitalCampus:function(){return Object(C["s"])(this.form.component_type_code)},showDefaultValue:function(){return Object(C["c"])(this.form)},isTreatMachine:function(){return Object(C["A"])(this.form.component_type_code)},singleSelectOptions:function(){return this.isHospitalCampus?this.hospitalCampusList:this.isTreatMachine?this.treatMachineList:this.form.value_template},isMoldManagement:function(){return Object(C["t"])(this.form.component_type_code)},isAfterLoadingClinicalGoals:function(){return Object(C["k"])(this.form.component_type_code)},isAfterLoadingClinicalGoalsChild:function(){return Object(C["l"])(this.form.component_type_code)},disabledSetOptions:function(){return Object(C["g"])(this.form.component_type_code)},isDataTemplateTypeTable:function(){return Object(C["r"])(this.form.component_type_code)},canSetDataTemplateWhenAssociate:function(){var e=this.form,t=e.component_type_code,o=e.is_enable,i=e.is_quote,n="form"===t;return n||this.isDataTemplateTypeTable&&o&&i},allowSetRelatedVisible:function(){return Object(de["a"])(this.formList,this.form)}}),watch:{activeCom:{deep:!0,immediate:!0,handler:function(){if(this.form.custom||(this.form.custom={}),this.form.custom.setkey||(this.form.custom.setkey=""),this.imageWidth=0,this.form=this._.cloneDeep(this.activeCom),this.formattedText=this.form.name,this.isHospitalCampus&&this.getHospitalCampusList(),this.isTreatMachine&&this.getTreatmentRoom(),"remoteCounter"==this.form.component_type_code&&(this.remoteComs=this.form.value),"image"!=this.form.component_type_code&&"scan_diagram"!==this.form.component_type_code||(this.imageWidth=parseInt(this.form.style.width,10)),"image"==this.form.component_type_code&&"custom_image"===this.form.custom.image_type){this.form.span=this.form.span?this.form.span:24;var e=this.form.custom.column?this.form.custom.column:8;this.$set(this.form.custom,"column",e)}if("QRCode"==this.form.component_type_code&&(this.imageWidth=parseInt(this.form.style.width,10),this.qrDeptInfo()),this.showStyleItem&&this.form.custom.range&&(this.showStyleItemValue=this.form.custom.range.find((function(e){return e.status})).value),this.form.style&&(this.fontBold="bold"==this.form.style.fontWeight,this.underline="underline"==this.form.style.textDecoration,this.underline="italic"==this.form.style.fontStyle,this.form.style.fontSize?this.fontSize=this.form.style.fontSize.replace(/[^\d]/g,"")||"14":this.fontSize="",this.form.style.width?this.widthPx=this.form.style.width.replace(/[^\d]/g,"")||"200":this.widthPx="200"),this.setValueStyle(),this.setDiagnoseDisplayType(),"input"===this.form.component_type_code||"radio"===this.form.component_type_code||"selectMutiple"===this.form.component_type_code||"inputNumber"===this.form.component_type_code||"textarea"===this.form.component_type_code||"select"===this.form.component_type_code||"datePicker"===this.form.component_type_code||"calculate"===this.form.component_type_code||"id_input"===this.form.component_type_code||"radiationCode"===this.form.component_type_code){var t=this.form.component_type_code,o="id_input"===t||"radiationCode"===t?"input":t;this.getConnectWordList(o)}}},form:{deep:!0,handler:function(e,t){t.code&&e.code===t.code&&this.$emit("change",this.form)}},"form.value_template":{deep:!0,handler:function(e,t){"treatFrequency"===this.form.component_type_code&&e&&"treatFrequency"===this.form.component_type_code&&(this.form.value.frequency=e.length?e[0].value:"")}}},created:function(){},mounted:function(){},methods:(X={canSetSubComponentLayout:C["f"],canSetHiddenContent:C["d"],isPlanConnect:C["w"],isApprovalRemark:C["n"],handleNodeNumberChange:function(e){console.log(e,"data")},handleOptionChange:function(e,t,o){var i;i=t.inputNumber>=1?Oe(Oe({},this.form.value_template[o]),{},{value:e,label:"跳过".concat(t.inputNumber,"个节点"),number:t.inputNumber}):Oe(Oe({},this.form.value_template[o]),{},{value:e,label:"不跳转，按顺序执行",number:0,inputNumber:1}),this.form.value_template.splice(o,1,i)},changeToMultiple:function(){this.form.component_type_code="selectMutiple",this.form.component_type_name="下拉多选",this.form.custom.defaultValue=this.form.custom.defaultValue?[this.form.custom.defaultValue]:[],this.form.value=this.form.value?[this.form.value]:[],this.getConnectWordList(this.form.component_type_code)},changeToSingle:function(){this.form.component_type_code="select",this.form.component_type_name="下拉单选",this.form.custom.defaultValue="",this.form.value="",this.getConnectWordList(this.form.component_type_code)},onChangeSelectMultiple:function(){"select"===this.form.component_type_code?this.changeToMultiple():this.changeToSingle()},setValueStyle:function(){if(this.showDefaultValue){var e=this.form.custom||{},t=e.highlightOnNonDefault,o=e.valueStyle;if(!o){var i="default";Object(C["n"])(this.form.component_type_code)&&(i="highlightValueAlways"),t&&(i="highlightOnNonDefault"),this.$set(this.form.custom,"valueStyle",i)}}},handleApplyChange:function(e){this.form.apply_at=e},handleNameChange:function(e){this.nameType=e,this.form.custom.type=e},handleStyleItemChange:function(e){this.form.custom.range=this.form.custom.range.map((function(t){return t.status=e===t.value,t}))},blurOptionValue:function(e){},deleteSelect:function(e){this.selectCustomOptions.splice(e,1)},deleteItem:function(){this.deleteVisible=!0},deleteCom:function(){this.deleteVisible=!1,this.$emit("delete",this.form)},checkCom:function(){this.deleteVisible=!1,this.checkQuote()},checkPlanQuote:function(){},copy:function(){this.$emit("copy",this.form)},changeRadio:function(e){var t=this,o=this.form.component_type_code;this.form.component_type_code="",e&&this.$set(this.form,"value",[]),e||this.$set(this.form,"value",""),setTimeout((function(){t.form.component_type_code=o,"radio"===o&&t.$set(t.form.custom,"defaultValue",e?[]:"")}),10)},changeDefaultValue:function(e){var t=this.form.component_type_code,o="treatFrequency"===t;if(o){var i=parseInt(e,10);i>2&&(e=2),i<=0&&(e=1)}var n=o||"unit"===t,a=n?this.form.value.value:this.form.value;this.$set(this.form.custom,"defaultValue",a)},handleValueStyleChange:function(e){if(delete this.form.custom.highlightOnNonDefault,"highlightOnNonDefault"===e){var t=this.form,o=t.component_type_code,i=t.custom,n=t.value;if(!i.hasOwnProperty("defaultValue")){var a="treatFrequency"===o||"unit"===o,s=a?n.value:n;s&&this.$set(this.form.custom,"defaultValue",s)}}},addSelectList:function(){""===this.form.value_template&&(this.form.value_template=[]);var e=this.form.value_template.length+1,t=this.isMoldManagement?this.$l("mold_type"):"选项 ",o=t+e;this.optionValue.push(o),this.form.value_template.push({value:o,label:o})},addOptionSelectList:function(){""===this.form.value_template&&(this.form.value_template=[]);var e=this.form.value_template.length,t="选项 "+(e+1);this.optionValue.push(t);var o=this.form.value_template.length?this.form.value_template[e-1].id:0;this.form.value_template.push({value:"0",option:t,optionIndex:e||0,label:"不跳转，按顺序执行",number:0,inputNumber:1,id:o+1}),console.log(this.form.value_template,"this.form.value_template")},addQuickSelectList:function(){""===this.form.value_template&&(this.form.value_template=[]);var e=this.form.value_template.length+1,t="选项 "+e;this.form.value_template.push({label:t,value:0})},deleteOption:function(e){"treatForm"===this.form.component_type_code&&this.form.custom.label&&this.form.custom.label.splice(e,1),this.form.value_template.splice(e,1),this.optionValue.splice(e,1),this.updateRelatedVisible()},deleteAssociaitonOption:function(e){this.form.value_template.splice(e,1),this.optionValue.splice(e,1),this.form.value_template.forEach((function(e,t){e.optionIndex=t}))},inputVaildateValue:function(e,t){return e=e.toString().replace(/[^\d]{0,2}/g,""),Number(e)>50?t.value=50:Number(e)<1?t.value=null:void 0},changeOptionValue:function(e,t){var o={value:e,label:e};"treatFrequency"==this.form.component_type_code&&(o.value=e.value,o.label=e.value),this.form.value_template.splice(t,1,o),this.updateRelatedVisible()},changeQuickSelect:function(e){this.form.custom.quick_select=e,e&&(this.form.custom.precision=2)},changeQuickSelectLabel:function(e,t){var o,i=null===(o=this.form)||void 0===o||null===(o=o.value_template)||void 0===o?void 0:o[t];if(i){var n={value:i.value,label:e};this.form.value_template.splice(t,1,n)}},blurQuickSelectLabel:function(e,t){var o,i=null===(o=this.form)||void 0===o||null===(o=o.value_template)||void 0===o?void 0:o[t];i&&(e||this.form.value_template.splice(t,1,{value:i.value,label:"选项 ".concat(t+1)}))},changeQuickSelectValue:function(e,t){var o,i=null===(o=this.form)||void 0===o||null===(o=o.value_template)||void 0===o?void 0:o[t];if(i){var n={value:e,label:i.label};this.form.value_template.splice(t,1,n)}},blurQuickSelectValue:function(e,t){var o,i=null===(o=this.form)||void 0===o||null===(o=o.value_template)||void 0===o?void 0:o[t];i&&(e||this.form.value_template.splice(t,1,{value:0,label:i.label}))},focusOptionValue:function(e,t){var o=this;this.optionIdx=-1,this.form.value_template.forEach((function(e,t){o.form.value&&o.form.value===e.label&&(o.optionIdx=t)}))}},Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(X,"blurOptionValue",(function(e,t){-1!==this.optionIdx&&this.optionIdx===t&&(this.form.value=e)})),"addFrequencySelectList",(function(){""===this.form.value_template&&(this.form.value_template=[]);var e=this.form.value_template.length+1,t={name:e,value:e};this.optionValue.push(t),this.form.value_template.push(t)})),"handleInput",_.debounce((function(e){this.form.value=e.target.innerHTML,this.form.name=e.target.innerHTML}),300)),"changeFontWeight",(function(){this.fontBold=!this.fontBold;var e=this.fontBold;"text"!==this.form.component_type_code?(e?this.$set(this.form.style,"fontWeight","bold"):this.$set(this.form.style,"fontWeight","normal"),this.$forceUpdate()):document.execCommand("bold")})),"changeFontUnderline",(function(){this.underline=!this.underline;var e=this.underline;if(e){if("text"===this.form.component_type_code)return void document.execCommand("underline");this.$set(this.form.style,"textDecoration","underline")}else this.$set(this.form.style,"textDecoration","none");this.$forceUpdate()})),"changeFontitalic",(function(){this.italic=!this.italic;var e=this.italic;if(e){if("text"===this.form.component_type_code)return void document.execCommand("italic");this.$set(this.form.style,"fontStyle","italic")}else this.$set(this.form.style,"fontStyle","normal");this.$forceUpdate()})),"chanegUseable",(function(e){this.form.custom.reuesable=e})),"changeFontSize",(function(e){e=e.replace(/[^\d]/g,""),this.fontSize=e,this.form.style.fontSize=e?e+"px":""})),"checkMaxLen",(function(e){this.form.max_len&&this.form.min_len&&parseInt(this.form.max_len,10)<parseInt(this.form.min_len,10)&&(this.form.max_len=this.form.min_len,this.$mtMessage.info("最大长度不得小于最小长度"))})),"checkMaxInt",(function(e){this.form.custom.max&&this.form.custom.min&&this.form.custom.max<this.form.custom.min&&(this.form.custom.max=this.form.custom.min,this.$mtMessage.info("最大值不得小于最小值"))})),Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(X,"changeTextLength",(function(e){this.form.name=this.form.name.substr(0,e)})),"openCalculate",(function(){var e=this;if("inTable"===this.form.status)this.$attrs.parentRef.formItemTableRef.forEach((function(t){var o=t.$children[t.$children.length-1],i="calculate"+e.form.code,n=o.$children.find((function(e){return e.$refs[i]}));n&&n.$refs[i].setting()}));else{var t=this.$attrs.parentRef.fortItemRef,o="calculate"+this.form.code,i=t.find((function(e){return e.$refs[o]}));i&&i.$refs[o].setting()}})),"moveFormTitle",(function(e){console.log("moveFormTitle")})),"setTemplate",(function(){this.$emit("setTemplate",this.form),this.$store.commit("design/SET_TABLETEMPLATE_DIALOG",!0),this.$store.commit("design/SET_TABLETEMPLATE_TYPE",this.form.component_type_code)})),"openTemplate",(function(){this.$refs.activeTemplate.init(),this.templateDialog=!0})),"getOldComInfo",(function(){var e,t=this,o=this.form.code,i={form_code:this.form.association_form_code,component_code:this.form.association_code,is_list_copy:!1},n=this.form.style.fontSize,a=this.form.span,s=null===(e=this.form.custom)||void 0===e?void 0:e.relatedVisible;this.$request.post(m["a"].GET_FORM_ONE_COMPONENT_INFO,i).then((function(e){var i,l=e.data[0]||{};null!==(i=l.custom)&&void 0!==i&&i.relatedVisible&&delete l.custom.relatedVisible,t.form=JSON.parse(JSON.stringify(l)),t.form.apply_at=!1,t.form.code=o,t.form.is_quote=!0,t.form.is_updated=!1,t.form.style.fontSize=n,t.form.span=a,s&&(t.form.custom.relatedVisible=s,t.updateRelatedVisible())}))})),"updateRelatedVisible",(function(){var e=this.form,t=e.custom,o=e.value_template,i=null===t||void 0===t?void 0:t.relatedVisible;if(this.allowSetRelatedVisible&&i){var n=[];o.forEach((function(e){var t=i.find((function(t){return t.value===e.value}));t&&n.push(t)})),this.form.custom.relatedVisible=n}})),"resetIsFreeze",(function(){this.form.is_freeze=!1})),"changeTNMCard",(function(e){this.activeTNMCard=e.label})),"changeWidthPx",(function(e){this.widthPx<=70&&(this.widthPx=70),this.form.style.width=this.widthPx+"px",this.$emit("change",this.form),this.$forceUpdate()})),Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(X,"changeImageWidth",(function(e){this.form.style.width=e+"%"})),"changeFile",(function(e){var t=this;console.log(e,"file");var o=new FormData;o.append("access_token",Object(le["a"])()),o.append("action_client_code","PC"),o.append("action_user_code",this.$store.state.user.userInfo.user_code),o.append("hospital_code",this.$store.state.user.hospitalCode),o.append("component_type_code",this.form.component_type_code),o.append("component_code",this.form.code),o.append("file",e.raw||null),this.$request.post(m["a"].FILE_UPLOAD,o).then((function(e){if(1e4!==e.code)return!1;t.imageList=[],t.form.value_template=e.data.file_id})).catch((function(e){return!1}))})),"changeImageType",(function(e){var t=this;if(console.log(this.form),this.form.value_template?this.$confirm("类型切换时，内置图片已上传的内容将会被清除",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),type:""}).then((function(){t.form.custom.image_type=e,t.imageList=[],t.form.value_template=""})).catch((function(){return!1})):this.form.custom.image_type=e,"built_in_image"===this.form.custom.image_type)this.form.style={width:"100%"},this.imageWidth=100;else{this.form.style={},this.form.span=24,this.imageWidth=100;var o=this.form.custom.column?this.form.custom.column:8;this.$set(this.form.custom,"column",o),this.$emit("change",this.form)}})),"uploadImage",(function(e){console.log(e)})),"setImageUrl",(function(e){this.form.component_type_code;this.$request.get(m["a"].GET_UPLOAD_FILE+"?component_type_code="+this.form.component_type_code+"&file_id="+e).then((function(e){console.log(e)}))})),"qrDeptInfo",(function(){var e=this,t={form_code:this.$route.query.code};this.$request.post(m["a"].GET_FORM_DEPT_INFO,t).then((function(t){1e4===t.code&&(e.deptInfoList=[],t.data.forEach((function(t){e.deptInfoList.push({dept_name:t.dept_name,qrcode:t.qr_component_code})})),setTimeout((function(){e.$forceUpdate()}),0))}))})),"checkNameEmpty",(function(e){e||"form"===this.form.component_type_code||"list"===this.form.component_type_code||(this.form.name=this.form.component_type_name)})),"changeRemote",(function(e){this.form.value=e,this.$store.commit("design/SET_REMOTE_COUNTER",e)})),"changeImport",(function(e){var t=this.form.custom;switch(e){case"login":t.is_doctor_user=!0,t.is_doctor_user=!1,t.is_doctor_user_without_time=!1,t.is_physicist_user_without_time=!1,t.is_positiontech_user_without_time=!1;break;case"switch":t.is_logged_user=!1,t.is_doctor_user=!1,t.is_doctor_user_without_time=!1,t.is_physicist_user_without_time=!1,t.is_positiontech_user_without_time=!1;break;case"import":t.is_doctor_user=!0,t.is_logged_user="",t.is_doctor_user_without_time=!1,t.is_physicist_user_without_time=!1,t.is_positiontech_user_without_time=!1;break;case"import_doctor_user_without_time":t.is_doctor_user_without_time=!0,t.is_logged_user="",t.is_doctor_user=!1,t.is_physicist_user_without_time=!1,t.is_positiontech_user_without_time=!1;break;case"import_physicist_user_without_time":t.is_physicist_user_without_time=!0,t.is_logged_user="",t.is_doctor_user_without_time=!1,t.is_doctor_user=!1,t.is_positiontech_user_without_time=!1;break;case"import_positiontech_user_without_time":t.is_positiontech_user_without_time=!0,t.is_logged_user="",t.is_doctor_user_without_time=!1,t.is_physicist_user_without_time=!1,t.is_doctor_user=!1;break;default:console.warn("Unknown param: ".concat(e));break}})),"changeDiagnoseType",(function(e){this.form.value_template=[]})),Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(X,"handleDelMarkLine",(function(e){this.form.value_template.splice(e,1)})),"handleAddMarkLine",(function(){var e=this.form.value_template,t=0;e.length>0&&(t=Math.max.apply(Math,we(e.map((function(e){return e.position}))))+20),e.push({id:Object(re["v4"])(),name:"",position:t})})),"changeTreatFormList",(function(e){var t=this,o=JSON.parse(JSON.stringify(this.form.value_template));if(this.form.value_template=[],0==e.length)return!1;e.forEach((function(e){t.form.value_template.push(t.treatFormList.find((function(t){return t.code==e})))})),this.form.value_template.forEach((function(e){o.forEach((function(t){e.code===t.code&&(e.edit=t.edit,e.width=t.width,e.must=t.must)}))}))})),"changeTreatFormColumnOrder",(function(){this.form.custom.label=this.form.value_template.map((function(e){return e.code}))})),"changeFreeze",(function(e){e.is_required=!1})),"isChildItemShow",(function(e){return"radiotherapy_record"!==this.form.component_type_code||Object(C["x"])(e.code)})),"checkQuote",(function(){this.$refs.connectInfo.init()})),"addIdList",(function(){this.form.custom&&this.form.custom.list?this.form.custom.list.push(""):this.form.custom.list||this.$set(this.form,"custom",{list:[""]})})),"closeCascaderDialog",(function(){this.cascadeVisible=!1,this.cascadeVisibleThree=!1})),"editCascaderList",(function(){console.log("editCascaderList",this.form.value_template),this.form.value_template?this.treeData=this.form.value_template:this.treeData=[],"cascade_control"===this.form.component_type_code?this.cascadeVisibleThree=!0:this.cascadeVisible=!0})),Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(Ee(X,"saveCascader",(function(){this.form.value_template=this._.cloneDeep(this.treeData),this.closeCascaderDialog()})),"saveTreeEdit",(function(){if("addNode"==this.editNodeType)this.treeData.push({value:this.editLabel,label:this.editLabel,children:[]});else if("addSub"==this.editNodeType)this.treeData[this.currentID].children.push({value:this.editLabel,label:this.editLabel});else if("addSub3"==this.editNodeType){var e=this.treeData[this.currentID].children[this.currentSubId];e.children||(this.treeData[this.currentID].children[this.currentSubId].children=[]),this.treeData[this.currentID].children[this.currentSubId].children.push({value:this.editLabel,label:this.editLabel})}else"edit"==this.editNodeType&&(2==this.currentTreeNode.length?this.treeData[this.currentTreeNode[0]].children[this.currentTreeNode[1]].label=this.editLabel:3==this.currentTreeNode.length?this.treeData[this.currentTreeNode[0]].children[this.currentTreeNode[1]].children[this.currentTreeNode[2]].label=this.editLabel:this.treeData[this.currentTreeNode[0]].label=this.editLabel);this.treeEditVisible=!1})),"addTreeNode",(function(){this.editNodeType="addNode",this.editLabel="",this.treeEditVisible=!0,this.cascaderTitle=this.$l("add_a_new_category")})),"appendNode",(function(e,t){this.currentID=t,this.editNodeType="addSub",this.editLabel="",this.treeEditVisible=!0,this.cascaderTitle=this.$l("add_subordinate"),this.cascaderDialogList.indexOf(t)<0&&this.cascaderDialogList.push(t)})),"editNode",(function(e,t){this.cascaderTitle=this.$l("edit_category"),this.editNodeType="edit",this.currentID=t,this.editLabel=e.label,this.currentTreeNode=[t],this.treeEditVisible=!0})),"appendSubNode",(function(e,t,o){this.editNodeType="addSub3",this.cascaderTitle=this.$l("add_subordinate"),this.currentID=o,this.currentSubId=t,this.editLabel="",this.treeEditVisible=!0})),"editSubNode",(function(e,t,o){this.editNodeType="edit",this.cascaderTitle="编辑",this.currentID=o,this.editLabel=e.label,this.currentTreeNode=[o,t],this.treeEditVisible=!0})),"editSub3Node",(function(e,t,o,i){this.editNodeType="edit",this.cascaderTitle="编辑",this.currentID=i,this.editLabel=e.label,this.currentTreeNode=[i,o,t],this.treeEditVisible=!0})),"removeNode",(function(e,t){var o=this;this.$confirm("确定删除该选项?",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),confirmButtonClass:"el-button--danger",cancelButtonClass:"el-button--submain",type:""}).then((function(){o.treeData.splice(t,1)})).catch((function(){return!1}))})),"removeSub3Node",(function(e,t,o,i){var n=this;this.$confirm("确定删除该选项?",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),confirmButtonClass:"el-button--danger",cancelButtonClass:"el-button--submain",type:""}).then((function(){var e,a,s,l;(null===(e=n.treeData[i])||void 0===e||null===(e=e.children)||void 0===e||null===(e=e[o])||void 0===e||null===(e=e.children)||void 0===e||null===(a=e.splice)||void 0===a||a.call(e,t,1),null!==(s=n.treeData[i])&&void 0!==s&&null!==(s=s.children)&&void 0!==s&&null!==(s=s[o])&&void 0!==s&&null!==(s=s.children)&&void 0!==s&&s.length)||(null===(l=n.treeData[i])||void 0===l||null===(l=l.children)||void 0===l||null===(l=l[o])||void 0===l||delete l.children);n.$forceUpdate()})).catch()})),Ee(Ee(Ee(Ee(Ee(Ee(X,"removeSubNode",(function(e,t,o){var i=this;this.$confirm("确定删除该选项?",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),confirmButtonClass:"el-button--danger",cancelButtonClass:"el-button--submain",type:""}).then((function(){i.treeData[o].children.splice(t,1)})).catch((function(){return!1}))})),"getConnectWordList",(function(e){var t=this;this.$request.post(this.API.GET_PRESET_MAPPER,{component_type_code:e}).then((function(e){if(1e4===e.code)for(var o in t.wordList=[],e.data)t.wordList.push({label:e.data[o],value:o})}))})),"getHospitalCampusList",(function(){var e=this;this.isHospitalCampus&&!this.existCampusList&&this.$request.post(this.API.GET_CAMPUS_LIST).then((function(t){if(t.success){var o=(t.data||[]).filter((function(e){return e.name}));e.hospitalCampusList=o.map((function(e){return{value:e.code,label:e.name}})),e.existCampusList=!0}}))})),"getTreatmentRoom",(function(){var e=this;return xe(ge().mark((function t(){var o;return ge().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={search_word:"",appoint_items:["治疗"],page:1,page_size:1e3},t.next=3,e.$request.post(e.API.GET_ROOM_LIST,o).then((function(t){e.treatMachineList=t.data.data.map((function(e){return{value:e.code,label:e.name}}));var o=e.treatMachineList.some((function(t){return t.value==e.form.value}));o||(e.form.value=null)}));case 3:case"end":return t.stop()}}),t)})))()})),"setDiagnoseDisplayType",(function(){var e,t,o;"diagnose"===this.form.component_type_code&&this.form.custom&&(this.$set(this.form.custom,"displayType",(null===(e=this.form.custom)||void 0===e?void 0:e.displayType)||"default"),(null===(t=this.form.custom)||void 0===t||!t.diagnosisTitle)&&this.$set(this.form.custom,"diagnosisTitle","诊断"),(null===(o=this.form.custom)||void 0===o||!o.stageTitle)&&this.$set(this.form.custom,"stageTitle","分期"))})),"handlePlanConnectFieldHiddenChange",(function(e,t,o){var i=this;t.groupName&&o.columns.forEach((function(n){if(n.code!==t.code&&n.groupName===t.groupName)if(e)i.form.custom[o.code].includes(n.code)||i.form.custom[o.code].push(n.code);else{var a=i.form.custom[o.code].indexOf(n.code);a>-1&&i.form.custom[o.code].splice(a,1)}}))})))},Pe=Ae,je=(o("c4f1"),o("bb11"),o("bf3f"),Object(N["a"])(Pe,ie,ne,!1,null,"288616e7",null)),Fe=je.exports,Me=o("8239");o("a27e");function Ve(e){return Be(e)||ze(e)||Re(e)||qe()}function qe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Re(e,t){if(e){if("string"==typeof e)return Ge(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Ge(e,t):void 0}}function ze(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Be(e){if(Array.isArray(e))return Ge(e)}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=Array(t);o<t;o++)i[o]=e[o];return i}function He(e,t,o){"undefined"==typeof o&&(o=[]);for(var i=0;i<e.length;i++){var n=Ve(o);if(n.push(e[i].code),e[i].code==t)return n;if(e[i].children){var a=He(e[i].children,t,n);if(a)return a}}}function We(e,t,o){var i=!1,n=null;function a(e,t){for(var o=0;o<e.length;o++)if(e[o].children&&e[o].children.length>0&&a(e[o].children,t),t==[e[o].code]||i){i||(n=e[o]),i=!0;break}}return"undefined"==typeof o&&(o=[]),a(e,t),n}function Ue(e,t){if(e&&e.length)for(var o=0;o<e.length;o++){if(e[o].code===t){console.log(e[o]),e.splice(o,1);break}Ue(e[o].children,t)}}function Qe(e,t,o,i){var n={};return o&&(n={code:"row"+t,children:[e],component_type_code:"container",component_type_name:"容器",component_type_source:"LAYOUT",is_container:!!i,name:i||"",span:24,style:"",inTable:!1},n.children[0].code=t),n}var Je=o("6b38"),Ye=o("841d"),Ke=o("2aef"),Xe=o("23ef"),Ze=o("5140"),et=o("4949"),tt=o("2ef0");function ot(e){return st(e)||at(e)||nt(e)||it()}function it(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nt(e,t){if(e){if("string"==typeof e)return lt(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?lt(e,t):void 0}}function at(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function st(e){if(Array.isArray(e))return lt(e)}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=Array(t);o<t;o++)i[o]=e[o];return i}function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ct(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ct=function(){return t};var e,t={},o=Object.prototype,i=o.hasOwnProperty,n=Object.defineProperty||function(e,t,o){e[t]=o.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",r=a.toStringTag||"@@toStringTag";function c(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,o){return e[t]=o}}function m(e,t,o,i){var a=t&&t.prototype instanceof v?t:v,s=Object.create(a.prototype),l=new O(i||[]);return n(s,"_invoke",{value:T(e,o,l)}),s}function d(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var u="suspendedStart",p="suspendedYield",_="executing",f="completed",h={};function v(){}function b(){}function y(){}var g={};c(g,s,(function(){return this}));var C=Object.getPrototypeOf,x=C&&C(C(E([])));x&&x!==o&&i.call(x,s)&&(g=x);var w=y.prototype=v.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function o(n,a,s,l){var r=d(e[n],e,a);if("throw"!==r.type){var c=r.arg,m=c.value;return m&&"object"==rt(m)&&i.call(m,"__await")?t.resolve(m.__await).then((function(e){o("next",e,s,l)}),(function(e){o("throw",e,s,l)})):t.resolve(m).then((function(e){c.value=e,s(c)}),(function(e){return o("throw",e,s,l)}))}l(r.arg)}var a;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){o(e,i,t,n)}))}return a=a?a.then(n,n):n()}})}function T(t,o,i){var n=u;return function(a,s){if(n===_)throw Error("Generator is already running");if(n===f){if("throw"===a)throw s;return{value:e,done:!0}}for(i.method=a,i.arg=s;;){var l=i.delegate;if(l){var r=$(l,i);if(r){if(r===h)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=_;var c=d(t,o,i);if("normal"===c.type){if(n=i.done?f:p,c.arg===h)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=f,i.method="throw",i.arg=c.arg)}}}function $(t,o){var i=o.method,n=t.iterator[i];if(n===e)return o.delegate=null,"throw"===i&&t.iterator.return&&(o.method="return",o.arg=e,$(t,o),"throw"===o.method)||"return"!==i&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var a=d(n,t.iterator,o.arg);if("throw"===a.type)return o.method="throw",o.arg=a.arg,o.delegate=null,h;var s=a.arg;return s?s.done?(o[t.resultName]=s.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,h):s:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(t){if(t||""===t){var o=t[s];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function o(){for(;++n<t.length;)if(i.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=e,o.done=!0,o};return a.next=a}}throw new TypeError(rt(t)+" is not iterable")}return b.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,r,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,r,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(L.prototype),c(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,o,i,n,a){void 0===a&&(a=Promise);var s=new L(m(e,o,i,n),a);return t.isGeneratorFunction(o)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(w),c(w,r,"Generator"),c(w,s,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),o=[];for(var i in t)o.push(i);return o.reverse(),function e(){for(;o.length;){var i=o.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=E,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var o in this)"t"===o.charAt(0)&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function n(i,n){return l.type="throw",l.arg=t,o.next=i,n&&(o.method="next",o.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],l=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var r=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(r&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(r){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),N(o),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var i=o.completion;if("throw"===i.type){var n=i.arg;N(o)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,o,i){return this.delegate={iterator:E(t),resultName:o,nextLoc:i},"next"===this.method&&(this.arg=e),h}},t}function mt(e,t,o,i,n,a,s){try{var l=e[a](s),r=l.value}catch(e){return void o(e)}l.done?t(r):Promise.resolve(r).then(i,n)}function dt(e){return function(){var t=this,o=arguments;return new Promise((function(i,n){var a=e.apply(t,o);function s(e){mt(a,i,n,s,l,"next",e)}function l(e){mt(a,i,n,s,l,"throw",e)}s(void 0)}))}}function ut(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function pt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(o),!0).forEach((function(t){_t(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ut(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _t(e,t,o){return(t=ft(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ft(e){var t=ht(e,"string");return"symbol"==rt(t)?t:t+""}function ht(e,t){if("object"!=rt(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=rt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var vt={name:"page",mixins:[Je["a"]],components:{MoldManagement:et["a"],OrderOpening:Ze["a"],TitleWithLine:Xe["a"],draggable:l.a,FormItem:E,FormTable:B,RightPanel:Fe,renderForm:Ye["default"],ColumnFormTable:oe,posedPhotos:g["a"]},computed:pt({isAssessForm:function(){return this.code===this.FIXED_FORM_CODE.TREATMENT_ASSESS}},Object(a["b"])({template_dialog:"design/template_dialog"})),data:function(){return{allowDragging:!0,disabledSave:!1,hospitalName:this.$store.state.user.hospital_name||"",formName:this.$route.query.name||"",code:this.$route.query.code||"",tabName:"custom",activeLibrary:"comLibryay",name:"",templateData:{},presetList:[],componentsList:[],tempComponents:[],layoutList:[],baseList:[],draggerItem:{status:!1,item:{},form:{},to:{}},formList:[],tempList:null,resetList:[],activeCom:{},selectRow:"",totalSpan:0,connectList:[],connectDialog:!1,connectDialogTitle:"",connectComsList:[],isIndeterminate:!1,checkAllComs:!1,checkedComs:[],currentSpeComList:[],printViewType:!1,checkIsSaved:!0,warning:!1,is_has_template:!1,disabledRadiotherapyRecordPull:!1,dialogTemplateConfirmVisible:!1,formLinkKeyword:""}},watch:{formList:{handler:function(e,t){},deep:!0,immediate:!0},template_dialog:{handler:function(e,t){e!==t&&0==e&&this.resetFrom()}},formLinkKeyword:{handler:function(e,t){this.debounceGetConnectingForm()},immediate:!1}},mounted:function(){this.$store.commit("design/SET_REMOTE_COUNTER",[]),this.$store.commit("design/SET_TEMPLATE_TABLE",{}),this.getList(),this.getComponents(),this.getConnectingForm(),this.$store.dispatch("user/getHospitalInfo")},methods:{isAfterLoadingClinicalGoals:C["k"],isMoldManagement:C["t"],getLayoutValue:C["i"],removeHtmlTags:function(e){return e.replace(/<[^>]*>/g,"")},getList:function(){var e=this;return dt(ct().mark((function t(){var o;return ct().wrap((function(t){while(1)switch(t.prev=t.next){case 0:o={form_code:e.$route.query.code},e.$request.post(m["a"].FORM_TEMPLATE_DESIGN,o).then((function(t){1e4===t.code&&(e.is_has_template=t.data.is_has_template,e.formList=t.data.components,e.resetList=JSON.parse(JSON.stringify(t.data.components)),e.initPresetComsUnique())})).catch((function(t){e.formList=Me.sheet_template}));case 2:case"end":return t.stop()}}),t)})))()},getConnectingForm:function(){var e=this,t={name:this.formLinkKeyword,filter_code_list:[this.code],page:1,page_size:99999};this.$request.post(m["a"].SEARCH_FORM,t).then((function(t){1e4===t.code&&(e.connectList=t.data.data.slice(0))}))},debounceGetConnectingForm:Object(tt["debounce"])((function(){this.getConnectingForm()}),200),clickLibrary:function(e){this.activeLibrary=e.name},getComponents:function(){var e=this;return dt(ct().mark((function t(){return ct().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request.post(e.API.GET_COMPONENT_LIBRARY).then((function(t){e.componentsList=t.data.slice(0),e.layoutList=t.data[0].children,e.baseList=t.data[1].children}));case 2:case"end":return t.stop()}}),t)})))()},saveForm:function(e){this.is_has_template&&!e?this.dialogTemplateConfirmVisible=!0:this.confirm(e)},handleTemplateConfirm:function(){this.confirm(!1),this.dialogTemplateConfirmVisible=!1},handleTemplateClose:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dialogTemplateConfirmVisible=!1,e&&this.$router.back(-1)},confirm:function(e){var t=this;if(this.disabledSave=!0,this.checkEmptyContainer(),0==this.checkEmptyImageComs())return this.disabledSave=!1,!1;if(!this.checkEmptyQuickOption())return this.disabledSave=!1,!1;Object(de["d"])(this.formList),this.setTableData();var o={form_template_dict:{form_code:this.$route.query.code,form_name:this.$route.query.name,components:this.formList}};setTimeout((function(){t.$request.post(m["a"].FORM_TEMPLATE_SAVE,o).then((function(o){1e4===o.code&&(t.$mtMessage.success("操作成功！"),t.checkIsSaved=!0,e&&t.$nextTick((function(){t.$refs.rightPanel.openTemplate()}))),t.disabledSave=!1})).catch((function(e){t.disabledSave=!1}))}),500)},resetFrom:function(){location.reload()},goBack:function(){var e=this;this.checkIsSaved?this.$router.back(-1):this.$confirm("表单未保存，请确认是否退出？",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),type:""}).then((function(){e.$router.back(-1)}))},addComponent:function(e,t){var o=this;("PRESET"===e.component_type_source||this.isScanDiagram(e))&&this.checkPresetComsUnique(e.component_type_code);var i=JSON.parse(JSON.stringify(e));if(e.children&&e.children.length>0&&"form"==e.component_type_code&&t){var n={need_number:e.children.length+1};this.$request.post(m["a"].GET_COMPONENT_CODE,n).then((function(t){var n=t.data.code;i.code=n[0],i.is_enable=!1;for(var a=0;a<e.children.length;a++)i.children[a].parent_code=n[0],i.children[a].code=n[a+1];o.formList.push(Qe(i,n[0],!0)),o.selectItem(i),o.hasContainer()}))}else this.$request.post(m["a"].GET_COMPONENT_CODE,{need_number:1}).then((function(t){i.code=t.data.code[0],"container"==e.component_type_code?o.formList.push(i):"remoteCounter"==e.component_type_code?(o.$store.commit("design/SET_REMOTE_COUNTER",[]),o.formList.push(Qe(i,t.data.code[0],!0,"远程控制"))):o.formList.push(Qe(i,t.data.code[0],!0)),o.selectItem(i),o.hasContainer()}))},selectThisRow:function(e){this.selectRow=e.code},clickTable:function(e){console.log("clickTable",e)},selectItem:function(e,t){var o,i=this;if(this.disabledRadiotherapyRecordPull=Object(C["x"])(e.code),e.status=t,"container"!==e.component_type_code&&t){var n=He(this.formList,e.code,[]);e.parent_code=n[n.length-2]}if("treatForm"===e.component_type_code&&e.custom&&!e.custom.hasOwnProperty("is_print")&&(e.custom.is_print=!0),Object(C["e"])(e.component_type_code)&&e.style&&!e.style.hasOwnProperty("fontSize")&&(e.style.fontSize=""),"blank"===e.component_type_code&&e.custom&&!e.custom.hasOwnProperty("height")&&(e.custom.height=""),!Object(C["m"])(e)||null!==(o=e.custom)&&void 0!==o&&o.hasOwnProperty("visible")||(e.custom.visible=Object(C["h"])(e)),Object(C["w"])(e.component_type_code)){var a={plan_info_hidden:[],beam_info_hidden:[],dose_info_hidden:[],tomo_info_hidden:[],heavy_ion_info_hidden:[]};e.custom&&0!==Object.keys(e.custom).length?e.custom=pt(pt({},a),e.custom):e.custom=a}setTimeout((function(){i.activeCom=JSON.parse(JSON.stringify(e)),e.parent_code&&(i.selectRow=e.parentCode)}),0)},isComponentsGroupPull:function(e){return"radiotherapy_record"===e.component_type_code?!this.disabledRadiotherapyRecordPull:"clinical_list"!==e.component_type_code},isScanDiagram:function(e){return Object(C["y"])(e.component_type_code)},isContainScanDiagram:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.findIndex((function(t){return e.isScanDiagram(t)}))>-1},onAddStart:function(e){console.log("onAddStart"),this.tempList=JSON.parse(JSON.stringify(this.formList))},onAddMove:function(e){console.log("onAddMove")},onAddEnd:function(e,t){var o=this;"PRESET"!==e.item._underlying_vm_.component_type_source&&!this.isScanDiagram(e.item._underlying_vm_)||"draggable-source"===e.to._prevClass||this.checkPresetComsUnique(e.item._underlying_vm_.component_type_code),this.formList=JSON.parse(JSON.stringify(this.formList)),this.hasContainer();var i=!1,n=function(e){e.code?e.children&&e.children.length>0&&e.children.forEach((function(e){n(e)})):(i=!0,o.$request.post(m["a"].GET_COMPONENT_CODE,{need_number:1}).then((function(t){o.$set(e,"code",t.data.code[0]),o.searchActiveComCode()})))};this.formList.forEach((function(e,t){n(e)})),this.setClinicalGoalData(),this.$nextTick((function(){o.limitInsertContainer()})),i||this.searchActiveComCode()},initPresetComsUnique:function(){var e=this;this.currentSpeComList=[];var t=function(o){("PRESET"===o.component_type_source||e.isScanDiagram(o))&&e.currentSpeComList.push(o.component_type_code),o.children&&o.children.length>0&&"PRESET"!==o.component_type_source&&o.children.forEach((function(e){t(e)}))};this.formList.forEach((function(e){t(e)})),setTimeout((function(){e.checkPresetComsUnique()}),0)},checkPresetComsUnique:function(e){var t=this;e&&this.currentSpeComList.push(e),this.componentsList[2].children.forEach((function(e,o){t.componentsList[2].children[o].is_used=-1!==t.currentSpeComList.indexOf(e.component_type_code)}));var o=(this.componentsList[1].children||[]).find((function(e){return t.isScanDiagram(e)}));o&&(o.is_used=-1!==this.currentSpeComList.indexOf("scan_diagram")),this.$forceUpdate()},hasContainer:function(){var e=this;this.checkIsSaved=!1;var t=!1;this.formList.forEach((function(o,i){"container"!==o.component_type_code&&e.componentsList.forEach((function(n,a){"布局控件"===n.component_type&&n.children.forEach((function(n,a){if("container"===n.component_type_code){t=!0;var s=pt({},n);s.is_container=!1,s.children=[o],e.$request.post(m["a"].GET_COMPONENT_CODE,{need_number:1}).then((function(t){s.code=t.data.code[0],"remoteCounter"==o.component_type_code&&(s.is_container=!0,s.name="远程控制",s.component_type_name="远程控制"),e.formList.splice(i,1,s),e.checkEmptyContainer()}))}}))}))})),t||this.checkEmptyContainer()},limitInsertContainer:function(){var e=this,t=!1,o=function(i,n){if(i.children&&i.children.length>0){var a=[];i.children.forEach((function(o){if(0===n)if("container"!==o.component_type_code){if("list"===o.component_type_code){var s=0;i.children.forEach((function(e){"list"===e.component_type_code&&s++})),s>=2&&!e.warning&&(e.warning=!0,t=!0,e.$message({type:"error",message:"一个容器不允许同时放置两个列表"}),setTimeout((function(){e.warning=!1}),1e3))}a.push(o)}else t=!0,e.$message({type:"error",message:"容器、列表、表格不能放置容器、列表、表格中"});else if(n>=1)if("form"!==i.component_type_code&&"column_table"!==i.component_type_code&&"clinical_goal"!==i.component_type_code||"text"!==o.component_type_code&&"image"!==o.component_type_code&&"QRCode"!==o.component_type_code&&"scan_diagram"!==o.component_type_code&&"hospital_logo_name"!==o.component_type_code&&"attachment"!==o.component_type_code&&"dicomAttachment"!==o.component_type_code&&"posed_photos"!==o.component_type_code&&"PRESET"!==o.component_type_source)if("list"!==i.component_type_code&&"radiotherapy_record"!==i.component_type_code||"PRESET"!==o.component_type_source)"list"!==i.component_type_code||"form"!==o.component_type_code&&"column_table"!==o.component_type_code&&"clinical_goal"!==o.component_type_code?"container"!==o.component_type_code&&"list"!==o.component_type_code&&"form"!==o.component_type_code&&"column_table"!==o.component_type_code&&"clinical_goal"!==o.component_type_code?a.push(o):(t=!0,e.$message({type:"error",message:"容器、列表、表格不能放置容器、列表、表格中"})):a.push(o);else{var l="radiotherapy_record"===i.component_type_code,r="diagnose"===o.component_type_code;if(l&&r)a.push(o);else{t=!0;var c=l?"radiotherapy_record_cannot_put_preset_comp":"list_cannot_put_preset_comp";e.$message({type:"error",message:e.$l(c)})}}else t=!0,e.$message({type:"error",message:"表格不支持放置自定义文本、图片、附件和预置组件"})})),i.children=[].concat(a)}i.children&&i.children.length>0&&i.children.forEach((function(e){o(e,n+1)}))};this.formList.forEach((function(e,t){o(e,0)})),t&&this.tempList&&(this.formList=JSON.parse(JSON.stringify(this.tempList)),this.initPresetComsUnique()),this.tempList=null},searchActiveComCode:function(){var e=this,t=function(o){e.activeCom.code&&(o.code===e.activeCom.code?e.selectItem(o):o.children&&o.children.forEach((function(e){t(e)})))};this.formList.forEach((function(e,o){t(e)}))},setTableData:function(e){var t=function(e,o){o&&(e.parent_code=o),e.children&&e.children.length>0&&e.children.forEach((function(e){"form"===e.component_type_code?e.is_freeze||(e.value[0]={},e.value_template=[],e.children.forEach((function(t){e.value[0][t.code]=t.value||"",e.value_template.push(_t({},t.code,t.name))}))):"column_table"!==e.component_type_code&&"clinical_goal"!==e.component_type_code||e.is_freeze||(e.value[0]={},e.value[1]={},e.value_template=[],e.children.forEach((function(t){e.value[0][t.code]=t.value||"",e.value[1][t.code]=t.value||"",e.value_template.push(_t({},t.code,t.name))})))})),e.children&&e.children.length>0&&e.children.forEach((function(o){t(o,e.code)}))},o=JSON.parse(JSON.stringify(this.formList));if(o.forEach((function(e){t(e)})),this.formList=JSON.parse(JSON.stringify(o)),e){var i=We(this.formList,this.activeCom.code,[]);this.$store.commit("design/SET_TEMPLATE_TABLE",i),this.saveForm(e)}},clearVerifyResults:function(){var e=Object(Ke["c"])(this.formList,"verify_results");e&&(e.value.value=[])},checkEmptyContainer:function(){var e=this;this.formList.forEach((function(t,o){0===t.children.length&&!1===t.is_container&&(console.log("empty container",t),e.formList.splice(o,1))}))},checkEmptyImageComs:function(){var e=this,t=!0,o=function(i){if("image"===i.component_type_code&&"built_in_image"===i.custom.image_type&&!i.value_template)return e.$message.error("图片组件未上传，请上传图片！"),t=!1,t;i.children&&i.children.length>0&&"form"!==i.component_type_code&&i.children.forEach((function(e){o(e,i.code)}))},i=JSON.parse(JSON.stringify(this.formList));return i.forEach((function(e){o(e)})),t},checkEmptyQuickOption:function(){var e,t,o=this,i=!0,n=function(e){var t,a,s;if("inputNumber"===e.component_type_code&&null!==(t=e.value_template)&&void 0!==t&&t.length){var l=e.value_template.some((function(e){return!e.label||[null,void 0,"",NaN].includes(e.value)}));l&&(o.$message.error("数字输入框组件存在空的快捷选项，请修改！"),i=!1)}i&&(null===(a=e.children)||void 0===a||null===(s=a.forEach)||void 0===s||s.call(a,n))};return null===(e=this.formList)||void 0===e||null===(t=e.forEach)||void 0===t||t.call(e,n),i},isClinicalGoalFixedColumn:function(e){return"clinical_goal_select"===e||"clinical_goal_input"===e||"clinical_goal_actual"===e||"clinical_goal_achieve"===e},setClinicalGoalData:function(){var e=this,t=function(o){return o.forEach((function(o){"clinical_goal"===o.component_type_code&&o.children.forEach((function(t){e.isClinicalGoalFixedColumn(t.component_type_code)||(t.custom.is_show=!0)})),o.children&&o.children.length>0&&t(o.children)})),o};t(this.formList)},onFormStart:function(e){console.log("onFormStart"),this.tempList=JSON.parse(JSON.stringify(this.formList))},onBaseMove:function(e){if("draggable-base"===e.from._prevClass&&e.from._prevClass!==e.to._prevClass)return!1},onMove:function(e){console.log("onMove")},onEnd:function(e){this.setClinicalGoalData(),this.hasContainer(),this.limitInsertContainer(),this.activeCom.code&&this.searchActiveComCode()},editVerifyResults:function(e){var t=Object(Ke["c"])(this.formList,"verify_results");if(t){var o=e.code,i=t.custom.children.findIndex((function(e){return e.code===o}));-1!==i&&this.$set(t.custom.children,i,e)}},editComponent:function(e){var t=this,o=function(i){if(i.code===e.code)for(var n in e)if("object"!==rt(e[n])||null===e[n]||Array.isArray(e[n]))t.$set(i,n,e[n]);else for(var a in e[n])t.$set(i[n],a,e[n][a]);else i.children&&i.children.length>0&&i.children.forEach((function(e){o(e)}))},i=function(t){if(t.code===e.parent_code){var o=Object(C["r"])(t.component_type_code)&&t.is_enable&&Object.keys(t.custom).length;t.value_template=[],o||(t.value[0]={});for(var n=0;n<t.children.length;n++)o||(t.value[0][t.children[n].code]=t.children[n].value),t.value_template.push(_t({},t.children[n].code,t.children[n].name))}else t.children&&t.children.length>0&&t.children.forEach((function(e){i(e)}))};this.formList.forEach((function(t,n){o(t),e.status&&i(t)})),e.component_type_code.startsWith("verify_results_")&&this.editVerifyResults(e)},copyCom:function(e){console.log(e,"copy this com");var t=_.cloneDeep(e);t.code="",t.parent_code="",this.addComponent(e,!0)},deleteCom:function(e){var t=this;setTimeout((function(){console.log("deleteCom:",e,t.formList),t.checkIsSaved=!1,Ue(t.formList,e.code),t.activeCom={},t.checkEmptyContainer();var o=t.currentSpeComList.indexOf(e.component_type_code);-1!==o&&t.currentSpeComList.splice(o,1),t.checkPresetComsUnique(),"remoteCounter"===e.component_type_code&&t.$store.commit("design/SET_REMOTE_COUNTER",[])}),10)},deleteRow:function(e){for(var t=e.code,o=0;o<this.formList.length;o++)this.formList[o].code===t&&this.formList.splice(o,1);this.activeCom={},this.initPresetComsUnique()},selectConnectForm:function(e){var t=this;this.$request.post(m["a"].GET_FORM_COMPONENT_INFO,{form_code:e.code}).then((function(o){1e4===o.code&&(t.connectComsList=o.data.slice(0),t.isIndeterminate=!1,t.checkAllComs=!1,t.checkedComs=[],t.connectDialog=!0,t.connectDialogTitle=e.name)}))},isNoIndent:function(e){var t=e.component_type_code,o=e.name;return"list"===t&&!o},getInnerContainer:function(){var e,t,o=null===(e=this.componentsList)||void 0===e||null===(t=e.find)||void 0===t||null===(t=t.call(e,(function(e){return"布局控件"===e.component_type})))||void 0===t||null===(t=t.children)||void 0===t?void 0:t.find((function(e){return"container"===e.component_type_code}));if(o){var i=Object(tt["cloneDeep"])(o);return i.is_container=!1,i}},selectConnectComs:function(){var e,t=this;if(null!==(e=this.checkedComs)&&void 0!==e&&e.length){var o=this.getInnerContainer();if(o){var i=[];this.checkedComs.forEach((function(e,n){var a,s;if(null!==(a=e.custom)&&void 0!==a&&a.relatedVisible&&delete e.custom.relatedVisible,!i.length||"list"===e.component_type_code){var l=Object(tt["cloneDeep"])(o);return l.children.push(Object(tt["cloneDeep"])(e)),void i.push(l)}"list"===(null===(s=t.checkedComs[n-1])||void 0===s?void 0:s.component_type_code)&&i.push(Object(tt["cloneDeep"])(o)),i[i.length-1].children.push(Object(tt["cloneDeep"])(e))})),this.$request.post(m["a"].GET_COMPONENT_CODE,{need_number:i.length}).then((function(e){for(var o in i)i[o].code=e.data.code[o];t.formList=[].concat(ot(t.formList),i),t.connectDialog=!1}))}else this.connectDialog=!1}else this.connectDialog=!1},setTemplate:function(){this.setTableData("setTemplate")},clickComLabel:function(e){var t=this.checkedComs.find((function(t){return t.code===e.code}));if(console.log("clickComLabel",t),t)for(var o=0;o<this.checkedComs.length;o++)this.checkedComs[o].code===e.code&&(this.checkedComs.splice(o,1),this.handleCheckConnectComs(this.checkedComs));else this.checkedComs.push(e),this.handleCheckConnectComs(this.checkedComs)},handleCheckAllChangeBtn:function(){this.checkAllComs=!this.checkAllComs,this.handleCheckAllChange(this.checkAllComs)},handleCheckAllChange:function(e){console.log("handleCheckAllChange",e),this.checkedComs=e?this.connectComsList.slice(0):[],this.isIndeterminate=!1},handleCheckConnectComs:function(e){var t=e.length;this.checkAllComs=t===this.connectComsList.length,this.isIndeterminate=t>0&&t<this.connectComsList.length},printView:function(){var e=this,t=function(){e.$nextTick((function(){e.$store.commit("design/SET_IS_PRINT",!1),e.printViewType=!1}))};this.$nextTick((function(){var o={components:JSON.parse(JSON.stringify(e.formList))};e.printViewType=!0,e.$store.commit("design/SET_IS_PRINT",!0),e.$nextTick((function(){e.$refs.render.init(Object(Ke["p"])(o)),e.openPrintV2(e.$refs.print,t)}))}))}}},bt=vt,yt=(o("39d6"),o("25cb"),Object(N["a"])(bt,i,n,!1,null,"510ca1d6",null));t["default"]=yt.exports},fca4:function(e,t,o){},fdee:function(e,t,o){}}]);