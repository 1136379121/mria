(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fade34b"],{"017b":function(t,e,n){"use strict";n("a2c8")},"0835":function(t,e,n){"use strict";n("d7db")},"151b":function(t,e,n){"use strict";n("7059")},1959:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:"叫号屏通知",visible:t.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,"before-close":t.cancel,width:"28%"},on:{"update:visible":function(e){t.visible=e}}},[r("div",{staticClass:"screenMessage"},[r("div",{staticClass:"current"},[r("div",{staticClass:"label"},[t._v("\n        当前通知\n      ")]),t._v(" "),r("div",{staticClass:"current-content"},[r("div",[t._v("\n          "+t._s(t.current||"--")+"\n        ")]),t._v(" "),t.current?r("mt-button",{staticClass:"btn",attrs:{type:"text"},on:{click:t.callBackMsg}},[t._v("撤销通知")]):t._e()],1)]),t._v(" "),r("div",{staticClass:"label"},[t._v("\n      新通知\n    ")]),t._v(" "),r("div",{staticClass:"form"},[r("div",{staticClass:"form-inner"},[r("div",{staticClass:"form-inner-box"},[r("div",{staticClass:"form-label"},[t._v("\n            类型\n          ")]),t._v(" "),r("div",{staticClass:"form-inner-radio"},[r("div",{staticClass:"content",on:{click:function(e){t.notice_location="down"}}},[t._v("\n              屏幕下方通知\n              "),r("img",{staticClass:"icon",attrs:{src:n("f549")}}),t._v(" "),r("el-radio",{attrs:{label:"down"},model:{value:t.notice_location,callback:function(e){t.notice_location=e},expression:"notice_location"}},[t._v("\n                11\n              ")])],1),t._v(" "),r("div",{staticClass:"content",on:{click:function(e){t.notice_location="middle"}}},[t._v("\n              屏幕中间通知\n              "),r("img",{staticClass:"icon",attrs:{src:n("0400")}}),t._v(" "),r("el-radio",{attrs:{label:"middle"},model:{value:t.notice_location,callback:function(e){t.notice_location=e},expression:"notice_location"}},[t._v("1 ")])],1)])]),t._v(" "),r("div",{staticClass:"form-inner-box"},[r("div",{staticClass:"form-label"},[t._v("\n            通知内容\n          ")]),t._v(" "),r("el-input",{staticClass:"form-inner-input",attrs:{type:"textarea","show-word-limit":"",maxlength:"200"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])])]),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("mt-button",{staticClass:"btn",attrs:{type:"subprimary"},on:{click:t.cancel}},[t._v(t._s(t.$l("cancel")))]),t._v(" "),r("mt-button",{staticClass:"btn",on:{click:t.submitSet}},[t._v("发 布")])],1)])},o=[],a={name:"screenMessage",data:function(){return{visible:!1,current:"",content:"",notice_location:""}},props:{room:{type:String,default:""}},methods:{init:function(){this.visible=!0,this.notice_location="down",this.getDetail()},getDetail:function(){var t=this,e={room_code:this.room};this.$request.post(this.API.GET_ROOM_DETAIL_INFO,e).then((function(e){1e4===e.code&&(t.current=e.data.notice_content,t.notice_location=e.data.notice_location||"down")}))},submitSet:function(){var t=this,e={room_code:this.room,notice_content:this.content,notice_location:this.notice_location};this.$request.post(this.API.SET_SCREEN_NOTICE_CONFIG,e).then((function(e){1e4===e.code&&(t.$message.success("操作成功！"),t.current=t.content,t.content="")})),this.visible=!1},callBackMsg:function(){var t=this;this.$confirm("确认撤回此通知？",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),type:""}).then((function(){t.notice_location="down";var e={room_code:t.room,notice_content:"",notice_location:t.notice_location};t.$request.post(t.API.SET_SCREEN_NOTICE_CONFIG,e).then((function(e){1e4===e.code&&(t.current="",t.content="",t.$message.success("操作成功！"))}))}))},cancel:function(){this.visible=!1}}},i=a,s=(n("6c71"),n("2877")),c=Object(s["a"])(i,r,o,!1,null,"6c7f49b2",null);e["a"]=c.exports},"1a96":function(t,e,n){t.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)"}},"1bea":function(t,e,n){},"381d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"queueList"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.partLoading,expression:"partLoading"}],ref:"table",staticClass:"table queueList-table",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255,255,255,0)",data:t.list,"row-key":"patient_apply_code",height:"100"}},["checkedIn"===t.type?r("el-table-column",{attrs:{type:"index",prop:"index",width:"25","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"拖拽调整顺序",placement:"left"}},[r("img",{staticClass:"move",attrs:{src:n("d261")}})]),t._v(" "),r("span",{staticClass:"tableIndex"},[t._v("\n            "+t._s(e.$index+1)+"\n          ")])],1)]}}],null,!1,4072799857)}):r("el-table-column",{attrs:{type:"index",prop:"index",width:"25","show-overflow-tooltip":""}}),t._v(" "),t._l(t.visibleColumns,(function(e,o){return r("el-table-column",{key:e.column_code+o,attrs:{prop:e.column_code,label:e.column_name,"min-width":t.columnMinWidth(e),"show-overflow-tooltip":"name"!==e.column_code},scopedSlots:t._u([{key:"default",fn:function(o){return["name"===e.column_code?r("div",{staticClass:"tablename"},[r("mt-tablename",{attrs:{scope:o,label:t.labelList,showPatientDetail:!0,type:"index",showCount:3,"auto-collapse":"","is-mini":"",sourceType:t.sourceType,timesMark:t.getDivideTreatInfo(o.row),selfTooltip:t.getDivideTreatInfo(o.row)||" "},on:{update:function(e){return t.readList()}}})],1):"apply_at"===e.column_code?["period"!==o.row.apply_mode?r("span",[t._v("\n            "+t._s(t.formatTime(o.row.apply_at))+"\n          ")]):t._e(),t._v(" "),"period"===o.row.apply_mode?r("span",{staticClass:"period",class:"period-"+t.colorClass[t.timePeriod(o.row)]},[t._v("\n            "+t._s(t.timePeriod(o.row))+"\n          ")]):t._e()]:"sign_at"===e.column_code?[t._v("\n          "+t._s(t.formatTime(o.row.sign_at,!0))+"\n        ")]:"record_time"===e.column_code?[t._v("\n          "+t._s(t.formatTime(o.row.record_time))+"\n        ")]:"hospital_citizen_name"===e.column_code?[t._v(t._s(o.row.hospital_citizen_name||"--"))]:"divide_treat_info"===e.column_code?r("div",{staticClass:"divide-treat-info-wrapper"},[r("div",[t._v(t._s(o.row.divide_treat_info))])]):"total_payment_amount"===e.column_code?r("div",{staticClass:"total-payment-amount-wrapper"},[o.row.total_payment_amount?r("div",{staticClass:"total-payment-amount-and-owed"},[r("div",{staticClass:"total-payment-amount"},[t._v(t._s(o.row.total_payment_amount))]),t._v(" "),o.row.total_payment_amount-o.row.divide_treat_info_real<0?r("div",{staticClass:"total-payment-amount-owed"},[t._v("\n              "+t._s(o.row.total_payment_amount-o.row.divide_treat_info_real)+"\n            ")]):t._e()]):t._e(),t._v(" "),r("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$l("charge_remarks"),expression:"$l('charge_remarks')"}],staticClass:"edit-total-payment-amount-icon",attrs:{src:n("ba77")},on:{click:function(e){return t.handleEditTotalPaymentAmount(o.row)}}})]):"mold_transfer_status"===e.column_code?[o.row.mold_transfer_status&&o.row.mold_transfer_status.label?r("div",{staticClass:"mold-transfer-status-wrapper"},[r("span",[t._v(t._s(o.row.mold_transfer_status.label))]),t._v(" "),r("el-popover",{attrs:{placement:"bottom-end",trigger:"hover","visible-arrow":!1}},[r("div",{staticClass:"mold-transfer-detail-wrapper"},[r("div",{staticClass:"mold-transfer-detail-item"},[r("span",{staticClass:"mold-transfer-detail-title"},[t._v("\n                    "+t._s(t.$l("mold_out_or_in_place",{action:1===o.row.mold_transfer_status.detail.type?t.$l("take_out"):t.$l("take_in")}))+":\n                  ")]),t._v(" "),r("span",{staticClass:"mold-transfer-detail-value"},[t._v("\n                    "+t._s(o.row.mold_transfer_status.detail.take_place||"--")+"\n                  ")])]),t._v(" "),r("div",{staticClass:"mold-transfer-detail-item"},[r("span",{staticClass:"mold-transfer-detail-title"},[t._v("\n                    "+t._s(t.$l("executing_robots"))+":\n                  ")]),t._v(" "),r("span",{staticClass:"mold-transfer-detail-value"},[t._v("\n                    "+t._s(o.row.mold_transfer_status.detail.robot_name||"--")+"\n                  ")])]),t._v(" "),r("div",{staticClass:"mold-transfer-detail-item"},[r("span",{staticClass:"mold-transfer-detail-title"},[t._v("\n                    "+t._s(t.$l("mold_target_place"))+":\n                  ")]),t._v(" "),r("span",{staticClass:"mold-transfer-detail-value"},[t._v("\n                    "+t._s(o.row.mold_transfer_status.detail.target_place||"--")+"\n                  ")])])]),t._v(" "),r("img",{staticClass:"mold-transfer-detail-icon",attrs:{slot:"reference",src:n("2548")},slot:"reference"})])],1):r("span",[t._v("--")])]:[t._v(t._s(o.row[e.column_code]))]]}}],null,!0)})})),t._v(" "),r("el-table-column",{attrs:{prop:"operator_code",label:t.$l("action"),width:t.operationColumnWidth,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isTreatment?["checkedIn"==t.type?r("mt-button",{attrs:{disabled:t.callBtnDisabled,type:"table"},on:{click:function(n){return t.callHim(e.row,t.type)}}},[t._v("\n            "+t._s(t.$l("call"))+"\n          ")]):t._e(),t._v(" "),"checkedOver"==t.type?r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.reCheck(e.row)}}},[t._v("\n            "+t._s(t.$l("re_checkin"))+"\n          ")]):t._e(),t._v(" "),"treatOver"==t.type?r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.showTeart(e.row,t.type)}}},[t._v("\n            "+t._s(t.$l("view"))+"\n          ")]):t._e(),t._v(" "),"treatOver"==t.type?r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.treatRemark(e.row)}}},[t._v("\n            "+t._s(t.$l("treatRemark"))+"\n          ")]):t._e(),t._v(" "),"checkedIn"===t.type||"checkedOver"===t.type?r("el-dropdown",{staticClass:"more-dropdown",attrs:{trigger:"hover",size:"medium"},on:{command:t.handleDropdownCommand}},[r("mt-button",{attrs:{type:"table"}},[t._v(t._s(t.$l("more"))+"\n              "),r("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),r("el-dropdown-menu",{staticClass:"more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},["checkedIn"===t.type?r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"cancelCheckIn"}}},[t._v(t._s(t.$l("cancel_checkin")))]):t._e(),t._v(" "),"checkedOver"===t.type?r("el-dropdown-item",{attrs:{command:{data:{row:e.row,type:t.type},operation:"view"}}},[t._v(t._s(t.$l("view")))]):t._e(),t._v(" "),r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"treatRemark"}}},[t._v(t._s(t.$l("treatRemark")))]),t._v(" "),"checkedIn"===t.type&&t.intelligentWarehousing?r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"moldOut"}}},[t._v("\n                "+t._s(t.$l("mold_out"))+"\n              ")]):t._e()],1)],1):t._e()]:["checkedIn"==t.type?[t.intelligentWarehousing?t._e():r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.cancelCheckIn(e.row)}}},[t._v("\n              "+t._s(t.$l("cancel_checkin"))+"\n            ")]),t._v(" "),r("mt-button",{attrs:{disabled:t.callBtnDisabled,type:"table"},on:{click:function(n){return t.callHim(e.row,t.type)}}},[t._v("\n              "+t._s(t.$l("call"))+"\n            ")]),t._v(" "),t.intelligentWarehousing?r("el-dropdown",{staticClass:"more-dropdown",attrs:{trigger:"hover",size:"medium"},on:{command:t.handleDropdownCommand}},[r("mt-button",{attrs:{type:"table"}},[t._v("\n                "+t._s(t.$l("more"))+"\n                "),r("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),r("el-dropdown-menu",{staticClass:"more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"cancelCheckIn"}}},[t._v("\n                  "+t._s(t.$l("cancel_checkin"))+"\n                ")]),t._v(" "),r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"moldOut"}}},[t._v("\n                  "+t._s(t.$l("mold_out"))+"\n                ")])],1)],1):t._e()]:t._e(),t._v(" "),"checkedOver"==t.type?r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.reCheck(e.row)}}},[t._v("\n            "+t._s(t.$l("re_checkin"))+"\n          ")]):t._e(),t._v(" "),"checkedOver"==t.type&&"treat"==t.queueType||"treatOver"==t.type?r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.showTeart(e.row,t.type)}}},[t._v("\n            "+t._s(t.$l("view"))+"\n          ")]):t._e()]]}}])},[t._v(" "),r("template",{slot:"header"},[r("span",[t._v(t._s(t.$t("action")))]),t._v(" "),t.canSetColumns?r("column-settings",{attrs:{columns:t.columns},on:{updated:t.columnsUpdate}}):t._e()],1)],2)],2)],1)},o=[],a=(n("a4d3"),n("e01a"),n("b636"),n("d28b"),n("944a"),n("d9e2"),n("99af"),n("4de4"),n("a630"),n("e260"),n("14d9"),n("13d5"),n("fb6a"),n("a434"),n("b0c0"),n("e9f5"),n("910d"),n("7d54"),n("9485"),n("0c47"),n("23dc"),n("3410"),n("b64b"),n("1f68"),n("131a"),n("d3b7"),n("e6cf"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3"),n("159b"),n("ddb0"),n("365c")),i=n("aa47"),s=n("73c0");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function m(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),s=new F(r||[]);return o(i,"_invoke",{value:S(t,n,s)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=m;var _="suspendedStart",f="suspendedYield",h="executing",v="completed",g={};function y(){}function b(){}function w(){}var k={};d(k,i,(function(){return this}));var C=Object.getPrototypeOf,$=C&&C(C(N([])));$&&$!==n&&r.call($,i)&&(k=$);var x=w.prototype=y.prototype=Object.create(k);function L(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,s){var l=p(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(l.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,n,r){var o=_;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===_)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=p(e,n,r);if("normal"===l.type){if(o=r.done?v:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=w,o(x,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},L(T.prototype),d(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(m(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(x),d(x,u,"Generator"),d(x,i,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function u(t){return _(t)||p(t)||m(t)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function p(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){h(a,r,o,i,s,"next",t)}function s(t){h(a,r,o,i,s,"throw",t)}i(void 0)}))}}var g=n("c1df"),y={name:"treatTable",components:{ColumnSettings:s["a"]},data:function(){return{cardImageRulk:"fill",callBtnDisabled:!1,colorList:["blue","green","purple","azure","orange","blue","green","purple","azure","orange","blue","green","purple","azure","orange","blue","green","purple","azure","orange","blue","green","purple","azure","orange","blue","green","purple","azure","orange","blue","green","purple","azure","orange","blue","green","purple","azure","orange"],colorClass:{},labelList:[],allow_drag:!0,partLoading:!1,intelligentWarehousing:SETTING.intelligentWarehousing}},props:{columns:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}},room:{type:String,default:""},date:{type:String,default:""},word:{type:String,default:""},type:{type:String,default:""},queueType:{type:String,default:"treat"},currUser:{type:Object,default:function(){}},wrong:{type:Array,default:function(){return[]}},allowDrag:{type:Boolean,default:!1},canSetColumns:{type:Boolean,default:!1},sourceType:{type:String,default:""}},computed:{visibleColumns:function(){return this.columns.filter((function(t){return t.status}))},operationColumnWidth:function(){switch(this.type){case"checkedIn":return this.isTreatment||this.intelligentWarehousing?110:126;case"checkedOver":return this.isTreatment?140:90;case"treatOver":return this.isTreatment?126:80;default:return 100}},isTreatment:function(){return"TreatCall"===this.$route.name||"treatCall"===this.sourceType}},watch:{currUser:{handler:function(t,e){t&&t.patient_apply_code||this.wrong.length>0&&this.wrong[0].is_wrong?this.callBtnDisabled=!0:this.callBtnDisabled=!1},immediate:!0},list:{handler:function(t,e){t&&this.setPeriodColor()},immediate:!0}},created:function(){this.getLabelList()},mounted:function(){this.allowDrag&&this.setCheckinSort()},methods:{columnMinWidth:function(t){var e=t.column_code;switch(e){case"name":return"treatCall"===this.sourceType?220:200;case"sign_at":case"record_time":case"node_name":return 80;case"diagnoses":return 90;case"divide_treat_info":return 85;case"apply_at":return 115;case"recorder_name":case"operator_name":return 95;case"event_no":return 120;case"total_payment_amount":return 105;case"admission_number":case"outpatient_number":return 120;case"phone":case"medical_department":return 110;case"doctor_name":return 80;case"patient_type":return 80;case"mold_transfer_status":return 115;default:return 100}},checkin:function(t){},reCheck:function(t){var e=this,n={patient_apply_code:t.patient_apply_code,action:1,sign_date:this.date};this.$request.post(a["a"].POSITION_PATIENT_ACTION,n).then((function(t){1e4===t.code&&e.$mtMessage.success(e.$l("re_report_success"))}))},cancelCheckIn:function(t){var e=this,n={patient_apply_code:t.patient_apply_code,action:0,sign_date:this.date};this.$request.post(a["a"].POSITION_PATIENT_ACTION,n).then((function(t){1e4===t.code&&e.$mtMessage.success(e.$l("cancel_report_success"))}))},toDetail:function(t){this.$router.push("/flow-system/patient?id="+t.id_number+"&pd="+t.patient_visit_code+"&fc="+t.patient_treatflow_code)},showTeart:function(t,e){this.$emit("showTreat",t,e)},treatRemark:function(t){this.$emit("treatRemark",t)},moldOut:function(t){this.$emit("moldOut",t)},setCheckinSort:function(){var t=this;if(!this.allowDrag)return!1;var e=this.$refs.table.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.checkedInTable=i["a"].create(e,{ghostClass:"checkedIn-ghost",setData:function(t){t.setData("Text","")},onEnd:function(e){var n=t.list.splice(e.oldIndex,1)[0];if(t.list.splice(e.newIndex,0,n),e.oldIndex!==e.newIndex){var r={old_order_num:e.oldIndex+1,new_order_num:e.newIndex+1,room_code:t.room,query_date:t.date,search_word:t.word,menu_code:t.$route.name};t.$request.post(a["a"].DRAG_PATIONE_ACTION,r).then((function(e){1e4===e.code&&t.$mtMessage.success(t.$l("operation_successful"))}))}}})},nameFormatter:function(t){return t.name+" / "+t.gender+" / "+t.age},formatTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.length>10?t.substring(11,e?19:16):t},getDivideTreatInfo:function(t){if("treatOver"===this.type||"treatCall"!==this.sourceType)return"";if(1===t.divide_treat_info_real)return this.$l("first_time");var e=t.divide_treat_info_total-t.divide_treat_info_real;return 1===e?this.$l("remaining_2_times"):0===e?this.$l("last_time"):""},timePeriod:function(t){return g(t.apply_at).format("HH:mm")+"-"+g(t.apply_end_at).format("HH:mm")},handleEditTotalPaymentAmount:function(t){this.$emit("editTotalPaymentAmount",t)},setPeriodColor:function(){var t=[];this.colorClass={},this.list.forEach((function(e){var n=g(e.apply_at).format("HH:mm")+"-"+g(e.apply_end_at).format("HH:mm");t.indexOf(n)<0&&t.push(n)}));for(var e=0;e<t.length;e++)this.colorClass[t[e]]=this.colorList[e]},callHim:function(t,e){var n=this,r={room_code:this.room,patient_apply_code:t.patient_apply_code,position_date:this.date};this.$request.post(a["a"].CALL_ONE_PATIENT,r).then((function(t){if(1e4===t.code){n.$mtMessage.success(n.$l("operation_successful"));var e=t.data,r=e.remind,o=e.remind_data;r&&n.$emit("label-remind",o)}}))},readList:function(){this.$emit("readList")},getLabelList:function(){var t=this;return v(l().mark((function e(){var n;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.post(t.API.GET_LABEL_TYPES);case 2:n=e.sent,1e4===n.code&&(t.labelList=n.data.reduce((function(t,e){return t=[].concat(u(t),[{value:Object.keys(e)[0],label:e[Object.keys(e)]}]),t}),[]));case 4:case"end":return e.stop()}}),e)})))()},columnsUpdate:function(t){this.$emit("columnsUpdate",{tabName:this.type,newColumns:t})},setLoadingVisible:function(t,e){this.partLoading=e},doLayout:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.table;n&&n.doLayout(),e.$nextTick((function(){e.setLoadingVisible(t,!1)}))}))},handleDropdownCommand:function(t){var e=t.data,n=t.operation;e&&("cancelCheckIn"===n&&this.cancelCheckIn(e),"view"===n&&this.showTeart(e.row,e.type),"treatRemark"===n&&this.treatRemark(e),"moldOut"===n&&this.moldOut(e))}}},b=y,w=(n("bb53"),n("9d0f"),n("2877")),k=Object(w["a"])(b,r,o,!1,null,"9af77e58",null);e["a"]=k.exports},"3bfac":function(t,e,n){},"45ad":function(t,e,n){"use strict";n("b307")},"6c71":function(t,e,n){"use strict";n("3bfac")},"6e8a":function(t,e,n){},7059:function(t,e,n){},"746a":function(t,e,n){t.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)"}},7584:function(t,e,n){},"9b8e":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"room-wrong"},[t._v("\n    "+t._s(t.$l("room_wrong"))+"\n    "),n("div",{staticClass:"mt-switch"},[n("el-switch",{staticClass:"switch",attrs:{disabled:!t.room,value:t.value,activeText:t.$l("on"),inactiveText:t.$l("off"),"active-color":"#d46e6e"},on:{change:t.handleChange}})],1)]),t._v(" "),n("room-wrong-confirm",{ref:"roomWrongConfirm"})],1)},o=[],a=n("365c"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.$l("tips"),visible:t.dialogVisible,"before-close":t.handleCancel,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"512px","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"warning"},[n("div",{staticClass:"title"},[n("div",[t._v(t._s(t.mainMessage))])]),t._v(" "),n("p",{staticClass:"txt"},[t._v("\n      "+t._s(t.subMessage)+"\n    ")])]),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("mt-button",{attrs:{type:"submain"},on:{click:t.handleCancel}},[t._v(t._s(t.$l("cancel")))]),t._v(" "),n("mt-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v(t._s(t.$l("confirm")))]),t._v(" "),n("mt-button",{attrs:{type:"primary"},on:{click:t.handleConfirmAndNotice}},[t._v(t._s(t.$l("confirm_and_publish_notification")))])],1)])},s=[],c=(n("d3b7"),n("e6cf"),{name:"RoomWrongConfirm",data:function(){return{mainMessage:"",subMessage:"",dialogVisible:!1,resolveFunc:null,rejectFunc:null}},methods:{init:function(t,e){var n=this;return this.mainMessage=t,this.subMessage=e,this.dialogVisible=!0,new Promise((function(t,e){n.resolveFunc=t,n.rejectFunc=e}))},handleCancel:function(){this.dialogVisible=!1,this.rejectFunc()},handleConfirm:function(){this.dialogVisible=!1,this.resolveFunc("confirm")},handleConfirmAndNotice:function(){this.dialogVisible=!1,this.resolveFunc("notice")}}}),l=c,u=(n("45ad"),n("2877")),d=Object(u["a"])(l,i,s,!1,null,"5be93ca4",null),m=d.exports,p={name:"RoomWrongSwitch",components:{RoomWrongConfirm:m},props:{value:{type:Boolean,default:!1},room:{type:String,default:"",required:!0}},data:function(){return{}},methods:{handleChange:function(){var t=this,e=this.value?"off_room_wrong_confirm":"on_room_wrong_confirm",n=this.value?"off_room_wrong_tip":"on_room_wrong_tip";this.$refs.roomWrongConfirm.init(this.$l(e),this.$l(n)).then((function(e){var n=!t.value;t.$emit("input",n),t.setRoomWrongStatus(n,"confirm"===e),"notice"===e&&t.$emit("showScreenMessage")})).catch((function(){}))},setRoomWrongStatus:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={room_code:this.room,is_wrong_flag:t};this.$request.post(a["a"].SET_ROOM_WRONG_STATUS,r).then((function(t){1e4===t.code&&(n&&e.$message.success(t.msg),e.$emit("updateRoomList",!1))}))}}},_=p,f=(n("151b"),Object(u["a"])(_,r,o,!1,null,"d2d1df6a",null));e["a"]=f.exports},"9d0f":function(t,e,n){"use strict";n("cec8")},"9fea":function(t,e,n){"use strict";n("1a96")},a2c8:function(t,e,n){},a87b:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={data:function(){return{total:0,page:1,pageSize:20,pageSizes:[20,50,100],pageLayout:"sizes, prev, pager, next"}},methods:{readList:function(){},handleSizeChange:function(t){this.pageSize=t,this.page=1,this.readList()},handleCurrentChange:function(t){this.page=t,this.readList()}}}},a8b8:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"patientNow",class:t.wrong.length>0&&t.wrong[0].is_wrong?"errorNow":""},[t.currUser.name&&(0==t.wrong.length||t.wrong.length>0&&!t.wrong[0].is_wrong)?r("div",{staticClass:"patientNow-nowCard"},[r("div",{staticClass:"info-wrapper"},[r("div",{staticClass:"icon",class:{risk:t.currUser.is_high_risk}},[t.currUser.head_img.length>0?r("el-image",{attrs:{src:t.currUser.head_img,id:"headImg",fit:"cover"}}):r("div",{staticClass:"icontext",class:{blue_bg:t.currUser.gender===t.$l("male"),green_bg:t.currUser.gender!==t.$l("male")&&t.currUser.gender!==t.$l("female"),pure_bg:t.currUser.gender===t.$l("female")}},[r("span",[t._v("\n            "+t._s(t.currUser.name.replace(/(^\s*)|(\s*$)/g,"").substr(0,1))+"\n          ")])]),t._v(" "),t.currUser.is_high_risk?r("span",{staticClass:"risk-text",on:{click:function(e){e.stopPropagation(),t.currUser.is_high_risk&&t.openDangerLevel()}}},[t._v("\n          "+t._s(t.$l("high_risk"))+"\n        ")]):t._e(),t._v(" "),r("div",{staticClass:"operate-picture-wrapper",style:{visibility:"hidden"}},[r("img",{staticClass:"operate-picture-bg",attrs:{src:n("1144")}}),t._v(" "),r("el-popover",{attrs:{trigger:"hover",placement:"right-start","popper-class":"operate-picture-popover",offset:-4}},[r("div",{staticClass:"operate-picture-list"},[r("div",{staticClass:"operate-picture-item",on:{click:t.takePhoto}},[r("img",{staticClass:"operate-picture-icon",attrs:{src:n("cd47")}}),t._v(" "),r("span",[t._v(t._s(t.$l("take_photos")))])]),t._v(" "),r("div",{staticClass:"operate-picture-item",on:{click:t.uploadPatientPicture}},[r("img",{staticClass:"operate-picture-icon",attrs:{src:n("9da0")}}),t._v(" "),r("span",[t._v(t._s(t.$l("local_upload")))])]),t._v(" "),r("div",{class:["operate-picture-item",t.currUser.head_img?"":"disable-operate"],on:{click:t.downloadPatientPicture}},[r("img",{staticClass:"operate-picture-icon",attrs:{src:n("f1e6")}}),t._v(" "),r("span",[t._v(t._s(t.$l("download_profile_picture")))])])]),t._v(" "),r("img",{staticClass:"operate-picture",attrs:{slot:"reference",src:n("c048")},slot:"reference"})])],1)],1),t._v(" "),r("div",{staticClass:"info"},[r("div",{staticClass:"info-label"},[r("div",{staticClass:"base-info"},[r("span",[t._v(t._s(t.currUser.name||"--")+" / "+t._s(t.currUser.gender||"-")+" /\n              "+t._s(t.currUser.age||"-"))])]),t._v(" "),t.currUser.is_confirmed?r("div",{staticClass:"faceid"},[r("img",{attrs:{src:n("1dcf")}})]):t._e(),t._v(" "),t.currUser.patient_type?r("div",{staticClass:"info-patient-type"},[t._v(t._s(t.currUser.patient_type))]):t._e(),t._v(" "),r("span",{staticClass:"gapSpace"}),t._v(" "),t.currUser.node_name?r("span",{staticClass:"step"},[t._v(t._s(t.currUser.node_name))]):t._e(),t._v(" "),t.currUser.node_name&&t.currUser.label_info.length?r("span",{staticClass:"gap"}):t._e(),t._v(" "),r("mt-tablename",{staticClass:"current-tag",attrs:{scope:{row:t.currUser},label:t.labelList,simplify:!1,inCurrentCard:!0,labelonly:"",showCount:2,autoCollapse:!1,type:"index"},on:{update:function(e){return t.$emit("readList",!0)}}}),t._v(" "),r("div",{staticClass:"info-detailBtn",on:{click:t.goDeatil}},[t._v("\n            "+t._s(t.$l("more_details"))+"\n          ")])],1),t._v(" "),r("div",{staticClass:"info-time"},[t.showFlowInfo?r("div",[r("span",[t._v(t._s(t.$l("technological_process"))+"：")]),t._v(" "),r("span",{staticClass:"content"},[t._v(t._s(t.currUser.flow_name||"--"))])]):t._e(),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("admission_number"))+"：")]),t._v(" "),r("span",{staticClass:"content"},[t._v(t._s(t.currUser.admission_number||"--"))])]),t._v(" "),r("div",[r("span",[t._v(t._s(t.$t("outpatient_number"))+"：")]),t._v(" "),r("span",{staticClass:"content"},[t._v(t._s(t.currUser.outpatient_number||"--"))])]),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("event_no"))+"：")]),t._v(" "),r("span",{staticClass:"content"},[t._v(" "+t._s(t.currUser.event_no||"--"))])]),t._v(" "),t.isTreatment?r("div",[r("span",[t._v(t._s(t.$l("patient_id2"))+"：")]),t._v(" "),r("span",{staticClass:"content"},[t._v(" "+t._s(t.currUser.patient_id||"--"))])]):t._e(),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("plan_name"))+"：")]),t._v(" "),r("span",{staticClass:"content"},[t.currUser.plan_name.length>0?t._l(t.currUser.plan_name,(function(e,n){return r("span",{key:n,staticClass:"plan-name"},[t._v("\n                  "+t._s(e+(n!==t.currUser.plan_name.length-1?",":""))+"\n                ")])})):[t._v(t._s("--"))]],2)]),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("time_of_appointment"))+"： ")]),t._v(" "),r("span",{staticClass:"content"},[t._v(" "+t._s(t.formatTime(t.currUser.apply_at)))])]),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("checkin_time"))+"： ")]),t._v(" "),r("span",{staticClass:"content"},[t._v(" "+t._s(t.formatTime(t.currUser.sign_at)))])]),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("operator"))+"： ")]),t._v(" "),r("span",{staticClass:"content"},[t._v(" "+t._s(t.currUser.operator_name))])]),t._v(" "),r("div",[r("span",[t._v(t._s(t.$l("inpatient_area"))+"： ")]),t._v(" "),r("span",{staticClass:"content"},[t._v("\n              "+t._s(t.currUser.hospital_citizen_name||"--"))])]),t._v(" "),t.showPaymentAmount?r("div",[r("span",[t._v(t._s(t.$l("payment_amount"))+"： ")]),t._v(" "),r("span",{staticClass:"content"},[t._v(" "+t._s(t.paymentAmount))])]):t._e()]),t._v(" "),t.isTreatment?[t.currUser.treatment_remarks?r("div",{staticClass:"treat-remark-wrapper"},[r("img",{staticClass:"treat-remark-icon",attrs:{src:n("e214"),alt:t.$l("treatRemark")}}),t._v(" "),r("span",{staticClass:"treat-remark-content"},[t._v("\n              "+t._s(t.currUser.treatment_remarks)+"\n            ")]),t._v(" "),r("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$l("treatRemark"),expression:"$l('treatRemark')"}],staticClass:"icon-edit",attrs:{src:n("ce8e"),alt:t.$l("treatRemark")},on:{click:function(e){return t.handleTreatRemark(t.currUser)}}})]):r("div",{staticClass:"treat-remark-wrapper",on:{click:function(e){return t.handleTreatRemark(t.currUser)}}},[r("span",{staticClass:"treat-remark-content treat-remark-content--empty"},[t._v("\n              "+t._s(t.$l("note"))+"\n            ")]),t._v(" "),r("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$l("treatRemark"),expression:"$l('treatRemark')"}],staticClass:"icon-edit",attrs:{src:n("ce8e"),alt:t.$l("treatRemark")}})])]:t._e()],2),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.currUser.show_barcode_flag,expression:"currUser.show_barcode_flag"}],staticClass:"divide-line"}),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.currUser.show_barcode_flag,expression:"currUser.show_barcode_flag"}],staticClass:"barcode"},[r("img",{attrs:{src:t.patient_barcode}})])]),t._v(" "),r("div",{staticClass:"btnArea"},[r("mt-button",{staticClass:"btn red",attrs:{type:"submain"},on:{click:t.overQueue}},[t._v(t._s(t.$l("miss_call")))]),t._v(" "),r("mt-button",{staticClass:"btn green",on:{click:t.reCall}},[t._v(t._s(t.$l("call")))]),t._v(" "),r("mt-button",{staticClass:"btn blue",on:{click:function(e){return t.callTreatTable("current")}}},[t._v(t._s(t.$l("execute")))])],1)]):t.wrong.length>0&&t.wrong[0].is_wrong?r("div",{staticClass:"errorNow-error"},[t._m(0),t._v(" "),r("div",{staticClass:"main"},[t._v("\n      "+t._s(t.wrong[0].notice_content)+"\n    ")]),t._v(" "),r("div",{staticClass:"btn"},[r("mt-button",{attrs:{type:"subPrimary"},on:{click:t.cancelWrong}},[t._v(t._s(t.$l("cancel_notice")))])],1)]):r("div",{staticClass:"patientNow-empty"},[t._m(1),t._v(" "),r("div",{staticClass:"info"},[r("div",{staticClass:"info-none"},[t._v(t._s(t.$l("current_null_treatment")))]),t._v(" "),r("div",[r("mt-button",{directives:[{name:"show",rawName:"v-show",value:t.checkedInList.length>0,expression:"checkedInList.length > 0"}],staticClass:"btn",on:{click:t.callNext}},[t._v(t._s(t.$l("call")))])],1)])]),t._v(" "),r("danger-level-dialog",{ref:"dangerLevelDialog",attrs:{canEdit:!1}}),t._v(" "),r("getPatientPhoto",{ref:"getPhoto",attrs:{patientInfo:t.currUser},on:{set:function(e){return t.$emit("readList")}}})],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("8ea8")}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("6c1c")}})])}],a=(n("a4d3"),n("e01a"),n("b636"),n("d28b"),n("944a"),n("d9e2"),n("99af"),n("7db0"),n("a630"),n("e260"),n("14d9"),n("13d5"),n("fb6a"),n("b0c0"),n("e9f5"),n("f665"),n("7d54"),n("9485"),n("0c47"),n("23dc"),n("3410"),n("b64b"),n("1f68"),n("131a"),n("d3b7"),n("e6cf"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3"),n("159b"),n("ddb0"),n("c1df")),i=n.n(a),s=n("365c"),c=n("3f27"),l=n("fe9f"),u=n("ed08");function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */m=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),s=new F(r||[]);return o(i,"_invoke",{value:S(t,n,s)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var _="suspendedStart",f="suspendedYield",h="executing",v="completed",g={};function y(){}function b(){}function w(){}var k={};l(k,i,(function(){return this}));var C=Object.getPrototypeOf,$=C&&C(C(N([])));$&&$!==n&&r.call($,i)&&(k=$);var x=w.prototype=y.prototype=Object.create(k);function L(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,s){var c=p(t[o],t,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==d(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,n,r){var o=_;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===_)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=p(e,n,r);if("normal"===l.type){if(o=r.done?v:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(d(e)+" is not iterable")}return b.prototype=w,o(x,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},L(T.prototype),l(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(x),l(x,c,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function p(t){return v(t)||h(t)||f(t)||_()}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function h(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function v(t){if(Array.isArray(t))return g(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){y(a,r,o,i,s,"next",t)}function s(t){y(a,r,o,i,s,"throw",t)}i(void 0)}))}}var w={name:"current",data:function(){return{wrongList:"",qrcodeUrl:"",qrcodeLabel:"",labelList:[]}},props:{currUser:{type:Object,default:function(){}},room:{type:String,default:""},date:{type:String,default:""},checkedInList:{type:Array,default:function(){return[]}},roomList:{type:Array,default:function(){return[]}},wrong:{type:Array,default:function(){return[]}},showFlowInfo:{type:Boolean,default:!1},columnsSettings:{type:Object,default:function(){return{}}}},computed:{patient_barcode:function(){return s["a"].GET_PATIENT_BARCODE_BY_ROOM+"?t="+Math.random()+"&patient_visit_code="+this.currUser.patient_visit_code+"&room_code="+this.room},isTreatment:function(){return"TreatCall"===this.$route.name||"treatCall"===this.$attrs.sourceType},paymentAmount:function(){var t,e;return(null===(t=this.currUser.total_payment_amount)||void 0===t||null===(e=t.toString)||void 0===e?void 0:e.call(t))||"--"},showPaymentAmount:function(){var t,e;return!!this.isTreatment&&(null===(t=this.columnsSettings)||void 0===t||null===(t=t.signed)||void 0===t||null===(e=t.find)||void 0===e||null===(e=e.call(t,(function(t){return"total_payment_amount"===t.column_code})))||void 0===e?void 0:e.status)}},components:{dangerLevelDialog:c["a"],getPatientPhoto:l["a"]},created:function(){this.getLabelList()},methods:{openDangerLevel:function(){this.$refs["dangerLevelDialog"].treat_flow_code=this.currUser.patient_treatflow_code,this.$refs["dangerLevelDialog"].patient_visit_code=this.currUser.patient_visit_code,this.$refs["dangerLevelDialog"].init()},downloadPatientPicture:function(){var t=document.getElementById("headImg");t&&Object(u["e"])(t.src,"患者头像_".concat(i()().format("yyyyMMDD")))},uploadPatientPicture:function(){this.$refs.getPhoto.uploadPatientPicture()},getLabelList:function(){var t=this;return b(m().mark((function e(){var n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.post(t.API.GET_LABEL_TYPES);case 2:n=e.sent,1e4===n.code&&(t.labelList=n.data.reduce((function(t,e){return t=[].concat(p(t),[{value:Object.keys(e)[0],label:e[Object.keys(e)]}]),t}),[]));case 4:case"end":return e.stop()}}),e)})))()},handleTreatRemark:function(t){this.$emit("treatRemark",t)},goDeatil:function(){this.$router.push("/flow-system/patient?id="+this.currUser.id_number+"&pd="+this.currUser.patient_visit_code+"&fc="+this.currUser.patient_treatflow_code)},takePhoto:function(){this.$refs.getPhoto.open()},callNext:function(){var t=this,e=this.roomList.find((function(e){return e.value==t.room}));if(console.log(this.roomList,e,this.date),e){var n={room_code:this.room,room_name:e.label,position_date:this.date};this.$request.post(s["a"].CALL_PATIENT,n).then((function(e){if(1e4===e.code){t.$mtMessage.success(t.$l("call_successful")),t.$emit("readList",!0);var n=e.data,r=n.remind,o=n.remind_data;r&&t.$emit("label-remind",o)}}))}},overQueue:function(){var t=this,e={patient_apply_code:this.currUser.patient_apply_code,action:3,sign_date:this.date};this.$request.post(s["a"].POSITION_PATIENT_ACTION,e).then((function(e){1e4===e.code&&(t.$mtMessage.success(t.$l("account_already_over")),t.$emit("readList",!0))}))},reCall:function(){var t=this;if(!this.isCalling){this.isCalling=!0;var e={patient_apply_code:this.currUser.patient_apply_code,action:2,sign_date:this.date};this.$request.post(s["a"].POSITION_PATIENT_ACTION,e).then((function(e){1e4===e.code&&(t.$mtMessage.success(t.$l("already_re_call")),t.$emit("readList",!0),setTimeout((function(){t.isCalling=!1}),2e3))}))}},callTreatTable:function(){var t=this,e=this.roomList.find((function(e){return e.value===t.room}));e&&e.is_after_loading?this.$router.push("/flow-system/patient?id="+this.currUser.id_number+"&pd="+this.currUser.patient_visit_code+"&fc="+this.currUser.patient_treatflow_code):this.$emit("treattable",this.currUser,"current")},cancelWrong:function(){var t=this,e={wrong_code:this.wrong[0].record_code};this.$confirm(this.$l("is_cancel_notice"),this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),confirmButtonClass:"el-button--danger",cancelButtonClass:"el-button--submain",closeOnClickModal:!1,closeOnPressEscape:!1,type:""}).then((function(){t.$request.post(s["a"].CANCEL_WRONG,e).then((function(e){1e4===e.code&&(t.$mtMessage.success(t.$l("operation_successful")),t.$emit("readList",!0))}))}))},setQrcode:function(){var t=this,e={is_svg:0,patient_code:this.currUser.patient_visit_code};this.qrcodeLabel="",this.qrcodeUrl="",this.currUser.patient_visit_code&&this.$request.post(s["a"].GET_PATIENT_QR_CODE_VALUE,e).then((function(e){1e4===e.code&&(t.qrcodeLabel=e.data.qr_code_ass_com_value,t.qrcodeUrl=t.API.GET_PATIENT_QR_CODE+"?patient_code="+t.currUser.patient_visit_code+"&is_svg=1")}))},formatTime:function(t){return t.length>10?t.substring(11,16):t}}},k=w,C=(n("0835"),n("af18"),n("2877")),$=Object(C["a"])(k,r,o,!1,null,"1470affc",null);e["a"]=$.exports},af18:function(t,e,n){"use strict";n("746a")},b307:function(t,e,n){},bb53:function(t,e,n){"use strict";n("1bea")},be2a:function(t,e,n){"use strict";n("7584")},c27b:function(t,e,n){"use strict";n("c290")},c290:function(t,e,n){t.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)"}},c7fd:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("daa8"),o={data:function(){return{socket:"",autoDestory:!0}},watch:{},computed:{},created:function(){},mounted:function(){},methods:{ToClient:function(t){10001===t.code&&t.room_code&&this.readList(!0)},openSocket:function(t){this.startSocket();var e={room_code:t};this.socket.emit("join",e)},startSocket:function(t){this.socket||(this.socket=Object(r["a"])(SETTING.socket+"/call_screen"),this.socket.on("ToClient",this.ToClient))},callPatient:function(t){if(t){var e={room_code:t};this.socket.emit("CallPatient",e)}},closeSocket:function(t){if(this.socket&&t){var e={room_code:t};this.socket.emit("leave",e)}},destorySocket:function(){this.socket.removeAllListeners(["ToClient"]),this.socket.disconnect(!0),this.socket.close(),this.socket=""}},beforeDestroy:function(){this.socket&&this.autoDestory&&this.destorySocket()}}},ca0c:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:"设置",visible:t.setScreenDialog,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0,"before-close":t.getTTS,width:"600px"},on:{"update:visible":function(e){t.setScreenDialog=e}}},[r("el-tabs",{staticClass:"tabList",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{name:"voice"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v("语音配置")]),t._v(" "),r("el-form",{staticClass:"voiceSet",attrs:{model:t.voiceForm,"label-width":"90px"}},[r("el-form-item",{attrs:{prop:"speed",label:"语音播速"}},[r("mt-select",{attrs:{options:t.speedList},model:{value:t.voiceForm.speed,callback:function(e){t.$set(t.voiceForm,"speed",e)},expression:"voiceForm.speed"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"repeat_num",label:"语音音色"}},[r("mt-select",{attrs:{options:t.voiceList},model:{value:t.voiceForm.voice,callback:function(e){t.$set(t.voiceForm,"voice",e)},expression:"voiceForm.voice"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"repeat_num",label:"重播次数"}},[r("mt-select",{attrs:{options:t.repeat_numList},model:{value:t.voiceForm.repeat_num,callback:function(e){t.$set(t.voiceForm,"repeat_num",e)},expression:"voiceForm.repeat_num"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"speak_content",label:"语音内容"}},[r("el-input",{attrs:{rows:5,"show-word-limit":"",type:"textarea",maxlength:"100"},model:{value:t.voiceForm.speak_content,callback:function(e){t.$set(t.voiceForm,"speak_content",e)},expression:"voiceForm.speak_content"}}),t._v(" "),r("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[r("span",{staticClass:"voiceSet-textBtn"},[t._v("\n              "+t._s(t.$l("msg_insert_variable"))+"\n            ")]),t._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"当前患者"}},[t._v("当前患者")]),t._v(" "),r("el-dropdown-item",{attrs:{command:"治疗机房"}},[t._v("治疗机房")]),t._v(" "),r("el-dropdown-item",{attrs:{command:"下一位患者"}},[t._v("下一位患者")])],1)],1)],1)],1)],1),t._v(" "),r("el-tab-pane",{staticClass:"layoutSet",attrs:{name:"layout"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v("叫号屏配置")]),t._v(" "),r("div",{staticClass:"layoutSet-info"},[t._v("注：当前配置会影响全部机房的叫号屏样式")]),t._v(" "),r("el-form",{attrs:{model:t.layoutForm,"label-width":"90px","label-position":"right"}},[r("el-form-item",{attrs:{prop:"region_type",label:"显示区域"}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"layoutSet-item"},[r("span",{staticClass:"layoutSet-label"},[t._v("显示区域")])])]),t._v(" "),r("div",{staticClass:"layoutSet-right"},[r("mt-select",{attrs:{options:t.layoutList},model:{value:t.layoutForm.region_type,callback:function(e){t.$set(t.layoutForm,"region_type",e)},expression:"layoutForm.region_type"}}),t._v(" "),r("el-popover",{attrs:{"popper-class":"layoutPop",placement:"bottom-start",title:"说明",width:"340",trigger:"hover",content:"叫号屏方案说明：\n方案一：当前患者、下一位、已报到、已过号;\n方案二：当前患者、已报到、已过号;\n方案三：当前患者、已报到(姓名A-Z)、已过号;\n方案四：当前患者;\n方案五：当前患者、下一位。"}},[r("div",{staticClass:"layoutSet-icon",attrs:{slot:"reference"},slot:"reference"},[r("img",{attrs:{src:n("a9bd")}})])])],1)]),t._v(" "),r("el-form-item",{attrs:{prop:"display_color",label:t.$l("display_color")}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"layoutSet-item"},[r("span",{staticClass:"layoutSet-label"},[t._v(t._s(t.$l("display_color")))])])]),t._v(" "),r("div",[r("el-radio-group",{model:{value:t.layoutForm.display_color.scheme,callback:function(e){t.$set(t.layoutForm.display_color,"scheme",e)},expression:"layoutForm.display_color.scheme"}},[r("div",{staticClass:"radio-item"},[r("el-radio",{attrs:{label:""}},[t._v(t._s(t.$l("default_scheme")))])],1),t._v(" "),r("div",{staticClass:"radio-item"},[r("el-radio",{attrs:{label:"custom"}},[t._v(t._s(t.$l("custom_scheme")))])],1)]),t._v(" "),"custom"===t.layoutForm.display_color.scheme?r("div",{staticClass:"color-settings"},[r("div",{staticClass:"color-settings__item"},[r("div",{staticClass:"color-settings__label"},[t._v(t._s(t.$l("background_color")))]),t._v(" "),r("color-picker-plus",{attrs:{"preset-colors":t.predefineColors},model:{value:t.layoutForm.display_color.background_color,callback:function(e){t.$set(t.layoutForm.display_color,"background_color",e)},expression:"layoutForm.display_color.background_color"}})],1),t._v(" "),r("div",{staticClass:"color-settings__item"},[r("div",{staticClass:"color-settings__label"},[t._v(t._s(t.$l("font_color")))]),t._v(" "),r("el-radio-group",{model:{value:t.layoutForm.display_color.font_color,callback:function(e){t.$set(t.layoutForm.display_color,"font_color",e)},expression:"layoutForm.display_color.font_color"}},[r("el-radio",{attrs:{label:"#ffffff"}},[t._v(t._s(t.$l("white")))]),t._v(" "),r("el-radio",{attrs:{label:"#000000"}},[t._v(t._s(t.$l("black")))])],1)],1)]):t._e()],1)]),t._v(" "),r("el-form-item",{attrs:{prop:"video",label:t.$l("upload_video")}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"layoutSet-item"},[r("span",{staticClass:"layoutSet-label"},[t._v(t._s(t.$l("upload_video")))])])]),t._v(" "),r("el-upload",{ref:"videoUpload",attrs:{name:"file","auto-upload":!0,accept:t.videoTypes,action:"",limit:t.videoMaxNumber,multiple:!1,"show-file-list":!1,disabled:t.isVideoUploadDisabled,"on-success":t.handleUploadVideoSuccess,"before-upload":t.handleBeforeVideoUpload,"http-request":t.uploadVideoHttpRequest}},[r("mt-button",{staticClass:"upload-video__btn",attrs:{type:"table"},on:{click:t.handleAddVideoClick}},[t._v(t._s(t.$l("add_video")))])],1),t._v(" "),r("ul",{staticClass:"video-list"},t._l(t.layoutForm.education_video_list,(function(e,n){return r("li",{key:e.file_relative_path,staticClass:"video-list__item"},[r("mt-overflow-tooltip",{staticClass:"video-list__item-name",attrs:{content:e.file_name}}),t._v(" "),r("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$l("remove"),expression:"$l('remove')"}],staticClass:"video-list__item-del el-icon-close",on:{click:function(e){return t.handleVideoRemove(n)}}})],1)})),0),t._v(" "),r("div",{staticClass:"upload-video__tips"},[t._v("\n            "+t._s(t.$l("upload_video_tips",{maxSize:t.videoSizeLimitMB,maxNum:t.videoMaxNumber}))+"\n          ")])],1),t._v(" "),r("el-form-item",{attrs:{prop:"remarks",label:"备注"}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("span",{staticClass:"layoutSet-label"},[t._v("备注")])]),t._v(" "),r("mt-input",{staticStyle:{"padding-right":"24px"},attrs:{rows:6,"show-word-limit":"",maxlength:"100",type:"textarea"},model:{value:t.layoutForm.remarks,callback:function(e){t.$set(t.layoutForm,"remarks",e)},expression:"layoutForm.remarks"}})],1)],1)],1),t._v(" "),t.hasCheckinSet?r("el-tab-pane",{staticClass:"checkinSet",attrs:{name:"checkin"}},[r("span",{attrs:{slot:"label"},slot:"label"},[t._v("报到机配置")]),t._v(" "),r("div",{staticClass:"checkinSet-info"},[t._v("注：当前配置会影响全部报到机的显示")]),t._v(" "),r("el-form",{ref:"checkinForm",attrs:{model:t.checkinForm,"label-width":"120px","label-position":"right",rules:t.checkinFormRules}},[r("el-form-item",[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"checkinSet-item"},[r("span",{staticClass:"checkinSet-label"},[t._v("支持类型")])])]),t._v(" "),r("div",{staticClass:"checkinSet-right"},[r("div",[r("el-checkbox-group",{model:{value:t.checkinForm.checkinCheckList,callback:function(e){t.$set(t.checkinForm,"checkinCheckList",e)},expression:"checkinForm.checkinCheckList"}},[r("el-checkbox",{attrs:{label:"id"}},[t._v("读身份证")]),t._v(" "),r("el-checkbox",{attrs:{label:"security"}},[t._v("读社保卡")]),t._v(" "),r("el-checkbox",{attrs:{label:"bar"}},[t._v("扫描腕带")]),t._v(" "),r("el-checkbox",{attrs:{label:"face"}},[t._v("刷脸")]),t._v(" "),r("el-checkbox",{attrs:{label:"code"}},[t._v(t._s(t.$l("scan_medical_insurance_code")))]),t._v(" "),r("el-checkbox",{attrs:{label:"health_code"}},[t._v(t._s(t.$l("scan_electronic_health_code")))])],1)],1),t._v(" "),r("div",{staticClass:"checkinSet-right-info"},[t._v("该操作需要重启报到机后生效")])])]),t._v(" "),r("el-form-item",[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"checkinSet-item"},[r("span",{staticClass:"checkinSet-label"},[t._v("扫描腕带处理")])])]),t._v(" "),r("div",{staticClass:"checkinSet-right"},[r("div",[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.checkinForm.isDeal_scan_wristStrap,callback:function(e){t.$set(t.checkinForm,"isDeal_scan_wristStrap",e)},expression:"checkinForm.isDeal_scan_wristStrap"}},t._l(t.checkinForm.handle_scan_wristStrap,(function(t){return r("el-option",{key:t.handle_way_id,attrs:{value:t.handle_way_id,label:t.handle_way_desc}})})),1)],1)])]),t._v(" "),r("el-form-item",[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"checkinSet-item"},[r("span",{staticClass:"checkinSet-label"},[t._v(t._s(t.$l("treatment_unpaid_fees_settings")))])])]),t._v(" "),r("div",{staticClass:"checkinSet-right"},[r("div",{staticClass:"treatment-unpaid-settings"},[r("el-checkbox",{model:{value:t.checkinForm.allow_self_checkin,callback:function(e){t.$set(t.checkinForm,"allow_self_checkin",e)},expression:"checkinForm.allow_self_checkin"}},[t._v("\n                "+t._s(this.$l("allow_self_registration_when_overdue"))+"\n              ")])],1),t._v(" "),r("div",{staticClass:"treatment-unpaid-settings"},[r("el-checkbox",{model:{value:t.checkinForm.remaining_reminder,callback:function(e){t.$set(t.checkinForm,"remaining_reminder",e)},expression:"checkinForm.remaining_reminder"}},[r("i18n",{attrs:{path:"remaining_times_reminder"},scopedSlots:t._u([{key:"times",fn:function(){return[r("el-form-item",{attrs:{"label-width":"0",prop:"remaining_times"}},[r("custom-input",{attrs:{type:"int"},model:{value:t.checkinForm.remaining_times,callback:function(e){t.$set(t.checkinForm,"remaining_times",e)},expression:"checkinForm.remaining_times"}})],1)]},proxy:!0}],null,!1,634846714)})],1)],1),t._v(" "),r("div",{staticClass:"treatment-unpaid-settings"},[r("el-checkbox",{model:{value:t.checkinForm.show_owed_sign,callback:function(e){t.$set(t.checkinForm,"show_owed_sign",e)},expression:"checkinForm.show_owed_sign"}},[t._v("\n                "+t._s(this.$l("show_owed_sign"))+"\n              ")])],1)])]),t._v(" "),r("el-form-item",{attrs:{prop:"display_color",label:t.$l("display_color")}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("div",{staticClass:"checkinSet-item"},[r("span",{staticClass:"checkinSet-label"},[t._v(t._s(t.$l("display_color")))])])]),t._v(" "),r("div",{staticClass:"checkinSet-right"},[r("el-radio-group",{model:{value:t.checkinForm.display_color.scheme,callback:function(e){t.$set(t.checkinForm.display_color,"scheme",e)},expression:"checkinForm.display_color.scheme"}},[r("div",{staticClass:"radio-item"},[r("el-radio",{attrs:{label:""}},[t._v(t._s(t.$l("default_scheme")))])],1),t._v(" "),r("div",{staticClass:"radio-item"},[r("el-radio",{attrs:{label:"custom"}},[t._v(t._s(t.$l("custom_scheme")))])],1)]),t._v(" "),"custom"===t.checkinForm.display_color.scheme?r("div",{staticClass:"color-settings"},[r("div",{staticClass:"color-settings__item"},[r("div",{staticClass:"color-settings__label"},[t._v(t._s(t.$l("background_color")))]),t._v(" "),r("color-picker-plus",{attrs:{"preset-colors":t.predefineColors},model:{value:t.checkinForm.display_color.background_color,callback:function(e){t.$set(t.checkinForm.display_color,"background_color",e)},expression:"checkinForm.display_color.background_color"}})],1),t._v(" "),r("div",{staticClass:"color-settings__item"},[r("div",{staticClass:"color-settings__label"},[t._v(t._s(t.$l("font_color")))]),t._v(" "),r("el-radio-group",{model:{value:t.checkinForm.display_color.font_color,callback:function(e){t.$set(t.checkinForm.display_color,"font_color",e)},expression:"checkinForm.display_color.font_color"}},[r("el-radio",{attrs:{label:"#ffffff"}},[t._v(t._s(t.$l("white")))]),t._v(" "),r("el-radio",{attrs:{label:"#000000"}},[t._v(t._s(t.$l("black")))])],1)],1)]):t._e()],1)])],1)],1):t._e()],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("mt-button",{attrs:{type:"subprimary"},on:{click:t.getTTS}},[t._v(t._s(t.$l("cancel")))]),t._v(" "),r("mt-button",{attrs:{disabled:t.submitDisabled},on:{click:t.submitSet}},[t._v(t._s(t.$l("confirm")))])],1)],1)},o=[],a=(n("a4d3"),n("e01a"),n("b636"),n("d28b"),n("8172"),n("944a"),n("d9e2"),n("4de4"),n("7db0"),n("c740"),n("caad"),n("e260"),n("d81d"),n("14d9"),n("fb6a"),n("a434"),n("efec"),n("b0c0"),n("e9f5"),n("910d"),n("f665"),n("7d54"),n("ab43"),n("0c47"),n("23dc"),n("a9e3"),n("e439"),n("dbb4"),n("3410"),n("b64b"),n("1f68"),n("131a"),n("d3b7"),n("e6cf"),n("25f0"),n("2532"),n("3ca3"),n("498a"),n("159b"),n("ddb0"),n("5f87")),i=n("2f62"),s=n("75fc"),c=n("cce1");function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function m(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),s=new F(r||[]);return o(i,"_invoke",{value:S(t,n,s)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=m;var _="suspendedStart",f="suspendedYield",h="executing",v="completed",g={};function y(){}function b(){}function w(){}var k={};d(k,i,(function(){return this}));var C=Object.getPrototypeOf,$=C&&C(C(N([])));$&&$!==n&&r.call($,i)&&(k=$);var x=w.prototype=y.prototype=Object.create(k);function L(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,s){var c=p(t[o],t,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==l(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,n,r){var o=_;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===_)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=p(e,n,r);if("normal"===l.type){if(o=r.done?v:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(l(e)+" is not iterable")}return b.prototype=w,o(x,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},L(T.prototype),d(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(m(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(x),d(x,c,"Generator"),d(x,i,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function d(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){d(a,r,o,i,s,"next",t)}function s(t){d(a,r,o,i,s,"throw",t)}i(void 0)}))}}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=v(t,"string");return"symbol"==l(e)?e:e+""}function v(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var g={name:"voiceSet",components:{ColorPickerPlus:c["a"],CustomInput:s["a"]},data:function(){var t=this,e=function(e,n,r){var o=t.checkinForm.remaining_reminder;o&&!n?r(new Error(t.$l("please_enter"))):r()};return{setScreenDialog:!1,activeName:"voice",voiceForm:{speed:"",repeat_num:"",voice:"",speak_content:""},defaultDisplayColor:{scheme:"",background_color:"",font_color:"#ffffff"},layoutForm:{hospital_name:"",hospital_icon:"",region_type:"",order_rule:"",remarks:"",is_segment:!1,display_color:{scheme:"",background_color:"",font_color:"#ffffff"},education_video_list:[]},videoTypes:".mp4,.webm,.ogv",videoSizeLimitMB:30,videoMaxNumber:5,checkinForm:{checkinCheckList:[],isDeal_scan_wristStrap:"",handle_scan_wristStrap:[],allow_self_checkin:!0,remaining_reminder:!1,remaining_times:"",show_owed_sign:!1,display_color:{scheme:"",background_color:"",font_color:"#ffffff"}},checkinFormRules:{remaining_times:[{validator:e,trigger:"blur"}]},speedList:[{label:"正常",value:1},{label:"0.5倍",value:.5},{label:"0.6倍",value:.6},{label:"0.7倍",value:.7},{label:"0.8倍",value:.8},{label:"0.9倍",value:.9},{label:"1.2倍",value:1.2},{label:"1.5倍",value:1.5},{label:"1.8倍",value:1.8}],repeat_numList:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],voiceList:[{label:"男声",value:"男声"},{label:"女声",value:"女声"}],layoutList:[{label:"方案一",value:"1"},{label:"方案二",value:"2"},{label:"方案三",value:"3"},{label:"方案四",value:"4"},{label:"方案五",value:"5"}],sortList:[{label:"报到时间(升序)",value:"sign_time_asc"},{label:"报到时间(降序)",value:"sign_time_desc"},{label:"预约时间(升序)",value:"apply_time_asc"},{label:"预约时间(降序)",value:"apply_time_desc"},{label:"姓氏(A-Z)",value:"surname_asc"},{label:"姓氏(Z-A)",value:"surname_desc"}],fileList:[],fileName:"",imageApi:SETTING.InfoSystemApi+"/get_hospital_icon?file_id=",predefineColors:["#4D9BD5","#0D5700","#D46E6E","#F4AB32"]}},props:{room:{type:String,default:""}},computed:_(_({},Object(i["b"])({userInfo:"user/GET_USERINFO"})),{},{isVideoUploadDisabled:function(){return this.layoutForm.education_video_list.length>=this.videoMaxNumber},submitDisabled:function(){return this.voiceForm.speak_content.length<1&&this.voiceForm.speak_content.length>100&&"vioce"==this.activeName||!this.layoutForm.hospital_name&&!this.layoutForm.hospital_icon&&"layout"==this.activeName},hasCheckinSet:function(){return this.userInfo&&"HOSPITSDZL0018465465super"===this.userInfo.role_code}}),methods:{init:function(){this.getTTS(),this.getLayout(),this.getCheckinConfig(),this.layoutForm={hospital_name:"",hospital_icon:"",region_type:"",order_rule:"",remarks:"",is_segment:!1,display_color:_({},this.defaultDisplayColor),education_video_list:[]},this.setScreenDialog=!0},handleUploadVideoSuccess:function(t){this.layoutForm.education_video_list.push(t)},handleBeforeVideoUpload:function(t){var e=t.name.substring(t.name.lastIndexOf(".")).toLowerCase().trim(),n=this.videoTypes.split(","),r=-1!==n.indexOf(e),o=t.size/1024/1024<=this.videoSizeLimitMB;if(0===t.size)return this.$message.error(this.$l("empty_file_not_allowed")),!1;if(!r)return this.$message.error(this.$l("this_file_format_is_currently_not_supported")),!1;if(!o)return this.$message.error(this.$l("video_size_limit_exceeded",{size:this.videoSizeLimitMB})),!1;var a=this.layoutForm.education_video_list.findIndex((function(e){return e.file_name===t.name}));return-1===a||(this.$message.error(this.$l("video_exists_please_do_not_upload_again")),!1)},uploadVideoHttpRequest:function(t){var e=this,n=new FormData;n.append("action_client_code","PC"),n.append("hospital_code",this.$store.state.user.hospitalCode),n.append("file_label","education_video"),n.append("file",t.file);var r={headers:{"Content-Type":"multipart/form-data"}};this.$request.post(this.API.UPLOAD_FILE_DETAIL,n,r).then((function(t){1e4===t.code&&e.handleUploadVideoSuccess(t.data)}))},handleVideoRemove:function(t){this.layoutForm.education_video_list.splice(t,1)},handleAddVideoClick:function(){this.isVideoUploadDisabled&&this.$message.error(this.$l("video_number_reaching_maximum_limit",{n:this.videoMaxNumber}))},handleClick:function(t){this.activeName=t.name},getTTS:function(){var t=this;this.setScreenDialog=!1;var e={room_code:this.room};this.$request.post(this.API.GET_MACHINE_CONFIG,e).then((function(e){1e4===e.code&&(t.voiceForm=e.data)}))},getLayout:function(){var t=this;this.$request.post(this.API.GET_HOSPITAL_LIST).then((function(e){t.layoutForm=_({display_color:_({},t.defaultDisplayColor),education_video_list:[]},e.data[0].screen_config);var n=e.data[0].screen_config.hospital_icon.lastIndexOf("/")+1;t.fileName=e.data[0].screen_config.hospital_icon.slice(n)}))},setTTS:function(){var t=this,e={tts_config:{speed:this.voiceForm.speed,repeat_num:this.voiceForm.repeat_num,voice:this.voiceForm.voice,speak_content:this.voiceForm.speak_content},room_code:this.room};this.$request.post(this.API.SET_TTS_CONFIG,e).then((function(e){1e4===e.code&&(t.$mtMessage.success("操作成功！"),t.setScreenDialog=!1)}))},onFileChange:function(t){var e=this,n=t.file,r=t.fileList;console.log(r,n,r.length),r.length>1&&r.pop();var o=new FormData;o.append("hospital_code",this.$store.state.user.hospitalCode),o.append("action_user_code",this.$store.state.user.userInfo.user_code),o.append("action_client_code",SETTING.actionCodeValue),o.append("access_token",Object(a["a"])()),o.append("file",n.raw),this.$request.post(this.API.UPLOAD_HOSPITAL_ICON,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){1e4===t.code&&(e.layoutForm.hospital_icon=e.imageApi+t.data.file_id,e.fileName=t.data.file_id)}))},delImg:function(){var t=this;this.$confirm("请确认是否要清空图标设置?",this.$l("tips"),{confirmButtonText:this.$l("confirm"),cancelButtonText:this.$l("cancel"),confirmButtonClass:"el-button--danger",cancelButtonClass:"el-button--submain",type:""}).then((function(){t.layoutForm.hospital_icon="",t.fileList=[],t.fileName=""}))},submitSet:function(){var t=this;if("voice"==this.activeName&&this.setTTS(),"layout"==this.activeName){var e={screen_config:this.layoutForm};this.$request.post(this.API.SET_QUEUE_SCREEN,e).then((function(e){1e4===e.code&&(t.$mtMessage.success("操作成功！"),t.setScreenDialog=!1,t.$emit("refresh"))}))}"checkin"===this.activeName&&this.$refs.checkinForm.validate((function(e){e&&t.saveCheckinForm()}))},saveCheckinForm:function(){var t=this,e=this.checkinForm.handle_scan_wristStrap.map((function(e){return _(_({},e),{},{use_way_status:e.handle_way_id===t.checkinForm.isDeal_scan_wristStrap})})),n=this.checkinForm,r=n.allow_self_checkin,o=n.remaining_reminder,a=n.remaining_times,i=n.show_owed_sign,s=n.display_color,c={allow_self_checkin_when_remaining_zero:r,remind_renewal_when_remaining_x:{selected:o,x_value:""!==a?Number(a):""},show_owed_sign:i},l={checkin_config:{isSupportWays:{id_card:this.checkinForm.checkinCheckList.includes("id"),socialSecurity_card:this.checkinForm.checkinCheckList.includes("security"),wrist_strap:this.checkinForm.checkinCheckList.includes("bar"),face_swiping:this.checkinForm.checkinCheckList.includes("face"),manual_input:this.checkinForm.checkinCheckList.includes("input"),medical_insurance_code:this.checkinForm.checkinCheckList.includes("code"),health_code:this.checkinForm.checkinCheckList.includes("health_code")},handle_scan_wristStrap:e,treatment_arrears:c,display_color:s}};this.$request.post(this.API.SET_CHECKIN_CONFIG,l).then((function(e){1e4===e.code&&(t.$mtMessage.success("操作成功!"),t.setScreenDialog=!1)}))},getCheckinConfig:function(){var t=this;return m(u().mark((function e(){return u().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.post(t.API.GET_CHECKIN_CONFIG).then((function(e){var n=e.data[0].checkin_config,r=n.isSupportWays,o=n.handle_scan_wristStrap,a=n.treatment_arrears,i=[];r.id_card&&i.push("id"),r.socialSecurity_card&&i.push("security"),r.wrist_strap&&i.push("bar"),r.face_swiping&&i.push("face"),r.manual_input&&i.push("input"),r.medical_insurance_code&&i.push("code"),r.health_code&&i.push("health_code"),t.checkinForm.checkinCheckList=i,t.checkinForm.handle_scan_wristStrap=o,t.checkinForm.isDeal_scan_wristStrap=o.find((function(t){return!0===t.use_way_status})).handle_way_id,t.checkinForm.allow_self_checkin=a.allow_self_checkin_when_remaining_zero;var s=a.remind_renewal_when_remaining_x,c=s.selected,l=s.x_value;t.checkinForm.remaining_reminder=c,t.checkinForm.remaining_times=l||0===l?l.toString():"",t.checkinForm.show_owed_sign=a.show_owed_sign,t.checkinForm.display_color=_(_({},t.defaultDisplayColor),n.display_color)}));case 2:case"end":return e.stop()}}),e)})))()},handleCommand:function(t){var e=this.voiceForm.speak_content+"{"+t+"}";this.$set(this.voiceForm,"speak_content",e)}}},y=g,b=(n("be2a"),n("c27b"),n("2877")),w=Object(b["a"])(y,r,o,!1,null,"45967f0c",null);e["a"]=w.exports},cec8:function(t,e,n){t.exports={menuText:"#191c22",menuActiveText:"#4D9BD5",subMenuActiveText:"#4D9BD5",menuBg:"#fff",menuHover:"rgba(77,155,213,0.2)",subMenuBg:"#F4F5F9",subMenuHover:"rgba(77,155,213,0.2)",sideBarWidth:"180px",activeBg:"rgba(77,155,213,0.2)",hoverBg:"rgba(25,28,34,0.05)"}},d7db:function(t,e,n){},f231:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"unchecked"},[r("el-tabs",{attrs:{value:t.subTabName},on:{"tab-click":t.handleTabClick}},[r("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.noneCheckLoading,expression:"noneCheckLoading"}],staticClass:"noneCheckTable",class:t.hasImg?"":"withoutImg",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255,255,255,0)",label:t.noneCheck,name:"noneCheck"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"noneCheck"===t.subTabName,expression:"subTabName === 'noneCheck'"}],staticClass:"noneCheckTable-background"},[r("el-table",{ref:"noneCheck",staticClass:"table",attrs:{height:"100",data:t.noneCheckList,"row-key":"patient_apply_code"}},[r("el-table-column",{attrs:{type:"index",prop:"index",width:"25","show-overflow-tooltip":""}}),t._v(" "),t._l(t.visibleNoneCheckColumns,(function(e,o){return r("el-table-column",{key:e.column_code+o,attrs:{prop:e.column_code,label:t.columnName(e),"min-width":t.columnMinWidth(e),"show-overflow-tooltip":"name"!==e.column_code},scopedSlots:t._u([{key:"default",fn:function(o){return["name"===e.column_code?r("mt-tablename",{attrs:{scope:o,label:t.labelList,showPatientDetail:!0,showCount:3,type:"index","auto-collapse":"","is-mini":"",sourceType:t.sourceType,timesMark:t.getDivideTreatInfo(o.row),selfTooltip:t.getDivideTreatInfo(o.row)||" "},on:{update:function(e){return t.$emit("readList")}}}):"apply_at"===e.column_code?["period"!=o.row.apply_mode?r("span",[t._v("\n                  "+t._s(t.formatTime(o.row.apply_at))+"\n                ")]):t._e(),t._v(" "),"period"==o.row.apply_mode?r("span",[t._v("\n                  "+t._s(t.timePeriod(o.row))+"\n                ")]):t._e()]:"total_payment_amount"===e.column_code?r("div",{staticClass:"total-payment-amount-wrapper"},[o.row.total_payment_amount?r("div",{staticClass:"total-payment-amount-and-owed"},[r("div",{staticClass:"total-payment-amount"},[t._v(t._s(o.row.total_payment_amount))]),t._v(" "),o.row.total_payment_amount-o.row.divide_treat_info_real<0?r("div",{staticClass:"total-payment-amount-owed"},[t._v("\n                    "+t._s(o.row.total_payment_amount-o.row.divide_treat_info_real)+"\n                  ")]):t._e()]):t._e(),t._v(" "),r("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$l("charge_remarks"),expression:"$l('charge_remarks')"}],staticClass:"edit-total-payment-amount-icon",attrs:{src:n("ba77")},on:{click:function(e){return t.handleEditTotalPaymentAmount(o.row)}}})]):"divide_treat_info"===e.column_code?r("div",{staticClass:"divide-treat-info-wrapper"},[r("div",[t._v(t._s(o.row.divide_treat_info))])]):[t._v(t._s(o.row[e.column_code]))]]}}],null,!0)})})),t._v(" "),r("el-table-column",{attrs:{fixed:"right",label:t.$t("action"),width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.checkin(e.row)}}},[t._v("\n                "+t._s(t.$l("checkin"))+"\n              ")]),t._v(" "),r("el-dropdown",{staticClass:"more-dropdown",attrs:{trigger:"hover",size:"medium"},on:{command:t.handleDropdownCommand}},[r("mt-button",{attrs:{type:"table"}},[t._v(t._s(t.$l("more"))+"\n                  "),r("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),r("el-dropdown-menu",{staticClass:"more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"pause"},disabled:2===e.row.treat_flow_status}},[t._v(t._s(t.$l("pause")))]),t._v(" "),r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"execute"}}},[t._v(t._s(t.$l("execute")))]),t._v(" "),t.isTreatment?r("el-dropdown-item",{attrs:{command:{data:e.row,operation:"treatRemark"}}},[t._v(t._s(t.$l("treatRemark")))]):t._e()],1)],1)]}}])},[r("template",{slot:"header"},[r("span",[t._v(t._s(t.$t("action")))]),t._v(" "),t.canSetColumns?r("column-settings",{attrs:{columns:t.noneCheckColumns},on:{updated:function(e){t.columnsUpdate({tabName:"noneCheck",newColumns:e})}}}):t._e()],1)],2)],2),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImg,expression:"hasImg"}],staticClass:"linac"},[r("el-image",{staticClass:"linac-image",attrs:{src:t.linacImg,fit:"contain","preview-src-list":t.linacImgList}})],1)],1)]),t._v(" "),r("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.pausedLoading,expression:"pausedLoading"}],staticClass:"noneCheckTable",class:t.hasImg?"":"withoutImg",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255,255,255,0)",label:t.paused,name:"paused"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"paused"===t.subTabName,expression:"subTabName === 'paused'"}],staticClass:"noneCheckTable-background"},[r("el-table",{ref:"pause",staticClass:"table",attrs:{data:t.pauseList,height:"100","row-key":"patient_apply_code"}},[r("el-table-column",{attrs:{type:"index",prop:"index",width:t.pauseIndexWidth,"show-overflow-tooltip":""}}),t._v(" "),t._l(t.visiblePauseColumns,(function(e,o){return r("el-table-column",{key:e.column_code+o,attrs:{prop:e.column_code,label:t.columnName(e),"min-width":t.columnMinWidth(e),"show-overflow-tooltip":"name"!==e.column_code},scopedSlots:t._u([{key:"default",fn:function(o){return["name"===e.column_code?r("mt-tablename",{attrs:{scope:o,label:t.labelList,showPatientDetail:!0,showCount:3,type:"index","auto-collapse":"","is-mini":"",sourceType:t.sourceType,timesMark:t.getDivideTreatInfo(o.row),selfTooltip:t.getDivideTreatInfo(o.row)||" "},on:{update:function(e){return t.$emit("pauseUpdate")}}}):"apply_at"===e.column_code?["period"!==o.row.apply_mode?r("span",[t._v("\n                  "+t._s(t.formatTime(o.row.apply_at))+"\n                ")]):t._e(),t._v(" "),"period"===o.row.apply_mode?r("span",[t._v("\n                  "+t._s(t.timePeriod(o.row))+"\n                ")]):t._e()]:"pause_days"===e.column_code?[o.row.pause_days?r("div",{staticClass:"pause-day-wrapper"},[r("div",{class:["pause-day",o.row.pause_days>=7?"over-7-day-bg":"less-7-day-bg"]},[t._v("\n                    "+t._s(o.row.pause_days)+"\n                  ")])]):r("div",[t._v("--")])]:"total_payment_amount"===e.column_code?r("div",{staticClass:"total-payment-amount-wrapper"},[o.row.total_payment_amount?r("div",{staticClass:"total-payment-amount-and-owed"},[r("div",{staticClass:"total-payment-amount"},[t._v(t._s(o.row.total_payment_amount))]),t._v(" "),o.row.total_payment_amount-o.row.divide_treat_info_real<0?r("div",{staticClass:"total-payment-amount-owed"},[t._v("\n                    "+t._s(o.row.total_payment_amount-o.row.divide_treat_info_real)+"\n                  ")]):t._e()]):t._e(),t._v(" "),r("img",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$l("charge_remarks"),expression:"$l('charge_remarks')"}],staticClass:"edit-total-payment-amount-icon",attrs:{src:n("ba77")},on:{click:function(e){return t.handleEditTotalPaymentAmount(o.row)}}})]):"divide_treat_info"===e.column_code?r("div",{staticClass:"divide-treat-info-wrapper"},[r("div",[t._v(t._s(o.row.divide_treat_info))])]):[t._v(t._s(o.row[e.column_code]))]]}}],null,!0)})})),t._v(" "),r("el-table-column",{attrs:{fixed:"right",label:t.$t("action"),width:t.isTreatment?126:t.canSetColumns?70:50},scopedSlots:t._u([{key:"default",fn:function(e){return[r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.recover(e.row)}}},[t._v("\n                "+t._s(t.$l("recovery"))+"\n              ")]),t._v(" "),t.isTreatment?r("mt-button",{attrs:{type:"table"},on:{click:function(n){return t.handleTreatRemark(e.row)}}},[t._v(t._s(t.$l("treatRemark"))+"\n              ")]):t._e()]}}])},[r("template",{slot:"header"},[r("span",[t._v(t._s(t.$t("action")))]),t._v(" "),t.canSetColumns?r("column-settings",{attrs:{columns:t.pauseColumns},on:{updated:function(e){t.columnsUpdate({tabName:"pause",newColumns:e})}}}):t._e()],1)],2)],2),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImg,expression:"hasImg"}],staticClass:"linac"},[r("el-image",{staticClass:"linac-image",attrs:{src:t.linacImg,fit:"contain","preview-src-list":t.linacImgList}})],1)],1)])],1),t._v(" "),r("pauseBtn",{ref:"pauseBtn",attrs:{patient:t.pauseDetail},on:{update:t.pauseUpdate}}),t._v(" "),"paused"===t.subTabName?r("div",{staticClass:"show-all-checkbox"},[r("el-checkbox",{attrs:{value:t.showAllPause},on:{change:t.handleChangeShowAllPause}},[t._v("显示历史暂停患者")])],1):t._e()],1)},o=[],a=(n("a4d3"),n("e01a"),n("b636"),n("d28b"),n("944a"),n("d9e2"),n("99af"),n("4de4"),n("a630"),n("e260"),n("14d9"),n("13d5"),n("fb6a"),n("b0c0"),n("e9f5"),n("910d"),n("7d54"),n("9485"),n("0c47"),n("23dc"),n("a9e3"),n("3410"),n("b64b"),n("1f68"),n("131a"),n("d3b7"),n("e6cf"),n("ac1f"),n("00b4"),n("25f0"),n("3ca3"),n("159b"),n("ddb0"),n("365c")),i=n("8f09"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"period-dialog",attrs:{title:0===t.status?"恢复":"暂停",visible:t.dialogVisible,width:"30%","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",rules:t.formRule}},[n("div",{staticClass:"form"},[n("el-form-item",{attrs:{label:"流程",prop:"merge_name"}},[n("mt-input",{attrs:{placeholder:"请输入",disabled:!0,maxlength:64},model:{value:t.form.merge_name,callback:function(e){t.$set(t.form,"merge_name","string"===typeof e?e.trim():e)},expression:"form.merge_name"}})],1),t._v(" "),0==t.status?n("el-form-item",{attrs:{label:"操作原因",prop:"reason"}},[n("mt-dictionary",{key:"RECOVER_REASON",attrs:{dict:"RECOVER_REASON",clearable:"",filterable:"","allow-create":""},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1):n("el-form-item",{attrs:{label:"操作原因",prop:"reason"}},[n("mt-dictionary",{key:"PAUSE_REASON",attrs:{dict:"PAUSE_REASON",clearable:"",filterable:"","allow-create":""},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"备注"}},[n("mt-input",{attrs:{type:"textarea"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1),t._v(" "),t.isMessageShow?n("el-form-item",{attrs:{label:t.$l("message_notification")}},[n("el-radio-group",{model:{value:t.isSend,callback:function(e){t.isSend=e},expression:"isSend"}},[n("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1):t._e()],1)]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("mt-button",{attrs:{type:"submain"},on:{click:t.handleClose}},[t._v("\n      "+t._s(t.$l("cancel"))+"\n    ")]),t._v(" "),n("mt-button",{on:{click:t.save}},[t._v(t._s(t.$l("confirm")))])],1)],1)},c=[],l=(n("7db0"),n("f665"),{name:"pauseBtn",data:function(){return{dialogVisible:!1,detail:{},form:{merge_name:"",diagnoses:[],stage_accord:"",t_stage:"",n_stage:"",m_stage:"",combine_stage:"",treat_aim:"",flow_code:"",remarks:"",reason:"",sick_type_code:"",figo_stage_code:"",medical_standard_stage_type:"TNM"},formRule:{merge_name:[{required:!0,message:"请输入程/段名称",trigger:"change"}],reason:[{required:!0,message:"请选择操作原因",trigger:"blur"}]},allFlowList:[],title:"暂停程/段",status:2,isMessageShow:!1,isSend:0}},created:function(){this.getFlowList()},methods:{init:function(t,e){var n=this;this.status=e,this.patient=t,this.getMessage();var r={patient_visit_code:t.patient_visit_code};this.$request.post(a["a"].GET_PATIENT_TREATFLOW_LIST,r).then((function(e){if(1e4===e.code){var r=e.data.find((function(e){return e.code===t.patient_treatflow_code}));r&&(n.form.merge_name=r.merge_name,n.form.flow_code=r.flow_code,n.form.reason="",n.form.remarks="",n.dialogVisible=!0)}}))},getMessage:function(){var t=this;this.$request.post(this.API.GET_MESSAGE_RULES).then((function(e){var n,r="";switch(t.status){case 0:r="recovery";break;case 2:r="pause";break}var o=e.data.find((function(t){return"treatflow"===t.action_scope&&t.action_type===r}))||{},a=o.send_way,i=void 0===a?{}:a,s=i.way_options,c=void 0===s?[]:s,l=null===(n=c.find((function(t){return"user_decide"===t.way_code})))||void 0===n?void 0:n.way_status;if(t.isMessageShow=l,t.isMessageShow){var u=i.way_default,d=void 0===u?{}:u;d.forEach((function(e){"default_send"===e.way_code&&e.way_status?t.isSend=1:"default_not_send"===e.way_code&&e.way_status&&(t.isSend=0)}))}}))},getFlowList:function(){var t=this,e={query_word:"",page:1,page_size:9999,menu_code:this.$route.name};this.$request.post(this.API.GET_FLOW_LIST,e).then((function(e){t.allFlowList=e.data.data,1===t.allFlowList.length&&(t.form["flow_code"]=t.allFlowList[0].code)}))},save:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;var n={patient_visit_code:t.patient.patient_visit_code,treatflow_code:t.patient.patient_treatflow_code,status:t.status,reason:t.form.reason,remarks:t.form.remarks,is_send:t.isSend};t.$request.post(t.API.UPDATE_PATIENT_STATUS,n).then((function(e){1e4===e.code&&(e.tips||t.$mtMessage({type:"success",message:"修改成功!"}),t.dialogVisible=!1,t.$emit("update",t.status))}))}))},handleClose:function(){this.dialogVisible=!1,this.isMessageShow=!1}}}),u=l,d=n("2877"),m=Object(d["a"])(u,s,c,!1,null,"25995b07",null),p=m.exports,_=n("73c0"),f=n("2ef0"),h=n("0282");function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */g=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),s=new F(r||[]);return o(i,"_invoke",{value:S(t,n,s)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var m="suspendedStart",p="suspendedYield",_="executing",f="completed",h={};function y(){}function b(){}function w(){}var k={};l(k,i,(function(){return this}));var C=Object.getPrototypeOf,$=C&&C(C(N([])));$&&$!==n&&r.call($,i)&&(k=$);var x=w.prototype=y.prototype=Object.create(k);function L(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,a,i,s){var c=d(t[o],t,a);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==v(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,n,r){var o=m;return function(a,i){if(o===_)throw Error("Generator is already running");if(o===f){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=E(s,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=_;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?f:p,l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=f,r.method="throw",r.arg=l.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(v(e)+" is not iterable")}return b.prototype=w,o(x,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},L(T.prototype),l(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new T(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(x),l(x,c,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}function y(t){return C(t)||k(t)||w(t)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){if(t){if("string"==typeof t)return $(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}function k(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function C(t){if(Array.isArray(t))return $(t)}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function L(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){x(a,r,o,i,s,"next",t)}function s(t){x(a,r,o,i,s,"throw",t)}i(void 0)}))}}var T={name:"unchecked",components:{ColumnSettings:_["a"],pauseBtn:p},mixins:[h["a"]],data:function(){return{noneCheck:this.$l("not_checkin"),paused:this.$l("paused"),hasImg:!1,linacImg:"",linacImgList:[],timer:null,pauseDetail:{},labelList:[],noneCheckLoading:!1,pausedLoading:!1,INFINITE_LOAD_THRESHOLD_DISTANCE:50}},props:{date:{type:String,default:""},noneCheckList:{type:Array,default:function(){return[]}},pauseList:{type:Array,default:function(){return[]}},pauseColumns:{type:Array,default:function(){return[]}},noneCheckColumns:{type:Array,default:function(){return[]}},canSetColumns:{type:Boolean,default:!1},sourceType:{type:String,default:""},subTabName:{type:String,default:"noneCheck"},pauseTotal:{type:Number,default:0},showAllPause:{type:Boolean,default:!0}},computed:{visibleNoneCheckColumns:function(){return this.noneCheckColumns.filter((function(t){return t.status}))},visiblePauseColumns:function(){return this.pauseColumns.filter((function(t){return t.status}))},isTreatment:function(){return"TreatCall"===this.$route.name||"treatCall"===this.sourceType},pauseIndexWidth:function(){return this.pauseList.length>99?"36":"25"}},watch:{noneCheckList:{handler:function(t){t.length>0?this.noneCheck=this.$l("not_checkin")+" ("+t.length+")":this.noneCheck=this.$l("not_checkin")},immediate:!0},pauseTotal:{handler:function(t){this.paused=t?this.$l("paused")+" ("+t+")":this.$l("paused")},immediate:!0},subTabName:{handler:function(t){var e=this;"paused"===t&&this.$nextTick((function(){e.bindScrollEvent()}))},immediate:!0}},created:function(){this.getLabelList()},methods:{bindScrollEvent:function(){var t=this,e=this.$refs.pause.bodyWrapper;e.onscroll=function(){var n=e.scrollTop,r=e.scrollHeight,o=e.clientHeight;n+o+t.INFINITE_LOAD_THRESHOLD_DISTANCE>r&&t.infiniteHandler()}},pauseUpdate:function(){this.$emit("pauseUpdate")},infiniteHandler:Object(f["debounce"])((function(){this.$emit("loadMorePauseList")}),200),columnMinWidth:function(t){var e=t.column_code;switch(e){case"name":return"treatCall"===this.sourceType?220:200;case"sign_at":case"record_time":case"node_name":return 80;case"diagnoses":return 90;case"divide_treat_info":return 85;case"apply_at":return 115;case"recorder_name":case"operator_name":return 95;case"event_no":return 120;case"total_payment_amount":return 105;case"admission_number":case"outpatient_number":return 120;case"phone":case"medical_department":return 110;case"doctor_name":return 80;case"patient_type":return 80;case"mold_transfer_status":return 115;default:return 100}},columnName:function(t){return"admission_number"===t.column_code?this.$l("admission_number"):t.column_name},scrollToTop:function(){var t;null!==(t=this.$refs)&&void 0!==t&&null!==(t=t.pause)&&void 0!==t&&t.bodyWrapper&&(this.$refs.pause.bodyWrapper.scrollTop=0,this.$refs.pause.bodyWrapper.scrollLeft=0)},handleDropdownCommand:function(t){var e=t.data,n=t.operation;e&&("pause"===n&&this.pause(e),"execute"===n&&this.$emit("execute",e),"treatRemark"===n&&this.handleTreatRemark(e))},handleTreatRemark:function(t){this.$emit("treatRemark",t)},checkin:function(t){var e=this,n={patient_apply_code:t.patient_apply_code,action:1,sign_date:this.date},r={data:{dropMessage:!0}};this.$request.post(a["a"].POSITION_PATIENT_ACTION,n,r).then((function(t){1e4===t.code?e.$mtMessage.success(e.$l("report_successful")):61580===t.code?e.feesNotCollectedDialog(!0):e.$message.error(t.msg)}))},toDetail:function(t){this.$router.push("/flow-system/patient?id="+t.id_number+"&pd="+t.patient_visit_code+"&fc="+t.patient_treatflow_code)},getLinacStatus:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=null;var n={room_code:t};this.$request.post(a["a"].GET_LINAC_PICTURE_PATH,n,{dropLoading:!0}).then((function(n){1e4===n.code&&(n.data.image_path?(e.hasImg=!0,e.linacImg=n.data.image_path+"?t="+Math.random(),e.linacImgList=[e.linacImg]):(e.hasImg=!1,e.linacImg="",e.linacImgList=[]),e.timer=setTimeout((function(){e.getLinacStatus(t)}),1e4))}))},pause:function(t){this.pauseDetail=t,this.$refs.pauseBtn.init(t,2)},recover:function(t){this.pauseDetail=t,this.$refs.pauseBtn.init(t,0)},formatTime:function(t){return t.length>10?t.substring(11,16):t},getLabelList:function(){var t=this;return L(g().mark((function e(){var n;return g().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.post(t.API.GET_LABEL_TYPES);case 2:n=e.sent,1e4===n.code&&(t.labelList=n.data.reduce((function(t,e){return t=[].concat(y(t),[{value:Object.keys(e)[0],label:e[Object.keys(e)]}]),t}),[]));case 4:case"end":return e.stop()}}),e)})))()},getDivideTreatInfo:function(t){if("treatCall"!==this.sourceType)return"";if(1===t.divide_treat_info_real)return this.$l("first_time");var e=t.divide_treat_info_total-t.divide_treat_info_real;return 1===e?this.$l("remaining_2_times"):0===e?this.$l("last_time"):""},handleChangeShowAllPause:function(t){this.$emit("showAllPauseChange",t)},timePeriod:function(t){return Object(i["a"])(t.apply_at).format("HH:mm")+"-"+Object(i["a"])(t.apply_end_at).format("HH:mm")},handleEditTotalPaymentAmount:function(t){this.$emit("editTotalPaymentAmount",t)},getPauseDay:function(t){return Object(i["a"])().diff(t,"day")},setLoadingVisible:function(t,e){"noneCheck"===t&&(this.noneCheckLoading=e),"paused"===t&&(this.pausedLoading=e)},doLayout:function(t){var e=this;this.$nextTick((function(){var n=e.$refs[t];n&&n.doLayout(),e.$nextTick((function(){e.setLoadingVisible(t,!1)}))}))},handleTabClick:function(t){this.$emit("changeTab",t.name)},columnsUpdate:function(t){this.$emit("columnsUpdate",t)}},beforeDestroy:function(){this.timer&&clearTimeout(this.timer),this.timer=null}},S=T,E=(n("017b"),n("9fea"),n("f435"),Object(d["a"])(S,r,o,!1,null,"0cfc418c",null));e["a"]=E.exports},f435:function(t,e,n){"use strict";n("6e8a")}}]);