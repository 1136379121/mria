<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTæ’é˜Ÿå«å·</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #f5f5f5;
            padding: 0; /* ç”±é¡µé¢æ¡†æ¶ç»Ÿä¸€æ§åˆ¶è¾¹è· */
            color: #333;
        }

        .page {
            background: #fff;
            border-radius: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            overflow: hidden;
        }

        /* é¡¶éƒ¨ç­›é€‰æ¡ */
        .toolbar {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .title {
            font-size: 18px;
            font-weight: 700;
            margin-right: 6px;
        }

        .select, .input, .date {
            height: 32px;
            border: 1px solid #d9d9d9;
            border-radius: 6px;
            padding: 0 10px;
            font-size: 14px;
            outline: none;
            background: #fff;
        }

        .select:focus, .input:focus, .date:focus {
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24,144,255,0.18);
        }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: #666;
            font-size: 14px;
            padding: 0 8px;
            height: 32px;
            border-radius: 6px;
            background: #fafafa;
            border: 1px solid #f0f0f0;
        }

        .link {
            color: #1890ff;
            font-size: 13px;
            cursor: pointer;
            user-select: none;
        }

        .spacer { flex: 1; }

        .search {
            display: flex;
            align-items: center;
            gap: 0;
        }
        .search .input {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            width: 220px;
        }
        .search-btn {
            height: 32px;
            width: 40px;
            border: 1px solid #1890ff;
            background: #1890ff;
            color: #fff;
            border-top-right-radius: 6px;
            border-bottom-right-radius: 6px;
            cursor: pointer;
        }

        /* å½“å‰æ‚£è€…å¡ç‰‡ */
        .current {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px 16px;
            border-bottom: 1px solid #f0f0f0;
            background: #f7fbff;
        }

        .avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: linear-gradient(135deg, #b3d4ff, #e6f7ff);
            border: 1px solid #cfe6ff;
            position: relative;
            flex: 0 0 52px;
        }
        .risk {
            position: absolute;
            left: -6px;
            bottom: -6px;
            padding: 2px 6px;
            border-radius: 10px;
            background: #ff4d4f;
            color: #fff;
            font-size: 12px;
            border: 2px solid #f7fbff;
        }

        .p-main {
            display: flex;
            flex-direction: column;
            gap: 6px;
            min-width: 380px;
        }

        .p-topline {
            display: flex;
            align-items: baseline;
            gap: 10px;
            flex-wrap: wrap;
        }

        .p-name {
            font-weight: 700;
            font-size: 16px;
        }

        .mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-weight: 700;
            color: #111;
        }

        .muted { color: #999; font-size: 12px; }

        .p-meta {
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
            color: #666;
            font-size: 13px;
        }

        .p-actions {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }

        .btn {
            height: 34px;
            padding: 0 14px;
            border-radius: 18px;
            border: 1px solid #d9d9d9;
            background: #fff;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            transition: all .15s ease;
        }
        .btn:hover { border-color: #1890ff; color: #1890ff; }
        .btn.green {
            border-color: #52c41a;
            color: #fff;
            background: #52c41a;
        }
        .btn.green:hover { background: #73d13d; border-color: #73d13d; color: #fff; }
        .btn.blue {
            border-color: #1890ff;
            color: #fff;
            background: #1890ff;
        }
        .btn.blue:hover { background: #40a9ff; border-color: #40a9ff; color: #fff; }

        .qr {
            width: 68px;
            height: 68px;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            background:
                linear-gradient(90deg, #000 2px, transparent 2px) 0 0/8px 8px,
                linear-gradient(#000 2px, transparent 2px) 0 0/8px 8px,
                #fff;
            opacity: .8;
        }

        /* å†…å®¹åŒºï¼šåŒåˆ—è¡¨ */
        .content {
            display: grid;
            grid-template-columns: 1.25fr 0.9fr;
            gap: 16px;
            padding: 14px 16px 16px 16px;
            background: #fff;
        }

        .panel {
            border: 1px solid #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .tabs {
            display: flex;
            gap: 18px;
            padding: 10px 12px;
            border-bottom: 1px solid #f0f0f0;
            background: #fff;
        }
        .tab {
            font-size: 13px;
            color: #666;
            cursor: pointer;
            user-select: none;
            padding: 4px 2px;
            border-bottom: 2px solid transparent;
        }
        .tab.active {
            color: #1890ff;
            border-bottom-color: #1890ff;
            font-weight: 600;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border-bottom: 1px solid #f5f5f5;
            padding: 10px 12px;
            text-align: left;
            font-size: 13px;
            color: #333;
            vertical-align: middle;
        }
        th { background: #fafafa; color: #666; font-weight: 600; }
        tbody tr:hover { background: #fafafa; }

        .namecell {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .badge {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: #fff;
        }
        .b-blue { background: #1890ff; }
        .b-purple { background: #9254de; }
        .b-red { background: #ff4d4f; }
        .b-gray { background: #bfbfbf; }

        .pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 2px 8px;
            border-radius: 999px;
            background: #f6ffed;
            color: #52c41a;
            font-size: 12px;
            border: 1px solid #b7eb8f;
        }

        .op {
            color: #1890ff;
            cursor: pointer;
            user-select: none;
            margin-right: 10px;
        }
        .op.gray { color: #999; cursor: default; }

        .section-title {
            padding: 10px 12px;
            border-bottom: 1px solid #f0f0f0;
            background: #fff;
            font-size: 13px;
            font-weight: 600;
            color: #333;
        }

        .note {
            padding: 10px 16px 14px 16px;
            color: #999;
            font-size: 12px;
            background: #fff;
        }

        @media (max-width: 1100px) {
            .content { grid-template-columns: 1fr; }
            .p-main { min-width: 0; }
        }
    </style>
</head>
<body>
    <div class="page">
        <div class="toolbar">
            <div class="title">CTæ’é˜Ÿå«å·</div>
            <select class="select" id="roomSelect">
                <option>CTå®¤1</option>
                <option>CTå®¤2</option>
                <option>CTå®¤3</option>
            </select>
            <div class="chip">ä¸»åŒ»ç”Ÿï¼šæ²ˆåŒ»ç”Ÿ</div>
            <div class="link" id="signAuth">ç­¾å­—æˆæƒ</div>
            <div class="spacer"></div>
            <input class="date" type="date" id="dateInput" value="2020-01-23">
            <div class="search">
                <input class="input" id="kw" placeholder="ä½é™¢å·/é—¨è¯Šå·/å§“å">
                <button class="search-btn" id="doSearch" title="æœç´¢">ğŸ”</button>
            </div>
        </div>

        <div class="current" id="currentCard">
            <div class="avatar">
                <div class="risk">é«˜é£é™©</div>
            </div>
            <div class="p-main">
                <div class="p-topline">
                    <span class="p-name">å¼ ä¸‰ / ç”· / 51</span>
                    <span class="link" id="btnRecover">å¤ä½</span>
                    <span class="mono">84758335</span>
                    <span class="muted">(ç—…æ¡ˆå·)</span>
                    <span class="mono">84758335</span>
                    <span class="muted">(æ”¾ç–—å·)</span>
                    <span class="link" id="btnDetail">è¯¦æƒ…</span>
                </div>
                <div class="p-meta">
                    <span>é¢„çº¦æ—¶é—´ <span class="mono" style="font-weight:600;">08:45</span></span>
                    <span>æŠ¥åˆ°æ—¶é—´ <span class="mono" style="font-weight:600;">08:55</span></span>
                    <span>æ“ä½œäºº <span class="mono" style="font-weight:600;">ç³»ç»Ÿ</span></span>
                </div>
            </div>
            <div class="p-actions">
                <button class="btn" id="btnSkip">è¿‡å·</button>
                <button class="btn green" id="btnCall">å‘¼å«</button>
                <button class="btn blue" id="btnExec">æ‰§è¡Œ</button>
                <div class="qr" title="äºŒç»´ç ï¼ˆç¤ºæ„ï¼‰"></div>
            </div>
        </div>

        <div class="content">
            <div class="panel">
                <div class="tabs" id="leftTabs">
                    <div class="tab active" data-tab="queue">æ’é˜Ÿä¸­(<span id="cQueue">0</span>)</div>
                    <div class="tab" data-tab="done">å·²å®Œæˆ(<span id="cDone">0</span>)</div>
                    <div class="tab" data-tab="skipped">å·²è¿‡å·(<span id="cSkipped">0</span>)</div>
                </div>
                <div style="overflow:auto;">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 28%;">å§“å/æ€§åˆ«/å¹´é¾„</th>
                                <th>è¯Šæ–­</th>
                                <th style="width: 10%;">æ¬¡æ•°</th>
                                <th style="width: 14%;">é¢„çº¦æ—¶é—´</th>
                                <th style="width: 12%;">æŠ¥åˆ°æ—¶é—´</th>
                                <th style="width: 10%;">æ“ä½œäºº</th>
                                <th style="width: 14%;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="leftBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="panel">
                <div class="section-title">æœªæŠ¥åˆ°(<span id="cUncheck">0</span>)</div>
                <div style="overflow:auto;">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 34%;">å§“å/æ€§åˆ«/å¹´é¾„</th>
                                <th style="width: 18%;">ç—…æ¡ˆå·</th>
                                <th style="width: 18%;">æ”¾ç–—å·</th>
                                <th style="width: 18%;">é¢„çº¦æ—¶é—´</th>
                                <th style="width: 12%;">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="rightBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="note">è¯´æ˜ï¼šé¼ æ ‡æ‹–åŠ¨å¯ç§»åŠ¨é¡ºåºï¼ˆåŸå‹ï¼šæœªå®ç°æ‹–æ‹½ï¼Œä»…åš UI å±•ç¤ºä¸åŸºç¡€äº¤äº’ï¼‰ã€‚</div>
    </div>

    <script>
        const state = {
            leftTab: 'queue',
            queue: [
                { id:'p1', badge:'å¢', badgeClass:'b-blue', name:'å¢æ·±å¹³', sex:'ç”·', age:66, diag:'ä¹³è…ºç™Œ', times:'7/30', appt:'09:00-10:00', checkin:'10:23:12', op:'èƒ¡æ°' },
                { id:'p2', badge:'é¾š', badgeClass:'b-purple', name:'é¾šä¿®ä¸œ', sex:'ç”·', age:66, diag:'ä¹³è…ºç™Œ', times:'7/30', appt:'09:00-10:00', checkin:'10:23:12', op:'åˆ˜å§¿' },
                { id:'p3', badge:'é«˜', badgeClass:'b-red', name:'é«˜èŠ³å®‡', sex:'å¥³', age:66, diag:'ä¹³è…ºç™Œ', times:'7/30', appt:'09:00-10:00', checkin:'10:23:12', op:'è‘›å“æ¶µ' },
            ],
            done: [
                { id:'d1', badge:'å‘¨', badgeClass:'b-gray', name:'å‘¨æ™º', sex:'-', age:66, diag:'ä¹³è…ºç™Œ', times:'7/30', appt:'09:00-10:00', checkin:'10:23:12', op:'ç”³éœ–' },
            ],
            skipped: [
                { id:'s1', badge:'ç‹', badgeClass:'b-purple', name:'ç‹é›ªå‡¡', sex:'å¥³', age:66, diag:'ä¹³è…ºç™Œ', times:'7/30', appt:'09:00-10:00', checkin:'10:23:12', op:'æ±¤æ¯…æ¯…' },
            ],
            uncheck: [
                { id:'u1', warn:false, name:'é¾šä¿®ä¸œ', sex:'ç”·', age:66, mrn:'287346745', rn:'287346745', appt:'08:00-09:00' },
                { id:'u2', warn:true,  name:'å´å§—å³°', sex:'å¥³', age:66, mrn:'287346745', rn:'287346745', appt:'08:00-09:00' },
            ]
        };

        function $(id) { return document.getElementById(id); }

        function renderCounts() {
            $('cQueue').textContent = state.queue.length;
            $('cDone').textContent = state.done.length;
            $('cSkipped').textContent = state.skipped.length;
            $('cUncheck').textContent = state.uncheck.length;
        }

        function renderLeft() {
            const list = state[state.leftTab];
            $('leftBody').innerHTML = list.map(item => {
                const opHtml = state.leftTab === 'queue'
                    ? `<span class="op" data-act="more" data-id="${item.id}">æ›´å¤š</span>`
                    : `<span class="op gray">æ›´å¤š</span>`;
                return `
                    <tr>
                        <td>
                            <div class="namecell">
                                <span class="badge ${item.badgeClass}">${item.badge}</span>
                                <span style="color:#1890ff;">${item.name}</span>
                                <span style="color:#999;">/ ${item.sex} / ${item.age}</span>
                            </div>
                        </td>
                        <td>${item.diag}</td>
                        <td>${item.times}</td>
                        <td><span class="pill">${item.appt}</span></td>
                        <td>${item.checkin}</td>
                        <td>${item.op}</td>
                        <td>${opHtml}</td>
                    </tr>
                `;
            }).join('');
        }

        function renderRight() {
            $('rightBody').innerHTML = state.uncheck.map(item => {
                const nameColor = item.warn ? '#ff4d4f' : '#1890ff';
                const icon = item.warn ? 'âš ï¸' : '';
                return `
                    <tr>
                        <td>
                            <div class="namecell">
                                <span style="width: 20px; text-align:center;">${icon}</span>
                                <span style="color:${nameColor};">${item.name}</span>
                                <span style="color:#999;">/ ${item.sex} / ${item.age}</span>
                            </div>
                        </td>
                        <td>${item.mrn}</td>
                        <td>${item.rn}</td>
                        <td>${item.appt}</td>
                        <td>
                            <span class="op gray">æš‚åœ</span>
                            <span class="op" data-act="checkin" data-id="${item.id}">æŠ¥åˆ°</span>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function setTab(tab) {
            state.leftTab = tab;
            document.querySelectorAll('#leftTabs .tab').forEach(el => el.classList.toggle('active', el.dataset.tab === tab));
            renderLeft();
        }

        function moveUncheckToQueue(id) {
            const idx = state.uncheck.findIndex(x => x.id === id);
            if (idx < 0) return;
            const p = state.uncheck.splice(idx, 1)[0];
            state.queue.unshift({
                id: p.id,
                badge: p.name.slice(0,1),
                badgeClass: 'b-blue',
                name: p.name,
                sex: p.sex,
                age: p.age,
                diag: 'ä¹³è…ºç™Œ',
                times: '7/30',
                appt: p.appt,
                checkin: new Date().toTimeString().slice(0,8),
                op: 'ç³»ç»Ÿ'
            });
            renderCounts();
            renderRight();
            setTab('queue');
        }

        // é¡¶éƒ¨æŒ‰é’®ï¼ˆåŸå‹ï¼šä»…æ¼”ç¤ºï¼‰
        $('btnSkip').addEventListener('click', () => alert('è¿‡å·ï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
        $('btnCall').addEventListener('click', () => alert('å‘¼å«ï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
        $('btnExec').addEventListener('click', () => alert('æ‰§è¡Œï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
        $('btnDetail').addEventListener('click', () => alert('è¯¦æƒ…ï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
        $('btnRecover').addEventListener('click', () => alert('å¤ä½ï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
        $('signAuth').addEventListener('click', () => alert('ç­¾å­—æˆæƒï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));

        // tabs
        $('leftTabs').addEventListener('click', (e) => {
            const tab = e.target.closest('.tab')?.dataset?.tab;
            if (!tab) return;
            setTab(tab);
        });

        // table ops
        $('rightBody').addEventListener('click', (e) => {
            const act = e.target.dataset.act;
            const id = e.target.dataset.id;
            if (act === 'checkin') {
                moveUncheckToQueue(id);
            }
        });

        $('leftBody').addEventListener('click', (e) => {
            const act = e.target.dataset.act;
            const id = e.target.dataset.id;
            if (act === 'more') alert(`æ›´å¤šæ“ä½œï¼š${id}ï¼ˆåŸå‹æ¼”ç¤ºï¼‰`);
        });

        // search
        function doSearch() {
            const kw = ($('kw').value || '').trim();
            if (!kw) return alert('è¯·è¾“å…¥æœç´¢å…³é”®å­—ï¼ˆåŸå‹æ¼”ç¤ºï¼‰');
            alert(`æœç´¢ï¼š${kw}ï¼ˆåŸå‹æ¼”ç¤ºï¼‰`);
        }
        $('doSearch').addEventListener('click', doSearch);
        $('kw').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') doSearch();
        });

        // init
        renderCounts();
        setTab('queue');
        renderRight();
    </script>
</body>
</html>

