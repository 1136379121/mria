# 表单设计页面新增控件指令规范（PM/开发/测试通用）

## 1. 适用范围

当任何人（PM/开发/测试）提出“在 `原型/表单设计.html` 增加新控件/新字段/新组件”需求时，默认按本规范执行。

## 2. 固定约定（本仓库默认）

- **画布展示**：画布中的控件按“设计态（编辑器态）”呈现（用于设计/排版/配置）。
- **应用态展示**：点击画布中的控件时，在控件旁边弹出**浮窗**展示“应用态（真实表单应用时的显示效果）”。
- **红字标注**：浮窗标题及说明必须用红字标注：**“仅用于开发/测试对比，不是系统实际功能”**。

> 目的：让开发与测试在同一页面直观看到同一控件的“设计态 vs 应用态”的差异与规则。

## 3. 助手必须主动确认的问题（默认会问）

> 下面问题即使 PM 忘记说明，助手也会主动追问并阻塞实现，直到信息足够生成原型。

### 3.1 是否存在“双态差异”

- 该控件在**表单设计态**与**实际表单应用态**是否有差别？
  - 若 **无差别**：应用态浮窗可复用同外观规则（仅标注为应用态示意）。
  - 若 **有差别**：必须补充应用态的草图/文字说明（见 3.2）。

### 3.2 应用态（真实表单）需要提供的信息

PM 需要用草图或文字描述（至少覆盖以下要点）：

- **展示样式**：输入框/下拉/多行/分组/表格/附件/图片等具体外观
- **默认值/回显**：是否有默认值、是否回显历史值、空值时显示什么
- **交互能力**：可编辑/只读/禁用、是否可清空、是否有快捷按钮（如 HIS、选择器等）
- **校验规则**：必填、格式（长度/正则/数值范围）、提示文案出现时机（失焦/提交）
- **单位/格式**：单位展示位置、日期/时间格式、千分位等
- **异常/提示**：错误态样式、提示文案、边界值行为

> 推荐：PM 直接提供一张“应用态草图”，或截图标注。

## 4. PM 指令模板（建议复制粘贴）

```
新增控件名称：
控件类型（输入/选择/多行/日期/表格/附件...）：
放置位置（分组/列数/排序）：
字段标题（label）：
字段编码（code，若有）：

是否存在设计态 vs 应用态差异：是/否

【若有差异】应用态说明/草图：
- 应用态长什么样（草图或文字）：
- 默认值/回显：
- 是否必填 & 校验规则 & 提示文案：
- 可编辑/只读/禁用：
- 其他交互（按钮/弹窗/联动）：
```

## 5. 验收口径（开发/测试）

- 画布中能找到新增控件（设计态），且可被选中配置属性
- 点击控件后，旁边浮窗出现“应用态预览”
- 浮窗有红字标注“仅用于开发/测试对比，不是系统实际功能”
- 若 PM 声称存在差异：浮窗的应用态外观/文案与 PM 描述一致

