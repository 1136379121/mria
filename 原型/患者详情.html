<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ‚£è€…è¯¦æƒ…</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0; /* ç”±é¡µé¢æ¡†æ¶ç»Ÿä¸€æ§åˆ¶è¾¹è· */
      background: #f5f5f5;
      color: #1f1f1f;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", "Microsoft YaHei", sans-serif;
    }

    :root{
      --bg: #f5f5f5;
      --card: #fff;
      --line: #eaecef;
      --muted: #8c8c8c;
      --primary: #1890ff;
      --success: #52c41a;
      --purple: #9254de;
      --teal: #13c2c2;
      --orange: #fa8c16;
      --shadow: 0 2px 10px rgba(0,0,0,0.06);
    }

    .page {
      background: var(--card);
      border-radius: 0;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    /* é¡¶éƒ¨æ‚£è€…ä¿¡æ¯æ¡ */
    .topbar {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 10px 14px;
      border-bottom: 1px solid var(--line);
      background: #fff;
    }
    .back {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1px solid #d9d9d9;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      color: #666;
      background: #fff;
    }
    .badge-big {
      width: 120px;
      height: 120px;
      border-radius: 10px;
      background: #b7a6ff;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 52px;
      font-weight: 800;
      flex: 0 0 120px;
    }
    .pinfo {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-width: 620px;
    }
    .pinfo-top {
      display: flex;
      align-items: baseline;
      gap: 10px;
      flex-wrap: wrap;
    }
    .p-name {
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .p-sex { font-size: 18px; font-weight: 700; }
    .tag {
      display: inline-flex;
      align-items: center;
      height: 22px;
      padding: 0 8px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid #d9f7be;
      color: #389e0d;
      background: #f6ffed;
      margin-left: 4px;
    }
    .pinfo-sub {
      display: flex;
      flex-wrap: wrap;
      gap: 16px 22px;
      color: #333;
      font-size: 13px;
    }
    .kv { display: inline-flex; gap: 6px; align-items: baseline; }
    .k { color: var(--muted); }
    .v { font-weight: 600; color: #111; }

    .tabs {
      margin-top: 2px;
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .tab {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      height: 32px;
      padding: 0 12px;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      font-size: 13px;
      color: #333;
      border: 1px solid transparent;
      background: #fff;
    }
    .tab .dot{
      width: 18px; height: 18px; border-radius: 6px;
      display: inline-flex; align-items:center; justify-content:center;
      color: #fff; font-size: 12px; font-weight: 800;
    }
    .tab.active{
      border-color: rgba(24,144,255,0.28);
      background: rgba(24,144,255,0.06);
      color: var(--primary);
    }
    .tab.active .label{ font-weight: 700; }
    .dot.blue{ background: #1890ff; }
    .dot.green{ background: #52c41a; }
    .dot.teal{ background: #13c2c2; }
    .dot.orange{ background: #fa8c16; }

    .top-right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #666;
      font-size: 13px;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      height: 30px;
      padding: 0 12px;
      border-radius: 999px;
      background: #fff7e6;
      border: 1px solid #ffe7ba;
      color: #ad4e00;
      user-select: none;
    }

    /* ä¸»ä½“ä¸‰åˆ—å¸ƒå±€ */
    .main {
      display: grid;
      grid-template-columns: 56px 340px 1fr 170px;
      gap: 12px;
      padding: 12px;
      background: var(--bg);
    }

    /* å·¦ä¾§ç«–å‘åŠŸèƒ½æ  */
    .rail {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px 6px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: center;
    }
    .rail-item{
      width: 42px;
      height: 64px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      user-select: none;
      border: 1px solid transparent;
      color: #666;
      font-size: 12px;
    }
    .rail-item.active{
      background: rgba(24,144,255,0.08);
      border-color: rgba(24,144,255,0.22);
      color: var(--primary);
      font-weight: 700;
    }
    .rail-ico{
      width: 26px;
      height: 26px;
      border-radius: 10px;
      background: #f5f5f5;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      color: #888;
    }
    .rail-item.active .rail-ico{
      background: rgba(24,144,255,0.18);
      color: var(--primary);
    }

    /* æµç¨‹æ ‘ */
    .panel {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 1px 6px rgba(0,0,0,0.04);
    }
    .panel-header{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-bottom: 1px solid var(--line);
      background: #fff;
    }
    .panel-title{
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 800;
      font-size: 14px;
    }
    .count{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      height: 18px;
      min-width: 18px;
      padding: 0 6px;
      border-radius: 6px;
      background: #fff7e6;
      border: 1px solid #ffe7ba;
      color: #ad4e00;
      font-size: 12px;
      font-weight: 800;
    }
    .panel-action{
      color: var(--primary);
      cursor: pointer;
      user-select: none;
      font-size: 13px;
    }
    .flow {
      padding: 10px 8px 12px 8px;
      max-height: 560px;
      overflow: auto;
    }
    .flow-group{
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 8px;
      border-radius: 8px;
      background: #f0f5ff;
      border: 1px solid #d6e4ff;
      color: #1d39c4;
      font-weight: 800;
      margin-bottom: 10px;
    }
    .caret{
      width: 0; height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 6px solid #1d39c4;
      opacity: .9;
    }
    .flow-items{
      position: relative;
      padding-left: 18px;
    }
    .flow-items::before{
      content:"";
      position:absolute;
      left: 11px;
      top: 4px;
      bottom: 4px;
      width: 2px;
      background: #d9d9d9;
    }
    .flow-item{
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 8px;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      color: #333;
    }
    .flow-item:hover{ background: #fafafa; }
    .flow-item.active{
      background: rgba(24,144,255,0.08);
      border: 1px solid rgba(24,144,255,0.2);
    }
    .node{
      position:absolute;
      left: 4px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--primary);
      color: #fff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 900;
      border: 2px solid #fff;
    }
    .flow-text{
      padding-left: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .mini-icon{
      width: 16px; height: 16px; border-radius: 6px;
      background: rgba(24,144,255,0.18);
      display:inline-flex; align-items:center; justify-content:center;
      color: var(--primary);
      font-weight: 900;
      font-size: 12px;
    }

    /* ä¸­å¤®æ–‡æ¡£åŒº */
    .doc {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 1px 6px rgba(0,0,0,0.04);
      display: flex;
      flex-direction: column;
      min-height: 620px;
    }
    .doc-inner{
      padding: 18px 18px 8px 18px;
      overflow: auto;
    }
    .doc-top{
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
    }
    .hosp{
      display: flex;
      align-items: center;
      gap: 10px;
      color: #333;
    }
    .hosp-logo{
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 1px solid #e8e8e8;
      background: radial-gradient(circle at 30% 30%, #d6f4ff, #fff);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      color: #1677ff;
    }
    .hosp-name{
      font-weight: 800;
      font-size: 12px;
      color: #555;
      line-height: 1.2;
    }
    .barcode{
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      margin-top: 2px;
    }
    .bars{
      width: 330px;
      height: 40px;
      border-radius: 6px;
      background:
        repeating-linear-gradient(90deg, #111 0 5px, #fff 5px 9px, #111 9px 11px, #fff 11px 14px);
      opacity: 0.92;
    }
    .barcode-num{ font-size: 13px; color: #111; font-weight: 700; }

    .doc-title{
      margin-top: 14px;
      text-align: center;
    }
    .dept{ font-size: 18px; font-weight: 800; margin-bottom: 10px; }
    .big-title{ font-size: 36px; font-weight: 900; letter-spacing: 1px; }

    .section{
      margin-top: 18px;
    }
    .section-head{
      display:flex;
      align-items:center;
      gap: 10px;
      color: #333;
      font-weight: 900;
      margin-bottom: 10px;
    }
    .mark{
      width: 10px;
      height: 10px;
      border-radius: 3px;
      background: var(--primary);
    }
    .kv-grid{
      background: #fafafa;
      border: 1px solid #f0f0f0;
      border-radius: 8px;
      padding: 12px 12px;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr;
      gap: 10px 14px;
      font-size: 13px;
      color: #333;
    }
    .kv-grid .kv { white-space: nowrap; }

    .loc-grid{
      border-top: 1px solid #f0f0f0;
      padding-top: 12px;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 14px;
      align-items: start;
    }
    .body-img{
      height: 170px;
      border: 1px solid #f0f0f0;
      border-radius: 8px;
      background:
        linear-gradient(90deg, rgba(24,144,255,0.12), rgba(24,144,255,0.02)),
        radial-gradient(circle at 40% 40%, rgba(0,0,0,0.12), rgba(0,0,0,0) 50%);
      position: relative;
      overflow: hidden;
    }
    .body-img::after{
      content:"";
      position:absolute;
      left: 18px; top: 24px;
      width: 68px; height: 120px;
      border-radius: 40px 40px 30px 30px;
      background: rgba(0,0,0,0.16);
      filter: blur(0.2px);
      opacity: .35;
    }
    .checklist{
      margin-top: 8px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px 10px;
      font-size: 12px;
      color: #555;
    }
    .check{
      display:flex;
      align-items:center;
      gap: 6px;
      user-select:none;
    }
    .check input{ accent-color: var(--primary); }

    .loc-kv{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 14px;
      font-size: 13px;
      color: #333;
    }

    .doc-footer{
      border-top: 1px solid var(--line);
      padding: 10px 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: #fff;
    }
    .fbtn{
      height: 34px;
      padding: 0 14px;
      border-radius: 10px;
      border: 1px solid #d9d9d9;
      background: #fff;
      color: #333;
      cursor: pointer;
      user-select: none;
    }
    .fbtn:hover{ border-color: var(--primary); color: var(--primary); }

    /* å³ä¾§å¿«æ·æŒ‰é’® */
    .side-actions{
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .sbtn{
      height: 42px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: #fff;
      cursor: pointer;
      user-select: none;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 0 12px;
      color: #333;
      box-shadow: 0 1px 6px rgba(0,0,0,0.04);
    }
    .sbtn:hover{ border-color: rgba(24,144,255,0.28); }
    .sico{
      width: 22px; height: 22px;
      border-radius: 8px;
      display:flex;
      align-items:center;
      justify-content:center;
      color: #fff;
      font-weight: 900;
      font-size: 12px;
    }
    .sico.blue{ background: var(--primary); }
    .sico.purple{ background: var(--purple); }
    .sico.orange{ background: var(--orange); }
    .sico.teal{ background: var(--teal); }
    .slabel{ font-size: 13px; font-weight: 700; }

    @media (max-width: 1280px){
      .main{ grid-template-columns: 56px 320px 1fr 150px; }
      .bars{ width: 260px; }
      .kv-grid{ grid-template-columns: 1fr 1fr; }
    }
    @media (max-width: 980px){
      .main{ grid-template-columns: 1fr; }
      .rail{ flex-direction: row; justify-content: center; padding: 10px; }
      .rail-item{ width: 90px; height: 52px; }
      .side-actions{ flex-direction: row; flex-wrap: wrap; }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="topbar">
      <div class="back" id="btnBack" title="è¿”å›">â€¹</div>
      <div class="badge-big" title="æ‚£è€…åºå·/åºŠå·ç¤ºæ„">1</div>

      <div class="pinfo">
        <div class="pinfo-top">
          <div class="p-name">111</div>
          <div class="p-sex">å¥³</div>
          <span class="tag">é—¨è¯Š</span>
          <span style="color:var(--muted); font-size: 12px;">ç™»è®°ä¿¡æ¯</span>
        </div>
        <div class="pinfo-sub">
          <span class="kv"><span class="k">å¹´é¾„</span><span class="v">36å²</span></span>
          <span class="kv"><span class="k">ç—…æ¡ˆå·</span><span class="v">00009</span></span>
          <span class="kv"><span class="k">æ”¾ç–—å·</span><span class="v">20220025</span></span>
          <span class="kv"><span class="k">æœ¬äººç”µè¯</span><span class="v">15659341022</span></span>
          <span class="kv"><span class="k">åŒ»ç”Ÿç»„</span><span class="v">â€”</span></span>
          <span class="kv"><span class="k">ä¸»ç®¡åŒ»ç”Ÿ</span><span class="v">å§œé¹è£</span></span>
        </div>
        <div class="tabs" id="topTabs">
          <div class="tab active" data-tab="log"><span class="dot blue">âœ“</span><span class="label">æ²»ç–—æ—¥å¿—</span></div>
          <div class="tab" data-tab="record"><span class="dot green">âœ“</span><span class="label">æ²»ç–—å®æ–½è®°å½•</span></div>
          <div class="tab" data-tab="img"><span class="dot teal">âœ“</span><span class="label">é›†æˆè§†å›¾</span></div>
          <div class="tab" data-tab="data"><span class="dot orange">âœ“</span><span class="label">æ•°æ®ä¸­å¿ƒ</span></div>
        </div>
      </div>

      <div class="top-right">
        <div class="pill">å…±1æ¬¡ç™»è®°&nbsp;&nbsp;|&nbsp;&nbsp;é—¨è¯Š</div>
      </div>
    </div>

    <div class="main">
      <!-- å·¦ä¾§ç«–æ  -->
      <div class="rail" id="leftRail">
        <div class="rail-item active" data-rail="progress"><div class="rail-ico">â±</div><div>è¿›åº¦</div></div>
        <div class="rail-item" data-rail="plan"><div class="rail-ico">âœ¦</div><div>è®¡åˆ’</div></div>
        <div class="rail-item" data-rail="emr"><div class="rail-ico">â‰¡</div><div>ç—…å†</div></div>
        <div class="rail-item" data-rail="fee"><div class="rail-ico">Â¥</div><div>è´¹ç”¨</div></div>
        <div class="rail-item" data-rail="doc"><div class="rail-ico">â€”</div><div>æ–‡æ¡£</div></div>
      </div>

      <!-- æµç¨‹ -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">å…±<span class="count">1</span>ä¸ªæµç¨‹</div>
          <div class="panel-action" id="btnAddFlow">æ–°å¢</div>
        </div>
        <div class="flow">
          <div class="flow-group">
            <div class="caret"></div>
            <div style="flex:1;">[1] å®Œæ•´æµç¨‹ (å¤´é¢ˆéƒ¨-é¼»å’½)</div>
            <div style="opacity:.65;">â‹¯</div>
          </div>
          <div class="flow-items" id="flowItems">
            <div class="flow-item active" data-node="å®šä½ç”³è¯·"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ§¾</span><span>å®šä½ç”³è¯·</span></div></div>
            <div class="flow-item" data-node="å®šä½æ‰§è¡Œ"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ“Œ</span><span>å®šä½æ‰§è¡Œ</span></div></div>
            <div class="flow-item" data-node="é¶åŒºå‹¾ç”»"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">âœ</span><span>é¶åŒºå‹¾ç”»</span></div></div>
            <div class="flow-item" data-node="å‹¾ç”»å®¡æ ¸"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">âœ”</span><span>å‹¾ç”»å®¡æ ¸</span></div></div>
            <div class="flow-item" data-node="è®¡åˆ’ç”³è¯·"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ§©</span><span>è®¡åˆ’ç”³è¯·</span></div></div>
            <div class="flow-item" data-node="è®¡åˆ’è®¾è®¡"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ“</span><span>è®¡åˆ’è®¾è®¡</span></div></div>
            <div class="flow-item" data-node="ç»„é•¿å®¡æ ¸"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ‘¥</span><span>ç»„é•¿å®¡æ ¸</span></div></div>
            <div class="flow-item" data-node="åŒ»å¸ˆæ ¸å‡†"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ©º</span><span>åŒ»å¸ˆæ ¸å‡†</span></div></div>
            <div class="flow-item" data-node="è®¡åˆ’éªŒè¯"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ§ª</span><span>è®¡åˆ’éªŒè¯</span></div></div>
            <div class="flow-item" data-node="æ²»ç–—æ‰§è¡Œ"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">âš¡</span><span>æ²»ç–—æ‰§è¡Œ</span></div></div>
            <div class="flow-item" data-node="æ²»ç–—å°ç»“"><span class="node">âœ“</span><div class="flow-text"><span class="mini-icon">ğŸ“</span><span>æ²»ç–—å°ç»“</span></div></div>
          </div>
        </div>
      </div>

      <!-- æ–‡æ¡£ -->
      <div class="doc">
        <div class="doc-inner">
          <div class="doc-top">
            <div class="hosp">
              <div class="hosp-logo">C</div>
              <div class="hosp-name">é•¿æµ·åŒ»é™¢<br/>æ”¾å°„æ²»ç–—ç§‘</div>
            </div>
            <div class="barcode">
              <div class="bars" aria-label="æ¡ç ç¤ºæ„"></div>
              <div class="barcode-num">00009</div>
            </div>
          </div>

          <div class="doc-title">
            <div class="dept">è‚¿ç˜¤æ”¾åŒ–ç–—ç§‘12</div>
            <div class="big-title">å®šä½ç”³è¯·å•</div>
          </div>

          <div class="section">
            <div class="section-head"><span class="mark"></span><span>åŸºæœ¬ä¿¡æ¯</span></div>
            <div class="kv-grid">
              <span class="kv"><span class="k">å§“å</span><span class="v">111</span></span>
              <span class="kv"><span class="k">é™¢åŒº</span><span class="v">æœˆæ¹–</span></span>
              <span class="kv"><span class="k">æ€§åˆ«</span><span class="v">å¥³</span></span>
              <span class="kv"><span class="k">å¹´é¾„[å²]</span><span class="v">36</span></span>
              <span class="kv"><span class="k">ç—…æ¡ˆå·</span><span class="v">00009</span></span>
              <span class="kv"><span class="k">æ”¾ç–—å·</span><span class="v">20220025</span></span>
              <span class="kv"><span class="k">æ‚£è€…ç”µè¯</span><span class="v">15659341022</span></span>
              <span class="kv"><span class="k">è”ç³»äººç”µè¯</span><span class="v">15659341022</span></span>
              <span class="kv" style="grid-column: span 2;"><span class="k">ä¸»ç®¡åŒ»ç”Ÿ</span><span class="v">å§œé¹è£</span></span>
              <span class="kv" style="grid-column: span 2;"><span class="k">åˆ†æœŸ</span><span class="v">TXN0M0</span></span>
            </div>
          </div>

          <div class="section">
            <div class="section-head"><span class="mark"></span><span>å®šä½ä¿¡æ¯</span></div>
            <div class="loc-grid">
              <div>
                <div class="body-img" title="éƒ¨ä½ç¤ºæ„ï¼ˆåŸå‹ï¼‰"></div>
                <div class="checklist">
                  <label class="check"><input type="checkbox" checked> é¢…é¡¶</label>
                  <label class="check"><input type="checkbox" checked> è‚©å¼“</label>
                  <label class="check"><input type="checkbox" checked> é¼»å°–</label>
                  <label class="check"><input type="checkbox" checked> ä¸‹é¢Œ</label>
                  <label class="check"><input type="checkbox" checked> å–‰ç»“</label>
                  <label class="check"><input type="checkbox"> èƒ¸éª¨ä¸Šçª</label>
                </div>
              </div>
              <div class="loc-kv">
                <span class="kv"><span class="k">è‚¿ç˜¤ä½ç½®1</span><span class="v">å¤´é¢ˆéƒ¨</span></span>
                <span class="kv"><span class="k">æ‰«æéƒ¨ä½</span><span class="v">å¤´</span></span>
                <span class="kv"><span class="k">æ‰«æèŒƒå›´[ä¸Šç•Œ]</span><span class="v">é¢…é¡¶</span></span>
                <span class="kv"><span class="k">æ‰«æèŒƒå›´[ä¸‹ç•Œ]</span><span class="v">å–‰ç»“</span></span>
                <span class="kv"><span class="k">æ‰«ææ–¹å¼</span><span class="v">å¹³æ‰«</span></span>
                <span class="kv"><span class="k">æ‰«æè¿›ç¨‹</span><span class="v">å¤´å…ˆè¿›</span></span>
              </div>
            </div>
          </div>
        </div>

        <div class="doc-footer">
          <button class="fbtn" id="btnEdit">ç¼–è¾‘</button>
          <button class="fbtn" id="btnPrint">æ‰“å°</button>
        </div>
      </div>

      <!-- å³ä¾§å¿«æ·æŒ‰é’® -->
      <div class="side-actions">
        <button class="sbtn" data-act="ct"><span class="sico blue">CT</span><span class="slabel">CTé‡æ‰«</span></button>
        <button class="sbtn" data-act="wire"><span class="sico teal">+</span><span class="slabel">è¡¥çº¿</span></button>
        <button class="sbtn" data-act="appt"><span class="sico purple">ğŸ“…</span><span class="slabel">é¢„çº¦è®°å½•</span></button>
        <button class="sbtn" data-act="flow"><span class="sico orange">âŸ²</span><span class="slabel">æµè½¬è®°å½•</span></button>
        <button class="sbtn" data-act="guide"><span class="sico purple">â“˜</span><span class="slabel">æ“ä½œæŒ‡å—</span></button>
      </div>
    </div>
  </div>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    // è¯»å–æ‚£è€…å‚æ•°ï¼ˆä»æ‚£è€…åˆ—è¡¨â€œæŸ¥çœ‹â€è¿›å…¥æ—¶æºå¸¦ patientIdï¼‰
    (function initPatientFromQuery() {
      try {
        const params = new URLSearchParams(window.location.search || '');
        const pid = params.get('patientId');
        if (!pid) return;

        const barcode = document.querySelector('.barcode-num');
        if (barcode) barcode.textContent = pid;

        const title = document.querySelector('.p-name');
        if (title) title.textContent = pid;

        document.title = `æ‚£è€…è¯¦æƒ… - ${pid}`;
      } catch (e) {
        // ignore
      }
    })();

    // é¡¶éƒ¨ tab åˆ‡æ¢ï¼ˆåŸå‹ï¼šä»…é«˜äº®ï¼‰
    $('#topTabs').addEventListener('click', (e) => {
      const tab = e.target.closest('.tab');
      if (!tab) return;
      $$('#topTabs .tab').forEach(t => t.classList.toggle('active', t === tab));
    });

    // å·¦ä¾§ rail åˆ‡æ¢ï¼ˆåŸå‹ï¼šä»…é«˜äº® + æç¤ºï¼‰
    $('#leftRail').addEventListener('click', (e) => {
      const item = e.target.closest('.rail-item');
      if (!item) return;
      $$('#leftRail .rail-item').forEach(i => i.classList.toggle('active', i === item));
      const name = item.textContent.trim();
      // ä¸å¼¹çª—å¹²æ‰°ä¸»ä½“éªŒï¼Œè½»æç¤º
      console.log('åˆ‡æ¢åŠŸèƒ½ï¼š', name);
    });

    // æµç¨‹èŠ‚ç‚¹é€‰ä¸­ï¼ˆåŸå‹ï¼šåˆ‡æ¢æ–‡æ¡£æ ‡é¢˜ï¼‰
    $('#flowItems').addEventListener('click', (e) => {
      const it = e.target.closest('.flow-item');
      if (!it) return;
      $$('#flowItems .flow-item').forEach(x => x.classList.toggle('active', x === it));
      const node = it.dataset.node || 'å®šä½ç”³è¯·';
      document.title = `æ‚£è€…è¯¦æƒ… - ${node}`;
      const h = document.querySelector('.big-title');
      if (h) h.textContent = node + 'å•';
    });

    // å³ä¾§å¿«æ·æŒ‰é’®
    $$('.side-actions .sbtn').forEach(btn => {
      btn.addEventListener('click', () => alert(`${btn.innerText.trim()}ï¼ˆåŸå‹æ¼”ç¤ºï¼‰`));
    });

    // åº•éƒ¨æŒ‰é’®
    $('#btnEdit').addEventListener('click', () => alert('ç¼–è¾‘ï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
    $('#btnPrint').addEventListener('click', () => window.print());
    $('#btnAddFlow').addEventListener('click', () => alert('æ–°å¢æµç¨‹ï¼ˆåŸå‹æ¼”ç¤ºï¼‰'));
    $('#btnBack').addEventListener('click', () => history.back());
  </script>
</body>
</html>

